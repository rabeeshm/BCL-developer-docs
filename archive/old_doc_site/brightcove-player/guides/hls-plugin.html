<!DOCTYPE html>
<html lang="en">
<head><meta name="robots" content="noindex"><meta name="robots" content="noindex">
    <!-- Begin Drupal Taxonomy Data -->
    <meta name="products" content="Video Cloud">
    <meta name="role" content="Player Developer">
    <meta name="task" content="">
    <meta name="topic" content="Playback,Plugins">
    <!-- End Drupal Taxonomy Data -->
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
    <title id="bclPageTitle">HLS Plugin</title>

    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/normalize.css" />
    <link href="//fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700" rel="stylesheet" type="text/css">
    <script src="//use.edgefonts.net/source-code-pro.js"></script>
    <link rel="stylesheet" href="//learning-services-media.brightcove.com/doc-assets/js/prism/prism.css">
    <link rel="stylesheet" href="//docs.brightcove.com/en/styles/template-less/css/bcls-doc.css">
    <link rel="stylesheet" href="/en/styles/foundation-fixes.css">

    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-2728311-29', 'auto');
        ga('send', 'pageview');
    </script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>

</head>

<body><script src="//docs.brightcove.com/en/scripts/redirect.js"></script>
    <!-- header navbar -->
    <div id="navWrapper" class="fixed"></div>
    <!-- breadcrumbs -->
    <nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
    <!-- search -->
    <div id="searchModal" class="reveal-modal" data-reveal></div>
    <!-- content -->
    <div class="row">
        <div class="sidebar large-2 columns show-for-large-up">
            <div id="sidenav" class="side-nav"></div>
        </div>
        <div id="main" class="large-10 small-12 columns">
          <h1 id="bclPageHeading">HLS Plugin</h1>
            <h3>The page you are looking for doesn't live here anymore -- redirecting you to <a id="red" href=""></a> in 3 seconds.</h3>
            <script>
                var loc = document.location.href,
                    red = document.getElementById('red'),
                    newLoc = loc.replace('video-cloud', 'player'),
                    t;
                    red.setAttribute('href', newLoc);
                    red.textContent = newLoc;
                    t = window.setTimeout(function(){
                        document.location = newLoc;
                    }, 3000);
            </script>
        
            
            
        <article class="bcls-article">
            <header id="bcls_header" class="bcls-header">
                <!-- content starts here -->
                <p>The HLS plugin is a Brightcove player plugin that relies on W3C's Media Source Extensions (MSE) to play HTTP Live Streaming (HLS) video on platforms that do not natively support it. The HLS plugin is automatically included in the player.</p>
            </header>

            <section id="HLS_plugin_basics" class="bcls-section">
              <h2>HLS plugin basics</h2>
              <p>The following points help you understand and use the HLS plugin:</p>
              <ul>
                <li>As mentioned in the opening sentence of this document, the plugin relies on W3C's Media Source Extensions (MSE). MSE is a W3C specification that allows JavaScript to send byte streams to media codecs within web browsers that support HTML5 video. Among other possible uses, this allows the implementation of client-side prefetching and buffering code for streaming media entirely in JavaScript.</li>
                <li>With the plugin you can then use HLS (m3u8) video content in the player. For instance you could create a player using this configuration for the media section:
                  <pre class="line-numbers"><code class="language-json">"media":{
    "sources": [{
        "src": "http://example.com/video.m3u8",
        "type": "application/x-mpegURL"
    }]
}</code></pre>
                </li>
                <li>Cross-origin resource sharing (CORS) can be an issue when using HLS. For more information about using CORS, see the <a href="../../concepts/cors/cors.html">CORS guide</a>.</li>
                <li>Flash will be used as a fallback to play HLS only on IE11 on Windows 7.</li>
                <li>HLS is not supported on versions of IE earlier than IE11.</li>
              </ul>
            </section>

            <section id="overview" class="bcls-section">
                <h2>Overview</h2>
                    <p><a href="https://developer.apple.com/streaming/">HTTP Live Streaming</a> (HLS) has become a de-facto standard for streaming video on mobile devices thanks to its native support on iOS and Android. Although, there are a number of reasons independent of platform to recommend the format:</p>
                    <ul>
                        <li>Supports (client-driven) adaptive bitrate selection</li>
                        <li>Delivered over standard HTTP ports</li>
                        <li>Simple, text-based manifest format</li>
                        <li>No proprietary streaming servers required</li>
                    </ul>
                    <p>Unfortunately, all the major desktop browsers except for Safari are missing HLS support. That leaves web developers in the unfortunate position of having to maintain alternate renditions of the same video and potentially having to forego HTML-based video entirely to provide the best desktop viewing experience.</p>
                    <p>This plugin addresses the situation by providing a polyfill for HLS on browsers that have Media Source Extensions or Flash support. You can deploy a single HLS stream, code against the regular HTML5 video APIs, and create a fast, high-quality video experience across all the big web device categories.</p>
                    <p>Currently, at this time there is <em>no</em> support for:</p>
                    <ul>
                        <li>Alternate audio and video tracks</li>
<!--                        <li>Subtitles</li>-->
                        <li>Segment codecs <em>other than</em> H.264 with AAC audio</li>
<!--                        <li>Live streams</li>-->
                        <li>Internet Explorer &lt; 11</li>
                    </ul>
                    <aside class="bcls-aside bcls-aside--information">Note: For maximum compatibility with all MSE implementations, Brightcove recommends setting <strong>audio_bitrate</strong> to no less than <strong>48</strong> in your ingest profiles.</aside>
                </section>
        <section id="options" class="bcls-section">
          <h2>Options</h2>
          <p>In this section options you can use to configure the HLS plugin are detailed. They can be implemented in two ways, either as a <strong>source</strong> option or a <strong>initialization</strong> option.</p>
          <h4>Source option</h4>
          <p>When you are defining the source, you can also set an option, in this case <code>withCredentials</code> is used:</p>
          <pre class="line-numbers"><code class="language-html">&lt;script type=&quot;text/javascript&quot;&gt;
  videojs('myPlayerID').ready(function(){
    var myPlayer = this;
    myPlayer.src({
      src: 'https://d2zihajmogu5jn.cloudfront.net/bipbop-advanced/bipbop_16x9_variant.m3u8',
      type: 'application/x-mpegURL',
      <span class="bcls-highlight">withCredentials: true</span>
    });
  });
&lt;/script&gt;</code></pre>
            <h4>Initialization option</h4>
            <p>You can also set options when initializing your player. In the following the <code>withCredentials</code> option is used in the examples.</p>
            <pre class="line-numbers"><code class="language-javascript">// html5 for html HLS
videojs(video, {html5: {
  hls: {
    withCredentials: true
  }
}});

// or

// Flash for Flash HLS
videojs(video, {flash: {
  hls: {
    withCredentials: true
  }
}});

// or

var options = {hls: {
  withCredentials: true;
}};
videojs(video, {flash: options, html5: options});</code></pre>
            <p>You can configure the plugin using the <a href="../../player-management/index.html">Player Management API</a> using an HTTP <code>PATCH</code> method, as shown in the following code. Of course, this will apply at the player level.</p>
            <pre class="line-numbers"><code class="language-json">curl \
  --header "Content-Type: application/json" \
  --user YOUR_EMAIL \
  --request PATCH \
  --data '{ "hls": { "withCredentials": true } }' \
  https://players.api.brightcove.com/v1/accounts/YOUR_ACCOUNT_ID/players/YOUR_PLAYER_ID/configuration</code></pre>
          <h3><strong>withCredentials</strong></h3>
          <p>Type: <code>boolean</code></p>
          <ul>
            <li><code>withCredentials</code> can be used as both a <strong>source</strong> and <strong>initialization</strong> option.</li>
          </ul>
          <p>When the <code>withCredentials</code> property is set to <code>true</code>, all XHR requests for manifests and segments would have <code>withCredentials</code> set to <code>true</code> as well. This enables storing and passing cookies from the server that the manifests and segments live on. This has some implications on CORS because when set, the <code>Access-Control-Allow-Origin</code> header cannot be set to <code>*</code>, also, the response headers require the addition of <code>Access-Control-Allow-Credentials</code> header which is set to <code>true</code>. See the  <a href="http://www.html5rocks.com/en/tutorials/cors/">HTML5Rocks's article</a> for more info.</p>
          <aside class="bcls-aside bcls-aside--warning">Know Issue: <code>withCredentials</code> does NOT work with Desktop Safari and iPad (it does work on iPhone though).</aside>
          <p>You can also set the <code>withCredentials</code> option on a per source basis, rather than on a player basis as just shown. For instance, when setting the source you can include <code>withCredentials</code>, as shown here:</p>
          <pre class="line-numbers"><code class="language-json">curl \
--header "Content-Type: application/json" \
--user $EMAIL \
--request POST \
--data '{
"name": "MySamplePlayer",
"configuration": {
  "media": {
    "sources": [{
      "src":"http://solutions.brightcove.com/bcls/assets/videos/Tiger.mp4",
      "type":"video/mp4",
      "withCredentials": true
    }]
  }
}
}' \
https://players.api.brightcove.com/v1/accounts/$ACCOUNT_ID/players</code></pre>
          <h3><strong>useCueTags</strong></h3>
          <p>Type: <code>boolean</code></p>
          <ul>
            <li><code>useCueTags</code> must be used as <strong>initialization</strong> option.</li>
          </ul>
          <p>When the <code>useCueTags</code> property is set to <code>true</code>, a text track is created with the label <strong>ad-cues</strong> and kind <strong>metadata</strong>. The track is then added to <code>player.textTracks()</code>.</p>
        </section>
        <section id="runtimeproperties" class="bcls-section">
        <h2>Runtime properties</h2>
        <p>The properties listed in the table are either getters and/or setters that can be used with the HLS plugin. Following the table is code showing how to use the properties that can function as setters.</p>
        <table class="bcls-table">
          <thead class="bcls-table__head">
            <tr>
              <th>Property</th>
              <th>Data Type</th>
              <th>Getter and/or Setter</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody class="bcls-table__body">
            <tr>
              <td>hls.playlists.master</td>
              <td>Object</td>
              <td>Getter</td>
              <td>An object representing the parsed master playlist. If a media playlist is loaded directly, a master playlist with only one entry will be created.</td>
            </tr>
            <tr>
              <td>hls.playlists.media</td>
              <td>Function</td>
              <td>Getter & Setter</td>
              <td>A function that can be used to retrieve or modify the currently active media playlist. The active media playlist is referred to when additional video data needs to be downloaded. Calling this function with no arguments returns the parsed playlist object for the active media playlist. Calling this function with a playlist object from the master playlist or a URI string as specified in the master playlist will kick off an asynchronous load of the specified media playlist. Once it has been retrieved, it will become the active media playlist.</td>
            </tr>
            <tr>
              <td>hls.segmentXhrTime</td>
              <td>Number</td>
              <td>Getter</td>
              <td>The number of milliseconds it took to download the last media segment. This value is updated after each segment download completes.</td>
            </tr>
            <tr>
              <td>hls.bandwidth</td>
              <td>Number</td>
              <td>Getter & Setter</td>
              <td>The number of bits downloaded per second in the last segment download. This value is used by the default implementation of <code>selectPlaylist</code> to select an appropriate bitrate to play. Before the first video segment has been downloaded, it's hard to estimate bandwidth accurately. The HLS tech uses a heuristic based on the playlist download times to do this estimation by default. If you have a more accurate source of bandwidth information, you can override this value as soon as the HLS tech has loaded to provide an initial bandwidth estimate.</td>
            </tr>
            <tr>
              <td>hls.bytesReceived</td>
              <td>Number</td>
              <td>Getter</td>
              <td>The total number of content bytes downloaded by the HLS tech.</td>
            </tr>
            <tr>
              <td>hls.selectPlaylist</td>
              <td>Function</td>
              <td>Getter & Setter</td>
              <td>A function that returns the media playlist object to use to download the next segment. It is invoked by the plugin immediately before a new segment is downloaded. You can override this function to provide your adaptive streaming logic. You must, however, be sure to return a valid media playlist object that is present in <code>player.hls.master</code>.</td>
            </tr>
            <tr>
              <td>hls.representations</td>
              <td>Function</td>
              <td>Getter</td>
              <td>It is recommended to include the <a href="https://github.com/videojs/videojs-contrib-quality-levels">videojs-contrib-quality-levels</a> plugin to your page so that <strong>videojs-contrib-hls</strong> will automatically populate the <code>QualityLevelList</code> exposed on the player by the plugin. You can access this list by calling <code>player.qualityLevels()</code>.</td>
            </tr>
            <tr>
              <td>hls.xhr</td>
              <td>Function</td>
              <td>Getter</td>
              <td>The xhr function that is used by HLS internally is exposed on the per-player <strong>hls</strong> object. While it is possible, Brightcove do not recommend replacing the function with your own implementation.</td>
            </tr>
          </tbody>
        </table>
        <p>As an example, the following code shows using <code>bandwidth</code> as a setter. You first create and <code>options</code> object, then initialize the player passing that object to the <code>videojs()</code> function.</p>
        <pre class="line-numbers"><code class="language-javascript">&lt;script type=&quot;text/javascript&quot;&gt;
  var options = {hls: {
    bandwidth: 1
  }};
  videojs('myPlayerID', {flash: options, html5: options}).ready(function(){
    var myPlayer = this;
  });
&lt;/script&gt;</code></pre>
        </section>

        <section id="event" class="bcls-section">
        <h2>Event</h2>
        <p>There is one event associated with HLS content:</p>
          <h4>loadedmetadata</h4>
          <p>Fired after the first segment is downloaded for a playlist. This will not happen until video playback, as opposed to a downloaded segment, if Video.js' <code>metadata</code> is set to <code>none</code>.</p>
      </section>

      <section id="Reload_source_on_error" class="bcls-section">
        <h2>Reload source on error</h2>
        <p>When using the HLS plugin there is a method you can call that will reload the source at its current time when an error is emitted by the player. To turn on this feature you need to call the <code>reloadSourceOnError()</code> method. The following short video shows the method in action. All the code shown in the video is described later in this section.</p>
        <aside class="bcls-aside bcls-aside--information">Note: Although originally meant for live streaming, <code>reloadSourceOnError()</code> will also function with video on demand, as shown in the video.</aside>
        <iframe src="//players.brightcove.net/20318290001/E16-WGGOe_default/index.html?videoId=5246169715001"
          allowfullscreen
          webkitallowfullscreen
          mozallowfullscreen
          width = "640"
          height= "380"
          ></iframe>
        <p>The syntax for the <code>reloadSourceOnError()</code> method is as follows:</p>
        <pre class="line-numbers"><code class="language-javascript">reloadSourceOnError(optionsObject)</code></pre>
        <p>The optional <code>optionsObject</code> has the following properties:</p>
        <table class="bcls-table">
          <thead class="bcls-table__head">
            <tr>
              <th>Property</th>
              <th>Data Type</th>
              <td>Default Value</td>
              <th>Description</th>
            </tr>
          </thead>
          <tbody class="bcls-table__body">
            <tr>
              <td><code>errorInterval</code></td>
              <td>Number</td>
              <td>30</td>
              <td>The minimum amount of time (in seconds) that has to pass between two errors for the reload to trigger. For example, if you set the time to 10, each time an error occurs the function will check to see if a reload has happened less than 10 seconds ago. If less than the time interval has passed, it will NOT reload the source. (This is to ensure that content with an error doesn't reload constantly.) If more time than the interval specified has passed, the video is reloaded at the point when the error occurred.</td>
            </tr>
            <tr>
              <td><code>getSource()</code></td>
              <td>Function</td>
              <td>Retrieves current source</td>
              <td>A function that is called to get a source object to load or reload. By default it gets the current source of the player.</td>
            </tr>
          </tbody>
        </table>
        <p>The following details the code used in the video demonstration above:</p>
        <ul>
          <li>Lines 1-9: Standard in-page embed code with a player <code>id</code> added.</li>
          <li>Line 11: Button to manually create errors.</li>
          <li>Lines 22-24: Function called on button click to dispatch an error.</li>
          <li>Line 19: Create an object in which to place configuration options.</li>
          <li>Line 20: In the configuration object, create an <code>errorInterval</code> property and assign it a value.</li>
          <li>Line 21: Call the <code>reloadSourceOnError()</code> method, passing the configuration object as an argument.</li>
        </ul>
        <pre class="line-numbers"><code class="language-html">&lt;video id=&quot;myPlayerID&quot;
  data-video-id=&quot;4607746980001&quot;
  data-account=&quot;1507807800001&quot;
  data-player=&quot;HJLp3Hvmg&quot;
  data-embed=&quot;default&quot;
  data-application-id
  class=&quot;video-js&quot;
  controls
&gt;&lt;/video&gt;

&lt;p&gt;&lt;button onclick=&quot;createError()&quot;&gt;createError&lt;/button&gt;&lt;/p&gt;

&lt;script src=&quot;//players.brightcove.net/1507807800001/HJLp3Hvmg_default/index.min.js&quot;&gt;&lt;/script&gt;

&lt;script type=&quot;text/javascript&quot;&gt;
  var createError;
  videojs('myPlayerID').ready(function(){
    var myPlayer = this,
      <span class="bcls-highlight">reloadOptions = {};
    reloadOptions.errorInterval = 10;
    myPlayer.reloadSourceOnError(reloadOptions);</span>
    createError = function(){
      myPlayer.error({code:'2'});
    }
  });
&lt;/script&gt;</code></pre>
      </section>

      <section id="adaptiveswitching" class="bcls-section">
        <h2>Adaptive switching</h2>
        <h3>MP4 Rendition Selection</h3>
        <p>Generally, if viewing a video on a mobile device and playing an MP4, the player will choose the MP4 that has a bitrate closest to .5 Mbit/s. If on a desktop or laptop device it will choose one that is closest to 3 Mbit/s.</p>
        <h3>HLS Rendition Selection</h3>
        <p>HLS video is broken into segments. These are typically about 10 seconds in duration but can be longer or shorter. The player always starts with the rendition closest to .5 Mbit/s. On segment boundaries it will switch to a higher or lower rendition described in the text and images below.</p>
        <p>The HLS tech tries to ensure the highest-quality viewing experience possible, given the available bandwidth and encodings. This doesn't always mean using the highest-bitrate rendition available. For instance, if the player is 300px by 150px, it would be a waste of bandwidth to download a 4k stream.</p>
        <p>By default, the player attempts to load the highest-bitrate variant that is less than the most recently detected segment bandwidth, with one condition: if there are multiple variants with dimensions greater than the current player size, it will only switch up one size greater than the current player size.</p>
        <p>The process is illustrated below:</p>
        <ol>
            <li>Whenever a new segment is downloaded, the download bitrate is calculated based on the size of the segment and the time it took to download:
              <figure class="bcls-figure">
                  <img class="bcls-image" src="//learning-services-media.brightcove.com/doc-assets/player-development/playback/HLS-plugin/HLS-rendition-1.png" alt="HLS rendition1">
              </figure>
            <li>All the renditions that have a higher bitrate than the new measurement are filtered out:
              <figure class="bcls-figure">
                  <img class="bcls-image" src="//learning-services-media.brightcove.com/doc-assets/player-development/playback/HLS-plugin/HLS-rendition-2.png" alt="HLS rendition2">
              </figure>
            <li>Any renditions that are bigger than the current player's dimensions are filtered out:
              <figure class="bcls-figure">
                  <img class="bcls-image" src="//learning-services-media.brightcove.com/doc-assets/player-development/playback/HLS-plugin/HLS-rendition-3.png" alt="HLS rendition3">
              </figure>
            <li>A significant quality drop is not wanted just because your player is one pixel too small, so we add back in the next highest resolution. The highest bitrate rendition that remains is the one that gets used:
              <figure class="bcls-figure">
                  <img class="bcls-image" src="//learning-services-media.brightcove.com/doc-assets/player-development/playback/HLS-plugin/HLS-rendition-4.png" alt="HLS rendition4">
              </figure>
        </ol>
        <p>If it turns out no rendition is acceptable based on the filtering described above, the first encoding listed in the master playlist will be used.</p>
        <p>If you'd like your player to use a different set of priorities, it's possible to completely replace the rendition selection logic. For instance, you could always choose the most appropriate rendition by resolution, even though this might mean more stalls during playback. See the documentation on <a href="#selectplaylist">player.hls.selectPlaylist</a> for more details.</p>
      </section>
      <section id="inbandmetadata" class="bcls-section">
        <h2>In-band metadata</h2>
        <p>Brightcove Player will recognize certain types of ID3 tag information embedded in an HLS video stream. The ID3 standard was originally used to provide metadata about MP3 audio tracks. (The acronym is from <strong>ID</strong>entify MP<strong>3</strong>.) When a stream is encountered with embedded metadata, an in-band metadata text track will automatically be created and populated with cues as they are encountered in the stream. A common use case is the ID3 data would direct when advertisements should be shown in a live stream.</p>
        <p>The ID3 standard defines many frame types, but only the following two UTF-8 encoded frames will be mapped to cue points and their values set as cue text:</p>
        <ul>
            <li>WXXX - User defined URL link frame</li>
            <li>TXXX - User defined text information frame</li>
        </ul>
        <p> Cues are created for all other frame types and the data is attached to the generated cue:</p>
        <pre class="line-numbers"><code class="language-javascript">cue.value.data</code></pre>
        <p>For more information about text tracks in general see <a href="//www.html5rocks.com/en/tutorials/track/basics/">Getting Started With the Track Element</a>. For information on Brightcove Player and cue points see <a href="cue-points-guide.html">Using Cue Points</a>.</p>
      </section>
      <section id="608captions" class="bcls-section">
        <h2>608 captions</h2>
        <p>Brightcove's HLS plugin has support for 608 captions. 608 captions, also known as CEA-608 captions, EIA-608 captions and Line 21 captions, are a standard for closed captioning for NTSC TV analog broadcasts in the United States and Canada. The 608 captions can be inserted into a live stream where they are mixed into the HLS' <strong>ts</strong> (transport stream) files.</p>
      </section>
      <section id="hosting" class="bcls-section">
          <h2>Hosting issues</h2>
          <div class="BCL-concept">
              <p>Unlike a native HLS implementation, the HLS plugin has to comply with the browser&#39;s security policies. That means that all the files that make up the stream must be served from the same domain as the page hosting the video player or from a server that has appropriate <a href="https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS">CORS headers</a> configured. Easy <a href="http://enable-cors.org/server.html">instructions are available</a> for popular webservers and most CDNs should have no trouble turning CORS on for your account.</p> </div>
      </section>
      <section id="changelog" class="bcls-section">
        <h2>Changelog</h2>

        <h4>3 Mar 2017</h4>
        <p>v5.3.3</p>
        <ul>
          <li>Updated <strong>videojs-contrib-media-sources</strong> to v4.4.2 and <strong>mux.js</strong> to 4.1.1</li>
          <ul>
            <li>Fixed silence insertion to not insert extra frames when audio is offset</li>
            <li>Fixed metadata cue mapping so that it considers group cues with the same startTime and remaps them collectively to the same endTime</li>
            <li>Added fudge factor to Flash tag trim target</li>
            <li>Feature Video.js 6 compatibilbity</li>
            <li>Fixed Flash tag trimming for misaligned audio and video</li>
            <li>Reverted "Revert flash transmuxing in a web worker"</li>
          </ul>
          <li>Fixed do not timeout segment requests for non-master playlist source</li>
        </ul>

        <h4>22 Feb 2017</h4>
        <p>v5.3.2</p>
        <ul>
          <li>Fixed a bug with the combination of seek-to-live and resync-on-a-poor-guess behaviors</li>
        </ul>

        <h4>22 Feb 2017</h4>
        <p>v5.3.1</p>
        <ul>
          <li>Updated locking <strong>url-toolkit</strong> to 1.0.9 to support relative URLs</li>
          <li>Resynced on poor initial segment choice</li>
          <li>Fixed resuming live playback after long pauses</li>
        </ul>

        <h4>16 Feb 2017</h4>
        <p>v5.3.0</p>
        <ul>
          <li>Reset segment loaders on all Flash seeks
            <ul>
              <li>Updated <strong>mux.js</strong> to 4.1.0</li>
              <li>Updated <strong>videojs-contrib-media-sources</strong> to 4.4.0</li>
            </ul>
          </li>
          <li>Reorganized the functions in <code>SegmentLoader</code> to better follow the flow of execution from top-down</li>
          <li>Removed ad-hoc logging in favor of a config-enabled logging like playback-watcher</li>
          <li>isLowestEnabledRendition worked with redundant streams</li>
          <li>Renamed Worker to DecrypterWorker</li>
        </ul>

        <h4>9 Feb 2017</h4>
        <p>v5.2.1</p>
        <ul>
          <li>Support for Akamai-style Redundant HLS
          <ul>
            <li>Stable sorting and always pick primary first</li>
          </ul></li>
          <li>Fixed routing of decrypter messages intended for audio segment loader</li>
        </ul>

        <h4>8 Feb 2017</h4>
        <p>v5.2.0</p>
        <ul>
          <li>Updated dependencies for 4.3.0 <code>mediasources</code></li>
          <li>Removed HLS object events from README</li>
        </ul>

        <h4>3 Feb 2017</h4>
        <p>v5.1.1</p>
        <ul>
          <li>Introduced Video.js 6 forward compatibility while maintaining backward compatibilty
            <ul>
              <li>Swap to use getTech and null-check Flash tech</li>
              <li>Only <code>registerComponent</code> HLS in older Video.js</li>
              <li>Use <code>registerPlugin</code> if it exists</li>
              <li><code>addTrack</code> cross compatibility</li>
            </ul>
          </li>
          <li>Added events for underflow and live resync
            <ul>
              <li>For QoS measurement purposes, it may be useful to know how often the playback watcher is activating. Add new events for when the player falls off the back of the live window or stalls due to a video buffer gap.</li>
            </ul>
          </li>
        </ul>

        <h4>31 Jan 2017</h4>
        <p>v5.1.0</p>
        <ul>
          <li>Updated <strong>videojs-contrib-media-sources</strong> to v4.2.0
            <ul>
              <li>Added support for inserting silence when appending a new segment will introduce a gap in the audio SourceBuffer</li>
            </ul>
          </li>
          <li>Remove <strong>hls-audio-track.js</strong> as this file was no longer being used</li>
          <li>Stop blacklisting audio codecs as there is now wide support for switching between audio codecs on-the-fly among all modern browsers</li>
          <li>Fix <code>qualityLevels</code> setup for videos with a source element</li>
          <li>Error early for misconfigured <code>overrideNative</code></li>
        </ul>

        <h4>25 Jan 2017</h4>
        <p>v5.0.0</p>
        <ul>
          <li>Updated issue template to use unpkg for latest versions</li>
          <li>Used a snapshot of the issue template JSBin to protect from changes by owner</li>
          <li>Fixed any possible <code>fillBuffer_</code> race conditions by debouncing all <code>fillBuffers_</code>
            <ul>
              <li>Converted all calls to <code>fillBuffer_</code> to calls to <code>monitorBuffer_</code></li>
              <li>Renamed <code>monitorBuffer_</code> to <code>monitorBufferTick_</code> which becomes the 500ms buffer check timer loop</li>
              <li>Made <code>monitorBuffer_</code> schedule an immediate timer for <code>monitorBufferTick_</code></li>
            </ul>
          </li>
          <li>Made it possible for processing segment reachable even after playlist update removes it
            <ul>
              <li>Changed processing segment reference on playlist refresh</li>
              <li>Tested for correct segment references on pending segments</li>
              <li>Fixed unreachable segment tests after rebase on async monitor buffer change</li>
              <li>Updated media index on playlist refreshes for all requests (including syncs)</li>
            </ul>
          </li>
          <li>Made progress events bubble
            <ul>
              <li>If the segment request triggers progress events (that is, XHR2 is supported), bubble those up to the tech. This makes it clearer that buffering is happening even on very slow connections.</li>
            </ul>
          </li>
          <li>Running decryption in a webworker no longer supported for IE10</li>
          <li>Fixed <code>mediaIndex</code> tracking so that it is consistent when the playlist updates during a live stream
            <ul>
              <li>Fixed <code>mediaIndex</code> tracking so that it is consistent when the playlist updates during a live stream</li>
              <li>Removed any code in <code>SegmentLoader#handleUpdateEnd_</code> that changed the <code>mediaIndex</code></li>
              <li>Reordered <code>SegmentLoader#playlist</code> to make it easier to follow</li>
              <li>All changes to both <code>mediaIndexes</code> (SegmentLoader&#39;s and segmentInfo&#39;s) now happen in <code>SegmentLoader#playlist</code></li>
              <li>Added tests for proper <code>mediaIndex</code> tracking with live playlists</li>
            </ul>
          </li>
        </ul>

        <h4>20 Jan 2017</h4>
        <p>v4.1.1</p>
        <ul>
          <li>Fixed the m3u8-parser to support ES3</li>
        </ul>

        <h4>13 Jan 2017</h4>
        <p>v4.1.0</p>
        <ul>
          <li>Updated <strong>m3u8-parser</strong> to 2.0.0 and <strong>videojs-contrib-media-sources</strong> to 4.1.4</li>
          <li>Added <a href="https://github.com/videojs/videojs-contrib-hls/pull/929">Representations and Quality Levels</a></li>
        </ul>

        <h4>23 Dec 2016</h4>
        <p>v4.0.3</p>
        <ul>
          <li>Fix a segment hop in live</li>
          <li>Map legacy AVC codecs to their modern equivalents when excluding incompatible playlists</li>
          <li>Update <strong>video.js</strong> to 5.15.1</li>
        </ul>

        <h4>29 Nov 2016</h4>
        <p>v4.0.2</p>
        <ul>
          <li>Fixed excessive segment loads on seeks
            <ul>
              <li>Fixed a few cases where seeking caused the player to load too many segments</li>
            </ul>
          </li>
        </ul>

        <h4>23 Nov 2016</h4>
        <p>v4.0.1</p>
        <ul>
          <li>Reverted <strong>Upgrade aes-decrypter</strong> to use webcrypto for HLSe decryption where available
            <ul>
              <li>WebCrypto's subtle-crypto was failing to decrypt segments that worked previously with the JavaScript-only implementation</li>
            </ul>
          </li>
        </ul>

        <h4>21 Nov 2016</h4>
        <p>v4.0.0</p>
        <ul>
          <li>Simplified the algorithm at the heart of SegmentLoader as much as possible
            <ul>
              <li>Introduced the concept of sync-points to help associate currentTime with segments across variants</li>
              <li>More information available at: <a href="https://www.brightcove.com/en/blog/2016/10/improving-hls-playback">https://www.brightcove.com/en/blog/2016/10/improving-hls-playback</a></li>
            </ul>
          </li>
          <li>Updated <strong>videojs-contrib-media-sources</strong> to 4.1.2
            <ul>
              <li>Started using remote TextTracks because they can be properly removed</li>
              <li>Handled remove cues from track properly if cues is null</li>
            </ul>
          </li>
          <li>Updated <strong>mux.js</strong> to 3.0.3
            <ul>
              <li>Stopped applying the compositionTimestamp of the first frame to the baseMediaDecodeTime for the fragment</li>
              <li>Fixed coalesce stream to account for missing audio data in pending tracks</li>
            </ul>
          </li>
        </ul>

        <h4>17 Nov 2016</h4>
        <p>v3.6.13</p>
        <ul>
          <li>Added the concept of systemBandwidth - a measure of the bandwidth (in mb/s) of the entire system from download through transmuxing and appending data to a flash or native media source
            <ul>
              <li>Adaptive bitrate selection is now based on the performance of the entire system</li>
            </ul>
          </li>
        </ul>

        <h4>14 Nov 2016</h4>
        <p>v3.6.12</p>
        <ul>
          <li>Changed <code>resolveUrl</code> to use JavaScript only</li>
        </ul>

        <h4>11 Nov 2016</h4>
        <p>v3.6.11</p>
        <ul>
          <li>Updated the reloadSourceOnErrors plugin: Don't try to set the source if <code>getSource</code> returns <code>undefined</code> or <code>null</code></li>
          <li><strong>resolve-url.js</strong> now uses an iframe to contain the base and anchor elements used to resolve relative urls</li>
        </ul>

        <h4>10 Nov 2016</h4>
        <p>v3.6.10</p>
        <ul>
          <li>Updated the reloadSourceOnErrors plugin
            <ul>
              <li>Option to pass a getSource function that can be used to provide a new source to load on error</li>
              <li>Added the ability to override the default minimum time between errors in seconds</li>
              <li>Plugin now cleans up event bindings when initialized multiple times</li>
            </ul>
          </li>
          <li>Fixed <code>trimBuffer</code> to compare correct segments and correctly trim in the live case</li>
        </ul>

        <h4>9 Nov 2016</h4>
        <p>v3.6.9</p>
        <ul>
          <li>Added a plugin that can be used to automatically reload a source if an error occurs</li>
          <li>Fixed an error when checking if the lowest quality level is currently in use</li>
        </ul>

        <h4>9 Nov 2016</h4>
        <p>v3.6.8</p>
        <ul>
          <li>Enhanced gap skipper to seek back into the live window if playback slips out of it;  renamed <strong>GapSkipper</strong> to <strong>PlaybackWatcher</strong></li>
        </ul>

        <h4>3 Nov 2016</h4>
        <p>v3.6.7</p>
        <ul>
          <li>Updated <strong>videojs-contrib-media-sources</strong> to 4.0.5
            <ul>
              <li>Fixed an issue with ID3 and 608 cue translation</li>
            </ul>
          </li>
        </ul>

        <h4>21 Oct 2016</h4>
        <p>v3.6.6</p>
        <ul>
          <li>Use <code>setTimeout</code> in gap skipper instead of relying on <code>timeupdate</code> events</li>
          <li>Updated <strong>videojs-contrib-media-sources</strong> to 4.0.4
            <ul>
              <li>Append init segment to video buffer for every segment</li>
            </ul>
          </li>
        </ul>

        <h4>18 Oct 2016</h4>
        <p>v3.6.4</p>
        <ul>
          <li>
            Fix 'ended' event not firing after replay
          </li>
          <li>Updated videojs-contrib-media-sources to 4.0.2
          <ul>
            <li>
              Only trim FLV tags when seeking to prevent triming I frames
            </li>
            <li>
              Updated Mux.js to 3.0.2
              <ul>
                <li>
                  Set h264Frame to null after we finish the frame
                </li>
              </ul>
            </li>
          </ul></li>
        </ul>

        <h4>18 Oct 2016</h4>
        <p>v3.6.3</p>
        <ul>
          <li>Update videojs-contrib-media-sources to 4.0.1
          <ul>
            <li>
              Fix flash fallback
            </li>
          </ul></li>
        </ul>

        <h4>17 Oct 2016</h4>
        <p>v3.6.2</p>
        <ul>
          <li>Update videojs-contrib-media-sources to 4.0.0
          <ul>
            <li>
              Append init segment data on audio track changes
            </li>
            <li>
              Normalize ID3 behavior to follow Safari's implementation
            </li>
          </ul></li>
        </ul>

        <h4>14 Oct 2016</h4>
        <p>v3.6.1</p>
        <ul>
          <li>Allow for initial bandwidth option of 0</li>
          <li>Added support for MAAT in Firefox 49</li>
          <li>Corrected deprecation warning for <strong>player.hls</strong></li>
        </ul>

        <h4>27 Sep 2016</h4>
        <p>v3.6.0</p>
        <ul>
          <li>Updated Mux.js to 2.5.0
            <ul>
              <li>Added support for generating version 1 TFDT boxes</li>
              <li>Added TS inspector</li>
            </ul>
          </li>
          <li>Added bundle-collapser to create smaller dist files</li>
          <li>Added fMP4 support</li>
          <li>Fixed a bug that resulted in us loading the first segment on a live stream</li>
        </ul>

        <h4>24 Aug 2016</h4>
        <p>v3.5.3</p>
        <ul>
          <li>Updated videojs-contrib-mediasources to 3.1.5
            <ul>
              <li>Updated Mux.js to 2.4.2
                <ul>
                  <li>Fixed caption-packet sorting to be stable on Chromium</li>
                </ul>
              </li>
            </ul>
          </li>
        </ul>

        <h4>17 Aug 2016</h4>
        <p>v3.5.2</p>
        <ul>
          <li>Changes to the underflow-detection in the gap-skipper to remove restrictions on the size of the gaps it is able to skip</li>
        </ul>

        <h4>16 Aug 2016</h4>
        <p>v3.5.1</p>
        <ul>
          <li>Fixes an issue where playback can stall when going in/out of fullscreen</li>
        </ul>

        <h4>15 Aug 2016</h4>
        <p>v3.5.0</p>
        <ul>
          <li>Updated support for <code>#ext-x-cue-out</code>, <code>#ext-x-cue-in</code>, and <code>#ext-x-cue-out-cont</code> to create a single cue spanning the range of time covered by the ad break</li>
          <li>Updated to videojs-media-sources 3.1.4 to increase the values of the <code>FlashConstants</code> to push more data into flash per chunk-interval</li>
        </ul>

        <h4>29 Jul 2016</h4>
        <p>v3.4.0</p>
        <ul>
          <li>Added support for <code>#ext-x-cue-out</code>, <code>#ext-x-cue-in</code>, and <code>#ext-x-cue-out-cont</code> via a special TextTrack</li>
          <li>Added the ability to skip gaps caused by video underflow behavior in Chrome</li>
        </ul>

        <h4>25 Jul 2016</h4>
        <p>v3.3.0</p>
        <ul>
          <li>No longer timeout segment requests if there is only one playlist left or if we are on the lowest rendition available</li>
          <li>Fixed a bug where sometimes the first segment was not fetched when it should have been</li>
        </ul>

        <h4>15 Jul 2016</h4>
        <p>v3.2.0</p>
        <ul>
          <li>Added an algorithm to seek over gaps in the video element's buffer when they are created because of missing video or audio frames</li>
          <li>Moved the AES decryption logic to it's own project</li>
        </ul>

        <h4>9 Jun 2016</h4>
        <p>v3.1.0</p>
        <ul>
          <li>Added manual rendition selection API via the <code>representations()</code> function on each instance of the <code>HlsHandler</code> class</li>
          <li>Pulled out and moved m3u8 parsing functionality into it's own project at https://github.com/videojs/m3u8-parser</li>
        </ul>

        <h4>2 Jun 2016</h4>
        <p>v3.0.5</p>
        <ul>
          <li>Fixed a bug where the adaptive bitrate selection algorithm would not switch to media playlists that had already been fetched from the server previously</li>
        </ul>

        <h4>31 May 2016</h4>
        <p>v3.0.4</p>
        <ul>
          <li>Added support for multiple alternate audio tracks</li>
          <li>New class SegmentLoader contains all buffer maintenence and segment fetching logic</li>
          <li>New class SourceUpdater tracks the state of asynchronous operations on a SourceBuffer and queues operations for future execution if the SoureBuffer is busy</li>
          <li>New class MasterPlaylistController now encapsulates operations on the master playlist and coordinates media playlists and segment loaders</li>
          <li>Bug fixes related to fetching and buffer maintenance</li>
        </ul>

        <h4>11 Mar 2016</h4>
        <p>v2.0.1</p>
        <ul>
          <li>First release of the ES6 version of the SourceHandler</li>
          <li>All new lint/build/test setup via the <a href="https://github.com/videojs/generator-videojs-plugin">generator-videojs-plugin</a> project</li>
        </ul>
        <h4>4 Mar 2016</h4>
        <p id="toc_1">v1.13.1</p>
        <ul>
          <li>Converted from a Tech to a SourceHandler for Video.js 5.x compatibility</li>
          <li>Implemented a Media Source Extensions-based playback engine with a Flash-based fallback</li>
          <li>Rewrote the Transmuxer and moved it into it&#39;s own project <a href="https://github.com/videojs/mux.js">mux.js</a>
          </li>
          <li>Added support for 608/708 captions</li>
        </ul>
        <h4>29 Jul 2015</h4>
        <p id="toc_2">v0.17.6</p>
        <ul>
          <li>autoplay at the live point. fix live id3 cue insertion. (<a href="https://github.com/videojs/videojs-contrib-hls/pull/353">view</a>)</li>
        </ul>
        <h4>14 Jul 2015</h4>
        <p id="toc_3">v0.17.5</p>
        <ul>
          <li>do not assume media sequence starts at zero (<a href="https://github.com/videojs/videojs-contrib-hls/pull/346">view</a>)</li>
          <li>fix error with audio- or video-only streams (<a href="https://github.com/videojs/videojs-contrib-hls/pull/348">view</a>)</li>
        </ul>
        <h4>12 Jul 2015</h4>
        <p id="toc_4">v0.17.4</p>
        <ul>
          <li>Fix seeks between segments. Improve duration calculation. (<a href="https://github.com/videojs/videojs-contrib-hls/pull/339">view</a>)</li>
        </ul>
        <h4>29 Jun 2015</h4>
        <p id="toc_5">v0.17.3</p>
        <ul>
          <li>Improved video duration calculation. (<a href="https://github.com/videojs/videojs-contrib-hls/pull/321">view</a>)</li>
          <li>Clamp seeks to the seekable range (<a href="https://github.com/videojs/videojs-contrib-hls/pull/327">view</a>)</li>
          <li>Use getComputedStyle for player dimensions when filtering variants (<a href="https://github.com/videojs/videojs-contrib-hls/pull/326">view</a>)</li>
          <li>Add a functional test that runs in SauceLabs (<a href="https://github.com/videojs/videojs-contrib-hls/pull/323">view</a>)</li>
        </ul>
        <h4>15 Jun 2015</h4>
        <p id="toc_6">v0.17.2</p>
        <ul>
          <li>Fix seeking in live streams (<a href="https://github.com/videojs/videojs-contrib-hls/pull/308">view</a>)</li>
        </ul>
        <h4>8 Jun 2015</h4>
        <p id="toc_7">v0.17.1</p>
        <ul>
          <li>Do not preload live videos (<a href="https://github.com/videojs/videojs-contrib-hls/pull/299">view</a>)</li>
        </ul>
        <h4>5 Jun 2015</h4>
        <p id="toc_8">v0.17.0</p>
        <ul>
          <li>Implement seekable for live streams. Fix in-band metadata timing for live streams. (<a href="https://github.com/videojs/videojs-contrib-hls/pull/295">view</a>)</li>
        </ul>
        <h4>29 May 2015</h4>
        <p id="toc_9">v0.16.1</p>
        <ul>
          <li>Do not unnecessarily reset to the live point when refreshing playlists. Clean up playlist loader timeouts. (<a href="https://github.com/videojs/videojs-contrib-hls/pull/274">view</a>)</li>
          <li>Ensure segments without an initial IDR are not displayed in 4:3 initially (<a href="https://github.com/videojs/videojs-contrib-hls/pull/272">view</a>)</li>
          <li>Wait for an SPS to inject metadata tags. (<a href="https://github.com/videojs/videojs-contrib-hls/pull/280">view</a>)</li>
          <li>Trim whitespace in playlist. (<a href="https://github.com/videojs/videojs-contrib-hls/pull/282">view</a>)</li>
          <li>Allow playback of TS files with NITs. Don&#x27;t warn about PCR PIDs. (<a href="https://github.com/videojs/videojs-contrib-hls/pull/284">view</a>)</li>
          <li>Quicker quality switches when bandwidth changes. (<a href="https://github.com/videojs/videojs-contrib-hls/pull/285">view</a>)</li>
          <li>Fix temporary warped display after seeking. (<a href="https://github.com/videojs/videojs-contrib-hls/pull/290">view</a>)</li>
        </ul>

        <h4 id="toc_10">v0.16.0</h4>
        <ul>
          <li>support preload=none</li>
        </ul>
        <h4 id="toc_11">v0.15.0</h4>
        <ul>
          <li>expose all ID3 frames and handle tags larger than 188 bytes</li>
        </ul>
        <h4 id="toc_12">v0.14.0</h4>
        <ul>
          <li>performance improvements for HLSe</li>
        </ul>
        <h4 id="toc_13">v0.13.0</h4>
        <ul>
          <li>Improved audio/video synchronization</li>
          <li>Fixes for live, HLSe, and discontinuities</li>
          <li>Rename internal methods to clarify their intended visibility</li>
        </ul>
        <h4 id="toc_14">v0.12.0</h4>
        <ul>
          <li>support for custom IVs with AES-128 encryption</li>
        </ul>
        <h4 id="toc_15">v0.11.0</h4>
        <ul>
          <li>embedded ID3 tags are exposed as an in-band metadata track</li>
        </ul>
        <h4 id="toc_16">v0.10.0</h4>
        <ul>
          <li>optimistic initial bitrate selection</li>
        </ul>
        <h4 id="toc_17">v0.9.0</h4>
        <ul>
          <li>support segment level AES-128 encryption</li>
        </ul>
        <h4 id="toc_18">v0.8.0</h4>
        <ul>
          <li>support for EXT-X-DISCONTINUITY</li>
        </ul>
        <h4 id="toc_19">v0.7.0</h4>
        <ul>
          <li>convert the HLS plugin to a tech</li>
        </ul>
        <h4 id="toc_20">v0.6.0</h4>
        <ul>
          <li>Refactor playlist loading</li>
          <li>Add testing via karma</li>
        </ul>
        <h4 id="toc_21">v0.5.0</h4>
        <ul>
          <li>cookie-based content protection support (see <code>withCredentials</code>)</li>
        </ul>
        <h4 id="toc_22">v0.4.0</h4>
        <ul>
          <li>Live stream support</li>
        </ul>
        <h4 id="toc_23">v0.3.0</h4>
        <ul>
          <li>Performance fixes for high-bitrate streams</li>
        </ul>
        <h4 id="toc_24">v0.2.0</h4>
        <ul>
          <li>Basic playback and adaptive bitrate selection</li>
        </ul>
        <h4 id="toc_25">v0.1.0</h4>
        <ul>
          <li>Initial release</li>
        </ul>
      </section>
    </article>
    <!-- end drupal content -->
      <div class="bcls-section" id="BCLreferences">
          <h2>Related Topics</h2>
          <ul>
              <li><a href="//www.html5rocks.com/en/tutorials/track/basics/">Getting Started With the Track Element</a>
              </li>
              <li><a href="ima-plugin.html">New Player Plugin: IMA</a>
              </li>
              <li><a href="../../brightcove-player/guides/plugin-dev-quick-start.html">Quick Start to Plugin Development</a>
              </li>
              <li><a href="../../player-management/getting-started/player-mgmt-quick-start.html">Quick Start to Player Management</a>
              </li>
          </ul>
      </div>
    </div>
  </div>

  <!-- bcl scripts -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/2.4/gist-embed.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js"></script>
  <script src="/en/scripts/docs-nav-data.min.js"></script>
  <script src="/en/scripts/bcls-doc-site-v2.js"></script>
  <script src="//learning-services-media.brightcove.com/doc-assets/js/bcls-utils.js"></script>
  <script src="//learning-services-media.brightcove.com/doc-assets/js/prism/prism.js"></script>
  <script>
      $(document).foundation();
  </script>

    <div style="text-align:center">
    <iframe id="CSAT" src="//learning-services-media.brightcove.com/doc-assets/general/surveylink.html" style=" padding-bottom:20px;border:none"></iframe>
</div>
<br><br>
<div class="bcls-footer"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a></div>
<script>
var feedbackMail = document.getElementById("feedbackMail");
feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
</script>
</body>

</html>

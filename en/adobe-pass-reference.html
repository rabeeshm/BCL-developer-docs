<!DOCTYPE html>
<html lang="en">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
	<!-- change title to match the h1 heading -->
	<title></title>
	<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" />
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/normalize.css" />
	<script src="//use.edgefonts.net/source-code-pro.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/atelier-forest.light.min.css" />
    <link rel="stylesheet" type="text/css" href="/en/styles/bcls-doc-site.css" />
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2728311-29', 'auto');
  ga('send', 'pageview');

</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>
</head>

<body>
	<!-- header navbar -->
	<div id="navWrapper" class="fixed"></div>
	<!-- breadcrumbs -->
	<nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
	<!-- search -->
	<div id="searchModal" class="reveal-modal" data-reveal></div>
	<!-- content -->
	<!-- content -->
	<div class="row">
		<div class="sidebar large-2 columns show-for-large-up">
			<div id="sidenav" class="side-nav"></div>
		</div>
		<div id="main" class="large-10 small-12 columns">
			<div id="top" class="section">
				<h1></h1>
				<!-- Place document intro sentence(s) here -->
				<p></p>
              <img alt="" src="http://img.brightcove.com/adobe-pass.png" />

		  </div>
			<div id="usage" class="section">
				<h2>Usage</h2>
				<ol>
				  <li>Instantiate the bc.auth.ap.Loader(profile, debugEnabled).<br/>
                  <pre>var loader = new bc.auth.ap.Loader(profile, debugEnabled);
profile:String – The Adobe Pass profile (bc.auth.ap.Loader.STAGING or bc.auth.ap.Loader.PRODUCTION)
debugEnabled:Boolean – If true loads the Adobe Pass with debugging enabled
                  </pre></li>
                  <li>Instantiate the bc.auth.ap.API() – Assign to a accessible variable.<br/>
                  <pre>_that.authAPI = new bc.auth.ap.API();</pre></li>
                  <li>Initiate the loading of the AccessEnabler: Invoke the load(callbackDelegate) on the Loader.<br/>
                  <pre>loader.load({
    ready: function(accessEnabler) {
        //Library loaded and ready to use
        //accessEnabler:Object – The AccessEnabler instance

        //This is a good place to initiate the API (see below)
        //and to hide any loading progress UI
    },
    loaded: function() {
        //Library loaded, but not ready to use just yet
    },
    error: function(loadError) {
        //Error loading the library
        //loadError:bc.auth.model.AuthError – The Error object

        //The error callback could also be
        //an instance of bc.example.ErrorHandler, such as:
        //error: new bc.example.ErrorHandler();
    }
});
</pre></li>
<li>Initiate the API: Invoke the init(accessEnabler, callbackDelegate) on the API accessEnabler – This is the accessEnabler instance returned by the Loader ready callback above.<br/>
<pre>_that.authAPI.init(accessEnabler, {
    apiReady: function(providers) {
        //The API is initiated and ready to use
        //providers:bc.auth.model.Provider[] – All available providers

        //This is a good place to show/enable some controls or wrappers
    },
    authenticated: function(provider) {
        //The user is authenticated with the returned provider
        //provider:bc.auth.model.Provider – Authenticated provider

        //This is a good place to hide/disable the sign-in button and
        //show/enable the sign-out button
        //It’s also a good place to update the UI with the provider logo,
        //and display protected video items as unlocked
    },
    notAuthenticated: function(errorMsg) {
        //The user is not authenticated

        //This is a good place to hide/disable the sign-out button and
        //show/enable the sign-in button
        //It’s also a good place to update the UI and remove any provider info
        //such as logo, and to display protected video items as locked
    },
    displayProviders: function(providers) {
        //The user needs to select what provider to authenticate with
        //providers:bc.auth.model.Provider[] – All available providers

        //Render your Provider Selector
        //Make sure to use a custom provider whitelist and only
        //display the providers from that whitelist
        //Capture and action the selected provider (more about this below)
    },
    renderIframe: function(provider, iframeId, width, height) {
        //The selected provider wants to load its login screen in an iframe
        //provider:bc.auth.model.Provider – The selected provider
        //iframeId:String – The id/name the Iframe must have
        //width:int - The required width of the Iframe
        //height:int – The required height of the Iframe

        //Render the Iframe “popup”
    },
    removeIframe: function(iframeId) {
        //The authentication is completed and the Iframe can now be destroyed
        //iframeId:String – The id of the Iframe to remove and destroy
    },
    authorized: function(requestorId, requestedResourceId, token) {
        //The user is authorized to view the selected video
        //requestorId:String – The requestorId
        //requestedResourceId:String – The authorized resourceId
        //token:String – The Adobe Pass Short Media Token

        //Informational, there is another authorized callback
        //as part of the authorize(callbackDelegate) call
    },
    notAuthorized: function(requestedResourceId, errorCode, errorDetails) {
        //The user is not authorized to view the selected video
        //requestedResourceId:String – The non-authorized resourceId
        //errorCode:String – The error code
        //errorDetails:String – The errorDetails (sometimes empty)

        //Informational, there is another notAuthorized callback
        //as part of the authorize(callbackDelegate) call
    },
    error: function(authError) {
        //Something went wrong
        //authError:bc.auth.model.AuthError – The Error object

        //The error callback could also be
        //an instance of bc.example.ErrorHandler, such as:
        //error: new bc.example.ErrorHandler();
    }
});
</pre></li>
<li>Setup click handlers for the Sign In/Out buttons.</li>
<li>User clicks the Sign In button: Invoke the startAuthentication([callbackDelegate]) on the API, which will then trigger the displayProviders(providers) callbacks (Optional: Manipulate the UI, like disable/hide the Sign In button).<br/>
<pre>_that.authAPI({
    authenticated: function(provider) {
        //The user is authenticated with the returned provider
        //provider:bc.auth.model.Provider – Authenticated provider
    },
    notAuthenticated: function(errorMsg) {
        //The user is not authenticated
    },
    displayProviders: function(providers) {
        //The user needs to select what provider to authenticate with
        //providers:bc.auth.model.Provider[] – All available providers
    },
    renderIframe: function(provider, iframeId, width, height) {
        //The selected provider wants to load its login screen in an iframe
        //provider:bc.auth.model.Provider – The selected provider
        //iframeId:String – The id/name the Iframe must have
        //width:int - The required width of the Iframe
        //height:int – The required height of the Iframe
    },
    removeIframe: function(iframeId) {
        //The authentication is completed and the Iframe can now be destroyed
        //iframeId:String – The id of the Iframe to remove and destroy
    },
    error: function(authError) {
        //Something went wrong
        //authError:bc.auth.model.AuthError – The Error object

        //The error callback could also be
        //an instance of bc.example.ErrorHandler, such as:
        //error: new bc.example.ErrorHandler();
    }
});
</pre></li>
<li>The Provider Selector is displayed and the User selects a Provider: Invoke the setSelectedProvider(provider) on the API, which will then trigger either a new window/tab to open or the renderIframe callback to be invoked in which the provider’s login page will then be loaded.</li>
<li>The Provider Selector is displayed and the User cancels without selecting: Invoke the setSelectedProvider (null) on the API.</li>
<li>User clicks on a protected video item: Invoke the authorize(resourceId, callbackDelegate) on the API.<br/>
<pre>_that.authAPI(videoItem.resourceId, {
    authorized: function(requestorId, requestedResourceId, token) {
        //The user is authorized to view the selected video
        //requestorId:String – The requestorId
        //requestedResourceId:String – The authorized resourceId
        //token:String – The Adobe Pass Short Media Token

        //Validate the token, retrieve the video renditions and play the video
    },
    notAuthorized: function(requestedResourceId, errorCode, errorDetails) {
        //The user is not authorized to view the selected video
        //requestedResourceId:String – The non-authorized resourceId
        //errorCode:String – The error code
        //errorDetails:String – The errorDetails (sometimes empty)

        //Alert the user that they were not authorized to view the video
        //as part of the authorize(callbackDelegate) call
    },
    error: function(authError) {
        //Something went wrong
        //authError:bc.auth.model.AuthError – The Error object

        //The error callback could also be
        //an instance of bc.example.ErrorHandler, such as:
        //error: new bc.example.ErrorHandler();
    }
});
</pre></li>
<li>User clicks the Sign Out button: Invoke the logout() on the API, which will then trigger the notAuthenticated(errorMsg) callback.</li>
              </ol>
			</div>
			<div id="authadobepass" class="section">
				<h2>Components<br>
			    Authentication: Adobe Pass</h2>
				<h3>bc.auth.ap.Loader</h3>
				<p>This class is responsible for loading the AccessEnabler (a.k.a. Adobe Pass library). The AccessEnabler comes in two different flavors, AccessEnabler.swf and AccessEnabler.js, where the former should always be attempted to be loaded first as it provides better security and flexibility, whereas the latter should only be used as a fallback option.</p>
				<p>The Loader will mange all aspects of loading the AccessEnabler, including graceful fallback from AccessEnabler.swf to AccessEnabler.js as well as dynamically inject the SWFObject library if required.</p>
				<p>Flow:</p>
				<ul>
				  <li><strong>load(callbackDelegate)</strong>: Starts the loading process of the AccessEnabler.<br>
			      callbackDelegate: { loaded: Function(), ready: Function(accessEnabler), error: Object }<br/>
                  <ol>
                  	<li>loadNext() gets invoked, and attempts to load the first libType defined in the TYPES array (normally SWF), passing _internalDelegate.loaded as the successCallback and itself as the failCallback<br/>
                    <p class="BCL-aside">Note: the failCallback also accumulates any error that’s returned.</p></li>
                    <li>internalLoader.SWF(successCallback, failCallback) gets invoked<br/>
                    <ul>
                    	<li>2.1 Starts off by ensuring that the SWFObject is loaded and dynamically injects the SWFObject if it’s not.</li>
                    	<li>2.2 Inject AccessEnabler.swf</li>
                    	<li>2.3 If successful <strong>AND</strong> Flash is blocked, applies a workaround for Flash blocking by blowing up the size on the loaded AccessEnabler.swf container to enable the blocking message and required action to become visible to the user</li>
                    	<li>2.4 If successful<br/>
                        	<ul>
                            	<li>Invokes the successCallback function, which will then invoke the loaded callback method</li>
                            	<li>Waits for the AccessEnabler global callback <strong>swfLoaded</strong> (which if Flash was not blocked will almost happen instantly)</li>
                            	<li><strong>swfLoaded</strong> callback gets invoked<br/>
                                	<ul>
                                    	<li>Hides AccessEnabler.swf container again (which was used for the Flash blocking workaround in 2.3)</li>
                                    	<li>Disables the Adobe Pass default MVPD picker (only applies to SWF)</li>
                                    	<li>Invokes the ready callback method and passes along the accessEnabler instance</li>
                                    </ul>
                                </li>
                            </ul>
                        </li>
                    	<li>2.5 If not successful<br>
Invokes the failCallback which will re-invoke the loadNext method with an updated index, which will then attempt to load the next libType from the TYPES array (normally JS), passing _internalDelegate.loaded as the successCallback and itself as the failCallback<br/>
	<ul>
    	<li>	_internalLoader.JS(successCallback, failCallback) gets invoked<br/>
        	<ul>
            	<li>Inject AccessEnabler.js</li>
            	<li>If successful<br/>
                	<ul>
                    	<li>Invokes the successCallback function, which will then invoke the loaded callback method</li>
                    	<li>Waits for the AccessEnabler global callback <strong>entitlementLoaded</strong></li>
                    	<li><strong>entitlementLoaded</strong> callback gets invoked Invokes the ready callback method and passes along the accessEnabler instance</li>
                    </ul>
                </li>
            	<li>If not successful<br>
            	  Invokes the failCallback which will re-invoke the loadNext method with an updated index, which will then be out of bounds for the TYPES array and trigger a call to the error callback method            	</li>
            </ul>
        </li>
    </ul>
</li>
                    </ul>
                    </li>
                  </ol>
                  </li>
				  <li><strong>getAccessEnabler()</strong>: Returns the AccessEnabler instance</li>
				  <li><strong>getAccessEnablerId()</strong>: Returns the AccessEnabler DOM Id (only applies for SWF)</li>
	          </ul>
				<h3>bc.auth.ap.API</h3>
			  <p>This is an abstraction layer for the AccessEnabler. It will also handle the multi-step initiation internally, parse the config XML and providers, manages the AccessEnabler callbacks and re-fires callback methods on the appropriate callbackDelegate (see Usage for details about the callbacks).</p>
				<ul>
				  <li><strong>init(accessEnabler, callbackDelegate)</strong>: Initiates the API<br>
accessEnable: The AccessEnabler instance<br>
callbackDelegate: See Usage<br/>
					<ol>
                    	<li>Defines the AccessEnabler callbacks.</li>
                    	<li> Assigns the accessEnabler to a local class variable.</li>
                    	<li> Binds the an error handler to the accessEnabler errorEvent.</li>
                    	<li> Invokes the accessEnabler.setRequestorId( REQUESTOR_ID, null, REQUESTOR_CONFIG).</li>
                    	<li> AccessEnabler Callback setConfig(configXML) gets triggered.<br/>
                        <ul>
                        	<li>Parse the configXML – Returns true if the current domain is valid to use for the specified REQUESTOR_ID, false otherwise<br/>
                            	<ul>
                                	<li>Extracts and serialize the associated providers into bc.auth.model.Provider[]</li>
                                	<li>Validates the current domain by comparing it to the whitelisted domains in the config</li>
                                </ul>
                            </li>
                        	<li>If domain is valid, then attempts to get the current/previous selected provider accessEnabler.getSelectedProvider</li>
                        </ul>
                        </li>
                    	<li>AccessEnabler Callback selectedProvider(provider) gets triggered.<br/>
                        	<ul>
                            	<li>Looks up the matching bc.auth.model.Provider from the _that.provider variable and store it into the _that.selectedProvider variable. </li>
                            	<li>_that.apiReady is false -&gt; Invokes the accessEnabler.checkAuthentication()</li>
                            </ul>
                        </li>
                    	<li>AccessEnabler Callback setAuthenticationStatus(isAuthenticated, errorCode) gets triggered<br/>
                        <ul>
                        	<li>Converts the argument isAuthenticated into a Boolean</li>
                        	<li> _that.apiReady is false -&gt; Triggers the API Callback apiReady(providers)</li>
                        	<li> Triggers the API Callback authenticationStatus(isAuthenticated, errorCode)</li>
                        	<li>If Authenticated: Triggers the API Callback authenticated(provider)</li>
                        	<li> If Not Authenticated: Triggers the API Callback notAuthenticated(errorCode)</li>
                        </ul>
                        </li>
                    </ol>
</li>
<li><strong>getSelectedProvider(): </strong><br/>
<ol>
	<li>Returns the currently selected provider, or invokes the accessEnabler.getSelectedProvider()</li>
</ol></li>
<li><strong>checkAuthentication([authNCallbackDelegate]):</strong><br/>
<ol>
	<li>Invokes the accessEnabler.checkAuthentication()</li>
	<li> AccessEnabler Callback setAuthenticationStatus(isAuthenticated, errorCode) gets triggered<br/>
    <ul>
    	<li>Converts the argument isAuthenticated into a Boolean</li>
    	<li> Triggers the API Callback authenticationStatus(isAuthenticated, errorCode)</li>
    	<li> If Authenticated: Triggers the API Callback authenticated(provider)</li>
    	<li> If Not Authenticated: Triggers the API Callback notAuthenticated(errorCode)</li>
    </ul>
	</li>
</ol>
</li>
<li><strong>startAuthentication([authNCallbackDelegate]):</strong><br>
  Starts the Authentication Flow<br>
  <ol>
  	<li>Invokes the accessEnabler.getAuthentication()</li>
  	<li>If Authenticated: AccessEnabler Callback setAuthenticationStatus(isAuthenticated, errorCode) gets triggered<br/>
    <ul>
    	<li>Converts the argument isAuthenticated into a Boolean</li>
    	<li> Triggers the API Callback authenticationStatus(isAuthenticated, errorCode)</li>
    	<li> If Authenticated: Triggers the API Callback authenticated(provider)</li>
    </ul>
  	</li>
  	<li>If Not Authenticated: AccessEnabler Callback displayProviderDialog(providers) gets triggered<br/>
    <ul>
    	<li>Serialize the providers into bc.auth.model.Provider[]</li>
    	<li> Triggers the API Callback displayProvider(serializedProviders)</li>
    	<li> User selects their provider – See setSelectedProvider below</li>
    </ul>
  	</li>
  </ol>
</li>
<li><strong>logout([authNCallbackDelegate]):</strong><br/>
<ol>
	<li>Invokes the accessEnabler.logout()</li>
	<li> AccessEnabler Callback setAuthenticationStatus(isAuthenticated, errorCode) gets triggered<br/>
    <ul>
    	<li>Converts the argument isAuthenticated into a Boolean</li>
    	<li> Triggers the API Callback authenticationStatus(isAuthenticated, errorCode)</li>
    	<li> If Not Authenticated: Triggers the API Callback notAuthenticated(errorCode)</li>
    </ul>
	</li>
</ol>
</li>
<li><strong>setSelectedProvider(provider): </strong><br/>
<ol>
	<li>Invokes the accessEnabler.setSelectedProvider(provider)</li>
	<li> Iframe Provider -&gt; AccessEnabler Callback createIFrame(width, height) gets triggered<br/>
    <ul>
    	<li>Triggers the API Callback renderIframe(selectedProvider, iframeId, width, height)</li>
    	<li> The Provider’s login page gets rendered into the Iframe</li>
    	<li> When authentication is complete -&gt; AccessEnabler Callback destroyIFrame() gets triggered<br/>
        <ul>
        	<li>	Triggers the API Callback removeIframe(iframeId)</li>
        </ul></li>
    </ul>
	</li>
	<li>Redirect Provider -&gt; New window/tab opens with the Provider’s login page</li>
	<li> AccessEnabler Callback setAuthenticationStatus(isAuthenticated, errorCode) gets triggered<br/>
    <ul>
    	<li>Converts the argument isAuthenticated into a Boolean</li>
    	<li> Triggers the API Callback authenticationStatus(isAuthenticated, errorCode)</li>
    	<li> If Authenticated: Triggers the API Callback authenticated(provider)</li>
    	<li> If Not Authenticated: Triggers the API Callback notAuthenticated(errorCode)</li>
    </ul>
	</li>
</ol>
</li>
<li><strong>authorize(resourceId, [authZCallbackDelegate]): </strong><br/>
<ol>
	<li>Invokes the accessEnabler.getAuthorization (resourceId)</li>
	<li> If Authorized -&gt; AccessEnabler Callback setToken(requestedResourceId, token) gets triggered<br/>
    <ul>
    	<li>If not Authenticated -&gt; Triggers the API Callback authenticated(selectedProvider)</li>
    	<li> Triggers the API Callback authorized(requestorId, resourceId, token)</li>
    </ul>
	</li>
	<li>If Not Authorized -&gt; AccessEnabler Callback tokenRequestFailed(requestedResourceId, errorCode, errorDetails) gets triggered<br/>
    <ul>
    	<li>Triggers the API Callback notAuthorized(requestedResourceId, errorCode, errorDetails)</li>
    </ul></li>
</ol>
</li>
              </ul>
              <h3>bc.auth.ap.ErrorMap</h3>
              <p>Defines the error codes that could be returned from Adobe Pass and adds additional info.</p>
              <p>When an error is triggered from the AccessEnabler, the errorCode will be extracted, which will then, together with this mapping, be used to create a bc.auth.model.AuthError object by using the bc.auth.model.AuthError.Factory, which will then be used for the error callback.</p>
			</div>
			<div id="authmodels" class="section">
			  <h2>Authentication: Models</h2>
			  <h3>bc.auth.model.Provider</h3>
			  <p>Defines the Provider with id, name and logo.</p>
			  <h3>bc.auth.model.AuthError</h3>
			  <p>Defines the AuthError with errorCode, errorMessage, errorDetails, isFatal and category.</p>
              <ul>
              	<li><strong>bc.auth.model.AuthError.Factory</strong><br>
           	    Static factory class for creating AuthError objects</li>
              </ul>
          </div>
			<div id="helpers" class="section">
			  <h2>Helpers</h2>
			  <h3>bc.helper.LoadHelper</h3>
			  <p>Static helper class to dynamically load and inject SWF and JS files. It also has convenience methods to dynamically load and inject JQuery, and SWFObject.</p>
	      </div>
			<div id="example" class="section">
			  <h2>Example</h2>
			  <h3>index.php</h3>
              <p>Markup for the landing page with a placeholder/wrapper for the Video Player. It also includes the playlistContainer.php.</p>
              <h3>playlistContainer.php</h3>
              <p>Builds the playlist container populated with video items. The data is generated by the getPlaylist.php.</p>
              <h3>getPlaylist.php</h3>
              <p>Generates MediaItem object for the playlistContainer.php.<br>
new MediaItem(MEDIA_ID, IS_PROTECTED, VIDEO_FILE, IMAGE_FILE_PREFIX, VIDEO_TITLE)</p>
              <h3>php/MediaItem.php</h3>
              <p>Defines the MediaItem, with videoId, video (url), thumbnail (url), poster (url), title, isProtected and resourceId.</p>
              <h3>bc.example.UIDelegate</h3>
              <p>Handles all the interaction and initiation – See Usage and Flow for details.</p>
              <h3>bc.example.ErrorHandler</h3>
              <p>Handles the error callbacks, by assigning an instance of the ErrorHandler to the error callback.</p>
              <code>error: new bc.example.ErrorHandler()</code>
              <h3>bc.example.ProviderSelectorDelegate</h3>
              <pre>
Example implementation of a Provider Selector to manage the UI rendering and interaction.
displayProviders: function(providers) {
    var providerSelectorDelegate = new bc.example.ProviderSelectorDelegate();
    providerSelectorDelegate.injectProviderSelector(providers, {
        selectedProvider: function(provider) {
            //The User selected a provider

            //Call the setSelectedProvider(provider) on the API
        },
        close: function() {
            //The User cancelled the Provider Selector

            //Call the setSelectedProvider(null) on the API to reset the API
        }
    });
}           </pre>
              <h3>bc.example.PlayerDelegate</h3>
              <p>Example implementation of a Player delegate to manage the UI rendering, authorization, token validation, getting video renditions and initiate playback.</p>
              <p> Instantiation is done in the init method of the UIDelegate.</p>
              <p> When the User selects/clicks a video, the UIDelegate is capturing the video metadata into a videoItem object. This videoItem is then passed into the PlayerDelegate.play method.</p>
              <p> See <a href="#9">Usage #9</a> for details.</p>
              <p> See getMedia.php (below) for details about the validation and getting video renditions.</p>
              <h3>getMedia.php</h3>
              <ol>
                <li>Extracts the requestorId, resourceId, shortMediaToken and mediaId from the request.</li>
                <li> Validates the token by using exec, verify shell script and Adobe’s MediaToken validator jar.</li>
                <li> Generates the Response item which will include the video renditions.</li>
                <li> Return the JSON response.		  </li>
              </ol>
		  </div>
			<div id="tokenvalidator" class="section">
			  <h2>Adobe Pass Media Token Validator</h2>
			  <h3>verifier-1.1.1511-production.jar</h3>
			  <p> Adobe Pass’ Media Token validator</p>
			  <h3>verify</h3>
			  <p> Shell script for invoking the Media Token validator and capturing the output</p>
          </div>
			<div id="flow" class="section">
			  <h2>Complete Happy Auth Flow</h2>
			  <ol>
			    <li>[UIDelegate] Initiate<br/>
                <ul>
                	<li>1.1 [UIDelegate] Instantiate bc.auth.ap.Loader</li>
                	<li> 1.2 [UIDelegate] Instantiate bc.auth.ap.API</li>
                	<li> 1.3 [PlayerDelegate] bc.example.PlayerDelegate<br/>
                    <ul>
                    	<li>[PlayerDelegate] Inject NextGen player CSS</li>
                    	<li> [PlayerDelegate] Renders Player element</li>
                    	<li> [PlayerDelegate] Inject NextGen player JS</li>
                    	<li> [PlayerDelegate] Instantiate player with videojs</li>
                    </ul>
                	</li>
                </ul>
			    </li>
			    <li>[UIDelegate] Invoke load on the bc.auth.ap.Loader instance passing along a callback delegate object<br/>
                <ul>
                	<li>2.1 [Loader] Assigns the callback delegate object to a local private variable</li>
                	<li> 2.2 [Loader] Attempts to load the first library type (SWF)<br/>
                    <ul>
                    	<li>[Loader] Ensures SWFObject is loaded, and if not goes ahead and loads it</li>
                    	<li> [Loader] Loads the SWF library</li>
                    	<li> [Loader] If successful calls the &lt;CALLBACK_DELEGATE&gt;.loaded and waits for the swfLoaded callback<br/>
                        <ul>
                        	<li>[Loader] swfLoaded callback gets invoked and &lt;CALLBACK_DELEGATE&gt;.ready is called, passing along the accessEnabler instance</li>
                        	<li> [Loader] Skip [2.3]</li>
                        </ul>
                    	</li>
                    	<li>[Loader] If unsuccessful, go to [2.3]</li>
                    </ul>
                	</li>
                	<li>2.3 [Loader] If [2.2] failed: Attempt to load the second library type (JS)
                	  <ul>
                	    <li>[Loader] Loads the JS library</li>
                	    <li>[Loader] If successful calls the &lt;CALLBACK_DELEGATE&gt;.loaded and waits for the entitlementLoaded callback
                	      <ul>
                	        <li>[Loader] The entitlementLoaded callback gets invoked and &lt;CALLBACK_DELEGATE&gt;.ready is called, passing along the accessEnabler instance</li>
              	        </ul>
                	    </li>
                	    <li>[Loader] If unsuccessful, calls the &lt;CALLBACK_DELEGATE&gt;.error</li>
              	      </ul>
                	</li>
               	  </ul>
			    </li>
			    <li>[UIDelegate] Callback ready(accessEnabler)		        </li>
			    <ul>
			      <li>3.1 [UIDelegate] Hide loading spinner		        </li>
		        </ul>
			    <li>[UIDelegate] Invoke init on the bc.auth.ap.API instance passing along the accessEnabler instance and a callback delegate object			    </li>
			    <ul>
			      <li>4.1.	[API] Assigns accessEnabler and callback delegate object to local private variables</li>
			      <li> 4.2.	[API] Calls the accessEnabler.setRequestor and waits for the setConfig callback</li>
			      <li> 4.3.	[API] setConfig callback gets invoked</li>
			      <li> 4.4.	[API] Parses the configXML and creates an array of bc.auth.model.Provider objects</li>
			      <li> 4.5.	[API] Calls the accessEnabler.setProvider to get (if any) the previously selected provider</li>
			      <li> 4.6.	[API] Checks that the apiReady flag has not been set and then invokes accessEnabler.checkAuthentication</li>
			      <li> 4.7.	[API] setAuthenticationStatus callback gets invoked</li>
		        </ul>
			    <li>[API] Checks that the apiReady flag has not been set and then &lt;CALLBACK_DELEGATE&gt;.apiReady is called			    </li>
			    <ul>
			      <li>5.1.	[API] &lt;CALLBACK_DELEGATE&gt;.authenticationStatus is called</li>
			      <li> 5.2.	[API] If Authenticated: &lt;CALLBACK_DELEGATE&gt;.authenticated is called passing along the current bc.auth.model.Provider object</li>
			      <li> 5.3.	[API] If NOT Authenticated: &lt;CALLBACK_DELEGATE&gt;.notAuthenticated is called</li>
		        </ul>
			    <li>[UIDelegate] AuthN Callbacks			    </li>
			    <ul>
			      <li>6.1.	[UIDelegate] Callback authenticated (provider)
			        <ul>
			          <li>[UIDelegate] Display current provider logo</li>
			          <li> [UIDelegate] Hide/Disable &lt;Sign In&gt; button</li>
			          <li> [UIDelegate] Show/Enable &lt;Sign Out&gt; button</li>
			          <li> [UIDelegate] Enable PlayerDelegate</li>
			          <li> [UIDelegate] Update the “Locked” icon to an “Unlocked” icon for each protected Video item</li>
		            </ul>
			      </li>
			      <li>6.2.	[UIDelegate] Callback notAuthenticated ()
			        <ul>
			          <li>[UIDelegate] Remove any provider logo</li>
			          <li> [UIDelegate] Hide/Disable &lt;Sign Out&gt; button</li>
			          <li> [UIDelegate] Show/Enable &lt;Sign In&gt; button</li>
			          <li> [UIDelegate] Disable PlayerDelegate</li>
			          <li> [UIDelegate] Update the “Unlocked” icon to an “Locked” icon for each protected Video item</li>
		            </ul>
			      </li>
		        </ul>
			    <li>[UIDelegate] &lt;Sign In&gt; button is clicked: Invoke startAuthentication on the bc.auth.ap.API instance passing along a AuthN callback delegate object			    </li>
			    <ul>
			      <li>7.1.	[API] Assigns the AuthN callback delegate object to a local private variable</li>
			      <li> 7.2.	[API] Calls the accessEnabler.setRequestor and waits for the callback</li>
			      <li> 7.3.	[API] displayProviderDialog callback gets invoked
			        <ul>
			          <li>[API] Creates an array of bc.auth.model.Provider objects from the untyped providers array argument</li>
			          <li> [API] &lt;CALLBACK_DELEGATE&gt;.displayProviders is called (this is from the API.init call)</li>
			          <li> [API] &lt;AUTHN_CALLBACK_DELEGATE&gt;.displayProviders is called</li>
		            </ul>
			      </li>
		        </ul>
			    <li id="9">[UIDelegate] Callback displayProviders(bc.auth.model.Provider[])			    </li>
			    <ul>
			      <li>8.1.	[UIDelegate] Instantiate bc.example.ProviderSelectorDelegate</li>
		        </ul>
			    <li>[UIDelegate] Invoke injectProviderSelector on the bc.example.ProviderSelectorDelegate instance passing along a callback delegate object			    </li>
			    <ul>
			      <li>9.1	[ProviderSelectorDelegate] Assigns the callback delegate object to a local private variable</li>
			      <li> 9.2	[ProviderSelectorDelegate] Creates the Provider Selector UI with appropriate click event handlers</li>
			      <li> 9.3	[ProviderSelectorDelegate] Provider Selected: selectedProvider gets invoked
			        <ul>
			          <li>[ProviderSelectorDelegate] Remove Provider Selector UI</li>
			          <li> [ProviderSelectorDelegate] &lt;CALLBACK_DELEGATE&gt;.selectProvider is called passing along the selected bc.auth.model.Provider object</li>
		            </ul>
			      </li>
		        </ul>
			    <li>[UIDelegate] Callback selectedProvider(bc.auth.model.Provider)</li>
			    <li>[UIDelegate] Invokes setSelectedProvider on the bc.auth.ap.API instance passing along the bc.auth.model.Provider object			    </li>
			    <ul>
			      <li>11.1.	[API] Assigns the selected provider to a private local variable</li>
			      <li> 11.2.	[API] Calls the accessEnabler.setSelectedProvider and waits for the callback</li>
			      <li> 11.3.	[API] setAuthenticationStatus callback gets invoked
			        <ul>
			          <li>[API] &lt;CALLBACK_DELEGATE&gt;.authenticationStatus is called</li>
			          <li> [API] If Authenticated: &lt;CALLBACK_DELEGATE&gt;.authenticated is called passing along the current bc.auth.model.Provider object</li>
			          <li> [API] If NOT Authenticated: &lt;CALLBACK_DELEGATE&gt;.notAuthenticated is called</li>
		            </ul>
			      </li>
		        </ul>
			    <li>[UIDelegate] Callback authenticated (provider)			    </li>
			    <ul>
			      <li>12.1.	[UIDelegate] Display current provider logo</li>
			      <li> 12.2.	[UIDelegate] Hide/Disable &lt;Sign In&gt; button</li>
			      <li> 12.3.	[UIDelegate] Show/Enable &lt;Sign Out&gt; button</li>
			      <li> 12.4.	[UIDelegate] Enable PlayerDelegate</li>
			      <li> 12.5.	[UIDelegate] Update the “Locked” icon to an “Unlocked” icon for each protected Video item</li>
		        </ul>
			    <li>[UIDelegate] &lt;Video Item&gt; is clicked: videoSelected is invoked			    </li>
			    <ul>
			      <li>13.1.	Pause currently playing video (if any)</li>
			      <li> 13.2.	Capture video metadata from the selected Video Item</li>
			      <li> 13.3.	Set the background to &lt;VIDEO_ITEM&gt;.poster</li>
		        </ul>
			    <li>[UIDelegate] Invokes play on the b bc.example.PlayerDelegate instance passing along the captured &lt;VIDEO_ITEM&gt; object			    </li>
			    <ul>
			      <li>14.1.	[PlayerDelegate] Assigns the Video Item object to a private local variable</li>
			      <li> 14.2.	[PlayerDelegate] Checks is the video item is protected (i.e. Needs authorization)</li>
			      <li> 14.3.	[PlayerDelegate] If Not Protected:
			        <ul>
			          <li>[PlayerDelegate] Set the player src to the Video Item video url</li>
			          <li> [PlayerDelegate] Starts playback</li>
		            </ul>
			      </li>
		        </ul>
			    <li>[PlayerDelegate] If Protected:			    </li>
			    <ul>
			      <li>15.1.	[PlayerDelegate] Invokes authorize on the bc.auth.ap.API instance passing along the Video
			        <ul>
			          <li>[API] Assigns the AuthZ callback delegate object to a local private variable</li>
			          <li> [API] Calls the accessEnabler. getAuthorization and waits for the callback</li>
			          <li> [API] AuthZ Successful: setToken callback gets invoked and &lt;CALLBACK_DELEGATE&gt;:s.authorized is called passing long requestorId, requested resourceId and short media token</li>
			          <li> [API] AuthZ Unsuccessful: tokenRequestFailed callback gets invoked and &lt;CALLBACK_DELEGATE&gt;:s.notAuthorized is called passing along requested resourceId, errorCode and errorDetails</li>
		            </ul>
			      </li>
		        </ul>
			    <li>[PlayerDelegate] Callback authorized (requestorId, requestedResourceId, token)</li>
			    <ul>
                  <li>Validate token and return the actual video rendition(s)</li>
		        </ul>
			    <li>Playback Video </li>
			  </ol>
          </div>
		</div>
	</div>
	<!-- bcl scripts -->
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/2.2/gist-embed.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.3/handlebars.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
	<script src="/en/scripts/log.js"></script>
	<script src="/en/scripts/docs-nav-data.min.js"></script>
	<script src="/en/scripts/bcls-doc-site.js"></script>
	<script src="/en/scripts/bc-mapi.js"></script>
	<script>
		$(document).foundation();
	</script>
	<script type="text/javascript">
		/******** Any scripts specific to page samples should go here *********/
	</script>
	
    
<iframe id="CSAT" src="http://survey.clicktools.com/app/survey/go.jsp?iv=3poon3e7e9spn&q1=[articleURL]" style="margin-left:25%; padding-bottom:20px;width:550px;height:475px;border:none"></iframe>
<script>
    
    var cSat = document.getElementById('CSAT'),
        cSatSrc = cSat.getAttribute('src'),
        pageurl = window.location.href;
    cSat.setAttribute('src', cSatSrc.replace('[articleURL]', pageurl));
    
</script>
<br><br>
<div class="footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a></div>
<script>
var feedbackMail = document.getElementById("feedbackMail");
feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
</script>
</body>

</html>

<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
    <!-- change title to match the h1 heading -->
    <title>Standard Ingest Profiles</title>
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/normalize.css" />
    <script src="//use.edgefonts.net/source-code-pro.js"></script>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/font-hack/2.015/css/hack-extended.min.css">

    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/atelier-forest.light.min.css" />
    <link rel="stylesheet" type="text/css" href="/en/styles/bcls-doc-site.css" />
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/font-hack/2.015/css/hack-extended.min.css">

    <style type="text/css">
        h2 {
            font-size: 1.5rem;
        }
        th, td {
            text-align: center;
        }
    </style>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2728311-29', 'auto');
  ga('send', 'pageview');

</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>
</head>

<body>
    <!-- header navbar -->
    <div id="navWrapper" class="fixed"></div>
    <!-- breadcrumbs -->
    <nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
    <!-- search -->
    <div id="searchModal" class="reveal-modal" data-reveal></div>
    <!-- content -->
    <!-- content -->
    <div class="row">
        <div class="sidebar large-2 columns show-for-large-up">
            <div id="sidenav" class="side-nav"></div>
        </div>
        <div id="main" class="large-10 small-12 columns">
            <header id="bcls_header" class="bcls-header">
                <h1>Standard Ingest Profiles</h1>
                <!-- Place document intro sentence(s) here -->
                <p>When creating a Dynamic Ingest request using the DI API you must supply a profile which determines the number and type of renditions created by the ingest.</p>
                <p class="BCL-aside">Note: this page is built using live data from the API; it may take a minute to fully load.</p>
                <!-- the rest of the content of this page is generated by script -->
            </div>

        </div>
    </div>
    <!-- bcl scripts -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/2.2/gist-embed.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.3/handlebars.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
    <script src="/en/scripts/log.js"></script>
    <script src="/en/scripts/docs-nav-data.min.js"></script>
    <script src="/en/scripts/bc-mapi.js"></script>


    <script src="./assets/BCLSprofilesArray.js"></script>
    <script src="/en/scripts/bcls-doc-site-v1.js"></script>
    <script type="text/javascript">
        var BCLS = ( function (window, document, Handlebars, bclsProfiles_cached, hljs) {
            var  mainSection = document.getElementById("main"),
                proxyURL = "https://solutions.brightcove.com/bcls/bcls-proxy/bcls-proxy.php",
                        requestData = "client_id=cca7ae2a-503d-472e-996c-3aa664d4aa95&client_secret=OE43iNQ6HluFxM2I_f6QDfGLoSSW28jnDWbX8gDgS6GIFD2P6VNWKbRHyln0I5aVyoSeil0l5ikWYQ2hUbR99g&url=" + encodeURI('https://ingestion.api.brightcove.com/v1/accounts/3921507403001/profiles') + "&requestBody=null&requestType=GET",
                data = bclsProfiles_cached,
                profileListTemplate = "{{#BCLSprofilesArray}}<tr><td><a href=\"#{{name}}\">{{name}}</a></td><td class=\"bcl-center\">{{videoRenditions}}</td><td class=\"bcl-center\">{{audioRenditions}}</td><td class=\"bcl-center\">{{imageRenditions}}</td><td>{{description}}</td></tr>{{/BCLSprofilesArray}}",
                navLabel = [],
                standardProfileList = ['screencast-1280', 'smart-player-transition', 'Live - Standard', 'single-bitrate-high', 'audio-only', 'videocloud-default-v1', 'Live - Premium HD', 'Live - HD', 'single-bitrate-standard', 'high-resolution'];
                /**
                 * determines whether specified item is in an array
                 *
                 * @param {array} array to check
                 * @param {string} item to check for
                 * @return {boolean} true if item is in the array, else false
                 */
                function isItemInArray(arr, item) {
                    var i,
                        iMax = arr.length;
                    for (i = 0; i < iMax; i++) {
                        if (arr[i] === item) {
                            return true;
                        }
                    }
                    return false;
                }
            /**
             * remove spaces from passed string
             * @param  {string} str - the string to remove spaces from
             * @return {str}   - string with spaces removed
             */
            function removeSpaces(str) {
                if (isDefined(str)) {
                    return str.replace(/\s/g, "");
                }
                return "";
            };
            /**
             * tests for all the ways a variable might be undefined or not have a value
             * @param {*} x the variable to test
             * @return {Boolean} true if variable is defined and has a value
             */
            function isDefined(x){
                if( x === '' || x === null || x === undefined || x === NaN){
                    return false;
                } else{
                    return true;
                }
            };

            /**
             * dedupe a simple array of strings or numbers
             * @param {array} arr the array to be deduped
             * @return {array} out the deduped array
             */
            function dedupe(arr) {
                var i,
                    len = arr.length,
                    out = [],
                    obj = {};

                for (i = 0;i < len; i++) {
                    obj[arr[i]] = 0;
                }
                for (i in obj) {
                    out.push(i);
                }
                return out;
            };
            /**
             * Logging function - safe for IE
             * @param  {string} context description of the data
             * @param  {*} message the data to be logged by the console
             * @return {}
             */
            function bclslog(context, message) {
                if (window["console"] && console["log"]) {
                    console.log(context, message);
                }
                return;
            };
            /**
             * create an element
             * @param  {string} type - the element type
             * @param  {object} attributes - attributes to add to the element
             * @return {object} the HTML element
             */
            function createEl(type, attributes) {
                var el;
                if (isDefined(type)) {
                    el = document.createElement(type);
                    if (isDefined(attributes)) {
                        var attr;
                        for (attr in attributes) {
                            el.setAttribute(attr, attributes[attr]);
                        }
                    }
                    return el;
                }
            };

            // create navigation for page sections
            function createInPageNavMenu() {
                var str = "<ul class=\"side-nav show-for-large-up\">",
                    i,
                    max = navLabel.length,
                    $navElements,
                    $sidenav = $("#sidenav");
                for (i = 0; i < max; i++) {
                    str += "<li><a href=\"#" + navLabel[i].link + "\">" + navLabel[i].text + " </a></li>";
                }
                str += "</ul>";
                $sidenav.append(str);
                $navElements = $sidenav.find("a");
                $navElements.on("click", function () {
                    $navElements.attr("style", "");
                    $(this).attr("style", "background-color:#F3951D;color:#ffffff");
                });
                // set h2 color to product NewColor
                $("h1,h2").attr("style", "color:#F3951D;");
                $("pre>code").each(function (i, e) {
                    hljs.highlightBlock(e);
                });
            };
            function createInPageNav() {
                var navObj = {},
                    $divsection = $("div.section");
                // set initial visibilities
                $divsection.each(function (index) {
                    bclslog("index", index);
                    if (index > 0) {
                        $this = $(this);
                        navObj = {};
                        navObj.link = $this.attr("id");
                        navObj.text = $this.find("h2:first").text();
                        navLabel.push(navObj);
                    }
                });
                // only create the nav widget if there is more than one item
                if (navLabel.length > 1) {
                    // create in-page nav menu
                    createInPageNavMenu();
                }
            };

            function buildSummaryTable() {
                var newSectionNode = document.createElement("div"),
                    sectionHeadingNode = document.createElement("h2"),
                    sectionIntroNode = document.createElement("p"),
                    profileTableNode = document.createElement("table"),
                    profiletheadNode = document.createElement("thead"),
                    profiletbodyNode = document.createElement("tbody"),
                    sectionHeadingElem,
                    sectionIntroElem,
                    profileTableElem,
                    profiletheadElem,
                    profiletbodyElem,
                    template = profileListTemplate,
                    fragment = document.createDocumentFragment(),
                    i,
                    iMax,
                    j,
                    jMax,
                    k,
                    kMax,
                    item,
                    str = "",
                    tr,
                    th,
                    td,
                    a,
                    content;
                iMax = data.BCLSprofilesArray.length;
                // massage data
                for (i = 0; i < iMax; i++) {
                    item = data.BCLSprofilesArray[i];
                    item.videoRenditions = 0;
                    item.audioRenditions = 0;
                    item.imageRenditions = 0;
                    // add legacy description if none
                    if (!isDefined(item.description)) {
                        item.description = 'legacy profile - not recommended for use';
                    }

                    jMax = item.renditions.length;
                    item.numRenditions = jMax;

                    for (j = 0; j < jMax; j++) {
                        // count up renditions of each kind
                        if (item.renditions[j].media_type === "video") {
                            item.videoRenditions++;
                        } else if (item.renditions[j].media_type === "image") {
                            item.imageRenditions++;
                        } else if (item.renditions[j].media_type === "audio") {
                            item.audioRenditions++;
                        }
                    }

                }
                newSectionNode.setAttribute("id", "summaryTableSection");
                newSectionNode.setAttribute("class", "section");
                sectionHeadingNode.setAttribute("id", "summaryTableHeading");
                sectionIntroNode.setAttribute("id", "summarySectionIntro");
                profileTableNode.setAttribute("id", "profileSummaryTable");
                profileTableNode.setAttribute("class", "profile-data");
                profiletheadNode.setAttribute("id", "profileSummaryTableThead");
                profiletbodyNode.setAttribute("id", "profileSummaryTableTbody");
                newSectionNode.appendChild(sectionHeadingNode);
                newSectionNode.appendChild(sectionIntroNode);
                newSectionNode.appendChild(profileTableNode);
                profileTableNode.appendChild(profiletheadNode);
                profileTableNode.appendChild(profiletbodyNode);
                fragment.appendChild(newSectionNode);
                // template = Handlebars.compile(profileListTemplate);
                // profiletbodyElem.innerHTML = template(data);
                bclslog('data.BCLSprofilesArray', data.BCLSprofilesArray);
                iMax = data.BCLSprofilesArray.length;
                for (i = 0; i < iMax; i++) {
                    item = data.BCLSprofilesArray[i];
                    tr = document.createElement('tr');
                    profiletbodyNode.appendChild(tr);
                    td = document.createElement('td');
                    a = document.createElement('a');
                    a.setAttribute('href', '#' + removeSpaces(item.name) + 'Copy');
                    content = document.createTextNode(item.name);
                    a.appendChild(content);
                    td.appendChild(a);
                    tr.appendChild(td);
                    td = document.createElement('td');
                    td.setAttribute('class', 'bcl-center');
                    content = document.createTextNode(item.videoRenditions);
                    td.appendChild(content);
                    tr.appendChild(td);
                    td = document.createElement('td');
                    td.setAttribute('class', 'bcl-center');
                    content = document.createTextNode(item.audioRenditions);
                    td.appendChild(content);
                    tr.appendChild(td);
                    td = document.createElement('td');
                    td.setAttribute('class', 'bcl-center');
                    content = document.createTextNode(item.imageRenditions);
                    td.appendChild(content);
                    tr.appendChild(td);
                    td = document.createElement('td');
                    content = document.createTextNode(item.description);
                    td.appendChild(content);
                    tr.appendChild(td);
                }
                mainSection.appendChild(fragment);
                sectionHeadingElem = document.getElementById("summaryTableHeading");
                sectionIntroElem = document.getElementById("summarySectionIntro");
                profiletheadElem = document.getElementById("profileSummaryTableThead");
                profiletbodyElem = document.getElementById("profileSummaryTableTbody");
                sectionHeadingElem.innerHTML = "Standard Profiles List";
                content = document.createTextNode('Click on a profile name to see details of the renditions it includes. Note that the actual renditions created will depend on the quality of the source video.');
                sectionIntroElem.appendChild(content);
                tr = document.createElement('tr');
                profiletheadElem.appendChild(tr);
                th = document.createElement('th');
                content = document.createTextNode('Profile Name');
                th.appendChild(content);
                tr.appendChild(th);
                th = document.createElement('th');
                content = document.createTextNode('Video');
                th.appendChild(content);
                tr.appendChild(th);
                th = document.createElement('th');
                content = document.createTextNode('Audio');
                th.appendChild(content);
                tr.appendChild(th);
                th = document.createElement('th');
                content = document.createTextNode('Image');
                th.appendChild(content);
                tr.appendChild(th);
                th = document.createElement('th');
                content = document.createTextNode('Description');
                th.appendChild(content);
                tr.appendChild(th);
            };
            function buildDetailTables() {
                bclslog("building data tables");
                var section,
                    fragment = document.createDocumentFragment(),
                    sectionHeading,
                    sectionSubHeading,
                    sectionJsonHeading,
                    sectionJsonP,
                    sectionTableHeading,
                    renditionTable,
                    renditionthead,
                    renditiontbody,
                    tr,
                    th,
                    td,
                    link,
                    profilePre,
                    profileCode,
                    i, j, jMax,
                    iMax = data.BCLSprofilesArray.length,
                    headings,
                    profile,
                    rendition,
                    renditionProperty,
                    text,
                    str,
                    re = /_/g;
                for (i = 0; i < iMax; i++) {
                    var headersArray = [],
                        l,
                        lMax;
                    profile = data.BCLSprofilesArray[i];
                    // remove id's from data
                    delete profile.id;
                    delete profile.version;
                    delete profile.brightcove_standard;
                    delete profile.date_created;
                    delete profile.date_last_modified;
                    delete profile.videoRenditions;
                    delete profile.audioRenditions;
                    delete profile.imageRenditions;
                    delete profile.numRenditions;
                    if (!isDefined(profile.description)) {
                        profile.description = 'legacy profile - not recommended for use';
                    }
                    profile.name = profile.name + ' Copy';
                    profile.account_id = null;
                    if (isDefined(profile.renditions)) {
                        jMax = profile.renditions.length;
                        for (j = 0; j < jMax; j++) {
                            delete profile.renditions[j].id;
                        }
                    }
                    section = createEl("div", {id: removeSpaces(profile.name), class: "section"});
                    sectionHeading = createEl("h2");
                    sectionSubHeading = createEl("p");
                    sectionJsonHeading = createEl("h6", {id: profile.name + "json"});
                    text = document.createTextNode("JSON data for the profile")
                    sectionJsonHeading.appendChild(text);
                    sectionJsonP = createEl('p', {class: 'BCL-aside'});
                    text = document.createTextNode('Note: if you copy and paste the JSON to make a new profile, you will need to replace the null value for "account_id" with your own account id.');
                    sectionJsonP.appendChild(text);
                    sectionTableHeading = createEl("h6");
                    profilePre = createEl("pre");
                    profileCode = createEl("code");
                    profilePre.appendChild(profileCode);
                    section.appendChild(sectionHeading);
                    section.appendChild(sectionSubHeading);
                    section.appendChild(sectionTableHeading);
                    renditionTable = createEl("table", {class: "profile-data"});
                    renditionthead = createEl("thead");
                    renditiontbody = createEl("tbody");
                    section.appendChild(renditionTable);
                    renditionTable.appendChild(renditionthead);

                    renditionTable.appendChild(renditiontbody);

                    section.appendChild(sectionJsonHeading);
                    section.appendChild(sectionJsonP);
                    section.appendChild(profilePre);
                    text = document.createTextNode(JSON.stringify(profile, false, "  "));
                    profileCode.appendChild(text);
                    fragment.appendChild(section);
                    text = document.createTextNode(profile.name.replace(' Copy', ''));
                    sectionHeading.appendChild(text);
                    link = createEl("a", {href: "#" + profile.name + "json"});
                    text = document.createTextNode("View rendition information in JSON form");
                    link.appendChild(text);
                    sectionSubHeading.appendChild(link);
                    text = document.createTextNode("Table of rendition properties");
                    sectionTableHeading.appendChild(text);
                    // now do the reditions
                    jMax = profile.renditions.length;
                    // get all properties and build the table headers
                    for (j = 0; j < jMax; j++) {
                        var prop;
                        rendition = profile.renditions[j];
                        for (prop in rendition) {
                            headersArray.push(prop);
                        }
                    }
                    // dedupe the headers
                    headersArray = dedupe(headersArray);
                    bclslog("deduped headers array", headersArray);
                    // write the th elements to the string
                    // create the table headers
                    lMax = headersArray.length;
                    tr = createEl("tr");
                    for (l = 0; l < lMax; l++) {
                        th = createEl("th");
                        text = document.createTextNode(headersArray[l].replace(re, " "));
                        th.appendChild(text);
                        tr.appendChild(th);
                    }
                    renditionthead.appendChild(tr);
                    // now add the body row for each rendition
                    jMax = profile.renditions.length;
                    for (j = 0; j < jMax; j++) {
                        tr = createEl("tr");
                        rendition = profile.renditions[j];
                        for (l = 0; l < lMax; l++) {
                            td = createEl("td");
                            str = isDefined(rendition[headersArray[l]]) ? rendition[headersArray[l]] : "";
                            text = document.createTextNode(str);
                            td.appendChild(text);
                            tr.appendChild(td);
                        }
                        renditiontbody.appendChild(tr);
                    }
                }
                mainSection.appendChild(fragment);
                bclslog("content built");
                createInPageNav();
            };
            function getProfileData() {
                var httpRequest = new XMLHttpRequest(),
                    proxyURL = "https://solutions.brightcove.com/bcls/bcls-proxy/bcls-proxy.php",
                    i,
                    iMax,
                    tmpArr,
                    getResponse = function () {
                        bclslog("getting data");
                        try {
                            if (httpRequest.readyState === 4) {
                              if (httpRequest.status === 200) {
                                // try {
                                  bclslog('response', httpRequest.responseText);
                                  tmpArr = JSON.parse(httpRequest.responseText);
                                  iMax = tmpArr.length;
                                  data.BCLSprofilesArray = [];
                                  for (i = 0; i < iMax; i += 1) {
                                      if (isItemInArray(standardProfileList, tmpArr[i].name)) {
                                          data.BCLSprofilesArray.push(tmpArr[i]);
                                      }
                                  }
                                  buildSummaryTable();
                                  buildDetailTables();


                                // } catch (e) {
                                //   bclslog('invalid json', e);
                                //   // just use cached data and build the tables
                                //     data = bclsProfiles_cached;
                                //     buildSummaryTable();
                                //     buildDetailTables();
                                // }
                              } else {
                                bclslog("There was a problem with the request. Request returned: ", httpRequest.status);
                                // just use cached data and build the tables
                                data = bclsProfiles_cached;
                                buildSummaryTable();
                                buildDetailTables();

                              }
                            }
                          }
                          catch(e) {
                            bclslog('Caught Exception: ', e);
                          }
                    };
                // set response handler
                httpRequest.onreadystatechange = getResponse;
                // open the request
                httpRequest.open("POST", proxyURL);
                // set headers
                httpRequest.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
                // open and send request
                httpRequest.send(requestData);
            };
            getProfileData();

            // BCLSmain.createInPageNav();
            })(window, document, Handlebars, bclsProfiles_cached, hljs);
    </script>
    <!-- note - since the script above inserts sections into the DOM, the main site script and foundation() must be called after that script runs! -->
    <script>
        $(document).foundation();

    </script>

<div style="text-align:center">
    <iframe id="CSAT" src="//learning-services-media.brightcove.com/doc-assets/general/surveylink.html" style=" padding-bottom:20px;border:none"></iframe>
</div>
<div class="bcls-footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a></div>
<script>
var feedbackMail = document.getElementById("feedbackMail");
feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
</script>
</body>

</html>

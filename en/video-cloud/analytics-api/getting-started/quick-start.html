<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
    <title id="bclPageTitle">Brightcove Video Cloud Analytics API Quick Start</title>
    <script type="text/javascript" src="//use.edgefonts.net/source-code-pro.js"></script>
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/normalize.css" />
    <script src="//use.edgefonts.net/source-code-pro.js"></script>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/font-hack/2.015/css/hack-extended.min.css">

    <link rel="stylesheet" type="text/css" href="/en/styles/bcls-doc-site.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/atelier-forest.light.min.css" />
    <style>
      textarea {
        width: 100%;
        height: 7rem;
      }
    </style>
    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-2728311-29', 'auto');
        ga('send', 'pageview');
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>
</head>

<body>
    <!-- header navbar -->
    <div id="navWrapper" class="fixed"></div>
    <!-- breadcrumbs -->
    <nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
    <!-- search -->
    <div id="searchModal" class="reveal-modal" data-reveal></div>
    <!-- content -->
    <div class="row">
        <div class="sidebar large-2 columns show-for-large-up">
            <div id="sidenav" class="side-nav"></div>
        </div>
        <div id="main" class="large-10 small-12 columns deck-container">
        <!-- title slide -->
            <div id="top" class="section">
                <h1>Quick Start: Analytics API</h1>
            </div>
            <!-- regular content slide -->
            <div id="intro" class="section">
                <h3>Introduction</h3>
                <p>The Analytics API allows you to retrieve various analytics reports for your Video Cloud videos. This tutorial will allow you to test a number of different requests to see what the request URL and response look like.</p>
                <div class="BCL-aside">
                    <ul>
                        <li>For a full explanation of the API, see the <a href="api-overview.html">Analytics API Overview</a> and the <a href="../references/versions/v1/index.html">Analytics API Reference</a></li>
                        <li>If you would like to test requests on your own account(s), try our <a href="../../concepts/api-testing-tools/api-testing-tools.html">API testing tools</a></li>
                    </ul>
                </div>
            </div>
            <div id="authorization" class="section">
                <h3>Authorization</h3>
                <p>API calls are authorized using OAuth2 access tokens. The token is passed with requests in an authorization header:</p>
    <pre class="slide"><code>Authorization: Bearer {access_token}</code></pre>
                <p class="slide">Access tokens are short-lived (5 min), so you must get one each time you make a request</p>
                <p class="slide">In quick start, all requests will be for a Brightcove sample account, using a <a href="//docs.brightcove.com/en/video-cloud/oauth-api/guides/get-token.html#php">proxy</a> that has the necessary client credentials and will fetch an access token and then make the request.</p>
            </div>
            <div id="codepen" class="section">
                <h2>CodePen</h2>
                <p>Use the CodePen below to test out different Analytics API requests.</p>
                <p data-height="800" data-theme-id="14832" data-slug-hash="MaVaxN" data-default-tab="result" data-user="bcls" class='codepen'>See the Pen <a href='http://codepen.io/team/bcls/pen/MaVaxN/'>Analytics API Tester</a> by Brightcove Learning Services (<a href='http://codepen.io/bcls'>@bcls</a>) on <a href='http://codepen.io'>CodePen</a>.</p>
<script async src="//assets.codepen.io/assets/embed/ei.js"></script>
            </div>
        </div>
    </div>
    <!-- bcl scripts -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.3/handlebars.min.js"></script>
    <script src="/en/scripts/docs-nav-data.min.js"></script>
    <script src="/en/scripts/bcls-doc-site-v1.js"></script>
    <script src="../assets/aapi-model.js"></script>
    <script id="pageScript" type="text/javascript">
var BCLS = (function(window, document) {
    'use strict';
    var proxyURL = 'https://solutions.brightcove.com/bcls/bcls-proxy/bcls-proxy.php',
        baseURL = 'https://analytics.api.brightcove.com/v1',
        useMyAccount = document.getElementById('useMyAccount'),
        basicInfo = document.getElementById('basicInfo'),
        account_id = document.getElementById('account_id'),
        client_id = document.getElementById('client_id'),
        client_secret = document.getElementById('client_secret'),
        video_id = document.getElementById('video_id'),
        player_id = document.getElementById('player_id'),
        tags = document.getElementById('tags'),
        setOptions = document.getElementById('setOptions'),
        /**
         * defaults - Brightcove Learning account values
         * here - change to account you want to use
         * permissions for:
         * Analytics API - all operations
         */
        defaults = {
            account_id: '20318290001',
            client_id: '2f3b7e79-a8e8-4a21-b2c8-6480cf5f2c8d',
            client_secret: 'PiDmMouSDBNsNJUuEK90u8bpVn-kSw9D-BM5ADI_rnsLP2KXGN_7OxE6ng2-FAykgLnjj47aS3EeBd2N2K5kiA',
            player_id: 'E16-WGGOe',
            video_id: '4230322585001',
            tags: 'drupal'
        },
        options = {},
        // for the exercises
        ex1request = document.getElementById('ex1request'),
        ex1response = document.getElementById('ex1response'),
        ex1button = document.getElementById('ex1button'),
        ex2request = document.getElementById('ex2request'),
        ex2response = document.getElementById('ex2response'),
        ex2button = document.getElementById('ex2button'),
        ex3request = document.getElementById('ex3request'),
        ex3response = document.getElementById('ex3response'),
        ex3button = document.getElementById('ex3button'),
        ex4request = document.getElementById('ex4request'),
        ex4response = document.getElementById('ex4response'),
        ex4button = document.getElementById('ex4button'),
        ex5request = document.getElementById('ex5request'),
        ex5response = document.getElementById('ex5response'),
        ex5button = document.getElementById('ex5button'),
        ex6request = document.getElementById('ex6request'),
        ex6response = document.getElementById('ex6response'),
        ex6button = document.getElementById('ex6button'),
        ex7request = document.getElementById('ex7request'),
        ex7response = document.getElementById('ex7response'),
        ex7button = document.getElementById('ex7button'),
        ex8request = document.getElementById('ex8request'),
        ex8response = document.getElementById('ex8response'),
        ex8button = document.getElementById('ex8button'),
        ex9request = document.getElementById('ex9request'),
        ex9response = document.getElementById('ex9response'),
        ex9button = document.getElementById('ex9button'),
        // functions
        isDefined,
        bclslog,
        copyObj,
        setAccountOptions,
        setupExercises,
        submitRequest;
        /**
         * tests for all the ways a variable might be
         * undefined or not have a value
         * @param {*} x the variable to test
         * @return {Boolean} true if variable is defined and has a value
         */
        isDefined = function(x) {
            if ( x === "" || x === null || x === undefined || x === NaN) {
                return false;
            }
            return true;
        };
        /**
         * Logging function - safe for IE
         * @param  {string} context description of the data
         * @param  {*} message data to be logged
         */
        bclslog = function(context, message) {
            if (window['console'] && console['log']) {
              console.log(context, message);
            }
        };
        /**
         * get a copy of (rather than reference to) an object
         * @param  {object} obj the object you want a copy
         * @return {object}     the copy
         */
        copyObj = function(obj) {
            if (isDefined(obj)) {
                return JSON.parse(JSON.stringify(obj));
            }
            bclslog("copy obj error - no object passed");
            return {};
        };
        /**
         * set up account options when you are ready
         * to assemble the URL and make the API call
         */
        setAccountOptions = function() {
            defaults.account_id = isDefined(account_id.value) ? account_id.value : defaults.account_id;
            defaults.client_id = isDefined(client_id.value) ? client_id.value : defaults.client_id;
            defaults.client_secret = isDefined(client_secret.value) ? client_secret.value : defaults.client_secret;
            defaults.video_id = isDefined(video_id.value) ? video_id.value : defaults.video_id;
            defaults.player_id = isDefined(player_id.value) ? player_id.value : defaults.player_id;
            defaults.tags = isDefined(tags.value) ? encodeURI(tags.value) : encodeURI(defaults.tags);
            bclslog("defaults", defaults);
        };
        /**
         * set up values for exercises
         */
        setupExercises = function() {
            var dataAccounts = '/data?accounts=' + defaults.account_id,
                now = new Date(),
                nowISO = now.toISOString().substring(0, 10),
                weekAgo = new Date(now.valueOf() - 14 * 24 * 3600000),
                weekAgoISO = weekAgo.toISOString().substring(0, 10);
            bclslog("now", nowISO);
            bclslog("week ago", weekAgoISO);
            ex1request.value = baseURL + dataAccounts + '&dimensions=video';
            ex2request.value = baseURL + dataAccounts + '&dimensions=video,country';
            ex3request.value = baseURL + dataAccounts + '&dimensions=video,country&fields=video_name,video_view,video_impression,country,country_name';
            ex4request.value = baseURL + dataAccounts + '&dimensions=video,country&fields=video_name,video_view,video_impression,country,country_name&sort=country_name';
            ex5request.value = baseURL + dataAccounts + '&dimensions=video,country&fields=video_name,video_view,video_impression,country,country_name&sort=country_name&limit=5&offset=10';
            ex6request.value = baseURL + dataAccounts + '&dimensions=video,country&fields=video_name,video_view,video_impression,country,country_name&sort=country_name&limit=5&offset=10&from=' + weekAgoISO + '&to=' + nowISO;
            ex7request.value = baseURL + dataAccounts + '&dimensions=video,country&fields=video_name,video_view,video_impression,country,country_name&sort=country_name&limit=5&offset=10&from=' + weekAgoISO + '&to=' + nowISO + '&where=video==' + defaults.video_id + ';country==CH';
            ex8request.value = baseURL + dataAccounts + '&dimensions=video,country&fields=video_name,video_view,video_impression,country,country_name&sort=country_name&limit=5&offset=10&from=' + weekAgoISO + '&to=' + nowISO + '&where=video.q==tags:' + defaults.tags;
            ex9request.value = baseURL + '/engagement/accounts/' + defaults.account_id + '/videos/' + defaults.video_id + '&from=' + weekAgoISO + '&to=' + nowISO;
        };
        // listeners
        // toggle sample/customer account
        useMyAccount.addEventListener('click', function() {
            if (basicInfo.className === 'display-none') {
                basicInfo.className = 'display-block';
                useMyAccount.textContent = 'Cancel';
            } else {
                basicInfo.className = 'display-none';
                useMyAccount.textContent = 'Use My Account';
            }
        });
        useSampleAccount.addEventListener('click', function() {
            setAccountOptions();
            useSampleAccount.textContent = 'Setup Complete!';
            setupExercises();
        });
        /**
         * submits the api request to the proxy and writes the response
         * @param  {string} the request type get, post, patch, put, delete
         * @param  {object:htmlElement} reqEl  element that holds the api request
         * @param  {object:htmlElement} respEl element to write the response to
         * @param  {object:htmlElement} dataEl element that holds request data (optional)
         */
        submitRequest = function(exNum, reqType, reqEl, respEl, dataEl) {
            var options = {},
                respData;
            options.client_id = defaults.client_id;
            options.client_secret = defaults.client_secret;
            options.url = reqEl.value;
            options.requestType = reqType.toUpperCase();
            options.requestBody = (isDefined(dataEl)) ? dataEl.value : null;
            bclslog('options', options);
            $.ajax({
                url: proxyURL,
                method: 'POST',
                data: options,
                success : function(data) {

                        bclslog('data', data);
                    try {
                        respData = JSON.parse(data);
                        respEl.value = JSON.stringify(respData, null, '  ');
                    } catch (e) {
                         bclslog('invalid JSON - something went wrong', e);
                         data = {'Error': e};
                         switch (exNum) {
                            default:
                            respEl.value = 'There was a problem with the request';
                            break;
                         }
                    }
                    // write the response to the response element

                }
            });
        };
        // set account options
        setOptions.addEventListener('click', function() {
            setAccountOptions();
            setOptions.textContent = 'Setup Complete!';
            setupExercises();
        });
        // exercise button handlers
        ex1button.addEventListener('click', function() {
            submitRequest(1, 'get', ex1request, ex1response);
        });
        ex2button.addEventListener('click', function() {
            submitRequest(2, 'get', ex2request, ex2response);
        });
        ex3button.addEventListener('click', function() {
            submitRequest(3, 'get', ex3request, ex3response);
        });
        ex4button.addEventListener('click', function() {
            submitRequest(4, 'get', ex4request, ex4response);
        });
        ex5button.addEventListener('click', function() {
            submitRequest(5, 'get', ex5request, ex5response);
        });
        ex6button.addEventListener('click', function() {
            submitRequest(6, 'get', ex6request, ex6response);
        });
        ex7button.addEventListener('click', function() {
            submitRequest(7, 'get', ex7request, ex7response);
        });
        ex8button.addEventListener('click', function() {
            submitRequest(8, 'get', ex8request, ex8response);
        });
        ex9button.addEventListener('click', function() {
            submitRequest(9, 'get', ex9request, ex9response);
        });
    return {};
})(window, document);
    </script>
    
    </div>
    
    <script>
        $(document).foundation();
    </script>
<iframe id="CSAT" src="http://survey.clicktools.com/app/survey/go.jsp?iv=3poon3e7e9spn&q1=[articleURL]" style="margin-left:25%; padding-bottom:20px;width:550px;height:475px;border:none"></iframe>
<script>
    
    var cSat = document.getElementById('CSAT'),
        cSatSrc = cSat.getAttribute('src'),
        pageurl = window.location.href;
    cSat.setAttribute('src', cSatSrc.replace('[articleURL]', pageurl));
    
</script>
<br><br>
<div class="footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a></div>
<script>
var feedbackMail = document.getElementById("feedbackMail");
feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
</script>
</body>

</html>
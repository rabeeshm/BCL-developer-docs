<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
    <!-- change title to match the h1 heading -->
    <title id="bclPageTitle">Account Level Sample</title>
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" />
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/normalize.css" />
    <script src="//use.edgefonts.net/source-code-pro.js"></script>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/font-hack/2.015/css/hack-extended.min.css">

  }<link rel="stylesheet" type="text/css" href="/en/styles/bcls-doc-site.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/atelier-forest.light.min.css" />
<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-2728311-29', 'auto');
ga('send', 'pageview');

</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>
  </head>

  <body>
	<!-- header navbar -->
	<div id="navWrapper" class="fixed"></div>
	<!-- breadcrumbs -->
	<nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
	<!-- search -->
	<div id="searchModal" class="reveal-modal" data-reveal></div>
	<!-- content -->
    <!-- content -->
    <div class="row">
        <div class="sidebar large-2 columns show-for-large-up">
            <div id="sidenav" class="side-nav"></div>
        </div>
        <div id="main" class="large-10 small-12 columns">
       <div id="top" class="section">
            <h1 id="bclPageHeading">Samples: Account Summary Request</h1>
          <p class="BCL_teaser">This sample shows an account-level Analytics API request. The raw response data is included, along with some sample graphs created from parts of the data. The JavaScript code used to generate the sample graphs is at the bottom of page source code.</p><!--break-->
          <p>Account-level requests return a summary of analytics data for the account.</p>
          <p class="text-warning">Note: all samples are limited to a 12-hour timespan to limit the size of the returned data set.</p>
        </div>
        <div id="request" class="section">
          <h2><a name="request"></a>Request</h2>
          <p>Below is a request for summary metrics for a Video Cloud account for a specific time period (in this case, from <span class="startDate"></span> to <span class="endDate"></span>)</p>
<pre><code id="httpRequest"></code></pre>
        </div>
        <div id="response" class="section">
          <h2><a name="response"></a>JSON Response</h2>
          <p>Below is the data that was returned from the request above:</p>
<pre><code id="jsonresponse"></code></pre>
        </div>
        <div id="sampleGraph" class="section">
          <h2><a name="sampleGraph"></a>Sample Graphs</h2>
          <p>Below you can see sample graphs generated from parts of the returned data. The graphs were created using the <a href="//www.flotcharts.org">Flot plotting library for jQuery</a>.</p>
          <p id="startDate" class="startDate"><strong>Start date:</strong> </p>
          <p id="endDate" class="endDate"><strong>End date:</strong> </p>
          <h3>Video Views</h3>
          <p>Number of video views per hour</p>
          <div id="chartViews" style="width:800px;height:400px"></div>
          <div id="chartViewsLegend" style="padding:10px 20px;"></div>
          <h3>Video Engagement</h3>
          <p>Average views at % of video length</p>
          <div id="chartEngagement" style="width:800px;height:400px"></div>
        </div>
        <div class="section" id="code">
          <h2><a name="code"></a>Code for this page</h2>
          <h3>JavaScript used for this sample:</h3>
<pre><code id="js_code"></code></pre>
        </div>
      </div>
    </div>
    <!-- bcl scripts -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
    <script src="/en/scripts/jquery.flot.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.3/handlebars.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>

    <script src="/en/scripts/docs-nav-data.min.js"></script>
    <script src="/en/scripts/bcls-doc-site-v1.js"></script>
    <script src="/en/scripts/format_json.js"></script>
    <script src="/en/scripts/prefix.js"></script>
    <script id="pageScript" type="text/javascript">
    /******** Any scripts specific to page samples should go here *********/
    $(document).ready(function(BCLSmain, BCLSformatJSON){
      var startDate = new Date(1357740000000).toString(),
        endDate = new Date(1357783200000).toString(),
        $startDate = $('.startDate'),
        $endDate = $('.endDate'),
        $httpRequest = $("#httpRequest"),
        $response = $("#jsonresponse"),
        request = "https://data.brightcove.com/analytics-api/videocloud/accounts/20318290001?from=1357740000000&to=1357783200000",
        chartViews = "#chartViews",
        chartEngagement = "#chartEngagement",
        responseData = {"item_count":1,"items":[{"account":"20318290001","active_media":null,"bytes_delivered":null,"daily_unique_viewers":null,"drm_bytes_packaged":null,"engagement_score":51.5,"licenses_served":null,"live_seconds_streamed":null,"play_rate":0.16,"player_load":44247,"video_engagement_1":6330.52,"video_engagement_25":3988.29,"video_engagement_50":3343.68,"video_engagement_75":2854.82,"video_engagement_100":2210.33,"video_impression":42743,"video_percent_viewed":352002.24,"video_seconds_viewed":691555,"video_view":6835}],"summary":{"bytes_delivered":0,"video_engagement_75":2854.82,"video_seconds_viewed":691555,"licenses_served":0,"video_engagement_25":3988.29,"video_impression":42743,"active_media":0,"drm_bytes_packaged":0,"video_engagement_50":3343.68,"video_engagement_100":2210.33,"live_seconds_streamed":0,"engagement_score":51.5,"video_engagement_1":6330.52,"player_load":44247,"video_percent_viewed":352002.24,"video_view":6835,"play_rate":0.16}},
          makeViewGraph,
          makeEngagementGraph;
        // make graph - depends on jquery.flot.js
        makeViewGraph = function(jsonObject, element, legendElement) {
          var options = {}, plotData = {};
          options.legend = {"show": true,"container":legendElement};
          plotData.series = [];
          for (var i = 0; i < jsonObject.series.values.length; i++) {
            var views = jsonObject.series;
            var viewStart = new Date(views.start + (views.step * i));
            var viewStartHours = viewStart.getHours();
            var viewEnd = new Date(viewStart.getTime() + views.step);
            var series = {};
            series.data = [];
            series.label = viewStart.toTimeString() + "-" + viewEnd.toTimeString();
            series.xaxis = {"min":viewStartHours};
            series.yaxis = {"min":0};
            series.bars = {
              "show": true,
              "barWidth": .5,
              "align": "left",
              "horizontal": false };
            series.data[i] = [viewStartHours,views.values[i]];
            plotData.series[i] = series;
          }
          var plot = $.plot(element,plotData.series,options);
        };
        makeEngagementGraph = function(jsonObject, element) {
          var options = {},
          series = [],
          dataObject = {};
          dataObject.data = [];
          dataObject.color = "rgb(122, 202, 213)";
          dataObject.shadowSize = 0;
          for (var i = 0; i < jsonObject.series.values.length; i++) {
            dataObject.data[i] = [i, Math.round(jsonObject.series.values[i]*100)/100];
            series.push(dataObject);
          }
          var plot = $.plot(element, series, options);
        }
        // $response.html(BCLSformatJSON.formatJSON(responseData));
        $startDate.append(startDate);
        $endDate.append(endDate);
        $httpRequest.html(request);
        // re-highlight pre-code blocks
        // BCLSmain.BCLhighlight();
        // makeViewGraph(responseData.items.video_view,chartViews,$("#chartViewsLegend"));
        // makeEngagementGraph(responseData.summary.video_engagement,chartEngagement);
      });
    </script>
    <script>
      $(document).ready(function(){
        $("#js_code").html(BCLSpreFix($("#pageScript").html()));
      });
    </script>
      
    <script>
  var feedbackMail = document.getElementById("feedbackMail");
  feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
  </script>
  <script>
      $(document).foundation();
  </script>
  <iframe width="550" height="475" frameborder="0" src="
http://survey.clicktools.com/app/survey/go.jsp?iv=3poon3e7e9spn&q1=
[articleURL]" style="margin-left:25%; padding-bottom:20px;"></iframe>
<br><br>
<div class="footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a></div>
<script>
var feedbackMail = document.getElementById("feedbackMail");
feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
</script>
</body>
</html>
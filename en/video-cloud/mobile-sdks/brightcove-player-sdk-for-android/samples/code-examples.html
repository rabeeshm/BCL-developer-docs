<!DOCTYPE html>
<html lang="en">

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
	<!-- change title to match the h1 heading -->
	<title>Brightcove Player SDK for Android: Code Snippets</title>
	<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" />
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/normalize.css" />
	<script src="//use.edgefonts.net/source-code-pro.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/font-hack/2.015/css/hack-extended.min.css">

	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/atelier-forest.light.min.css" />
    <link rel="stylesheet" type="text/css" href="/en/styles/bcls-doc-site.css" />
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/font-hack/2.015/css/hack-extended.min.css">
  
  <!--Page styles-->
  <style>
    	.bcls-question {
        	color: #2346b7;
        	cursor: pointer;
        	font-size: 1.15em;
          padding-top: 0;
          line-height: .5em;
    	}
    	.bcls-question:hover {
        	text-decoration: underline;
    	}
    	.bcls-answer {
        	display: none;
    	}
		a code {
			text-decoration: none;  
		}
	</style>

	<script>

	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2728311-29', 'auto');
  ga('send', 'pageview');

</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>
</head>

<body>
	<!-- header navbar -->
	<div id="navWrapper" class="fixed"></div>
	<!-- breadcrumbs -->
	<nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
	<!-- search -->
	<div id="searchModal" class="reveal-modal" data-reveal></div>
	<!-- content -->
	<!-- content -->
	<div class="row">
		<div class="sidebar large-2 columns show-for-large-up">
			<div id="sidenav" class="side-nav"></div>
		</div>
		<div id="main" class="large-10 small-12 columns">
			<div id="top" class="section">
				<h1>Brightcove Player SDK for Android: Code Snippets</h1>
					<p>This topic contains a collection of code snippets which you may find useful as a reference while developing with the SDK. For more detailed solutions, see the <a href="https://github.com/BrightcoveOS/android-player-samples">Android player samples</a>.</p>
					<h3>Table of contents</h3>
        
<!--
                <h3 class="bcls-question">Advertising</h3>
                <ul class="bcls-answer">       
                </ul>
-->
        
					<h3 class="bcls-question">Analytics</h3>
					<ul class="bcls-answer">
						<li><a href="#googleanalytics">Google analytics</a></li>
					</ul>
        
					<h3 class="bcls-question">Captions</h3>
					<ul class="bcls-answer">
						<li><a href="#captionsthemes">Setting captions and themes</a></li>
						<li><a href="#defaultcaptions">Setting default captions</a></li>
					</ul>
        
					<h3 class="bcls-question">Concepts</h3>
					<ul class="bcls-answer">
						<li><a href="#methods">Methods: synchronous or asynchronous?</a></li>            
					</ul>
        
					<h3 class="bcls-question">Content security (DRM)</h3>
					<ul class="bcls-answer">  
						<li><a href="#Manually_adding_DRM_content">Manually adding DRM content</a></li>
					</ul>
        
					<h3 class="bcls-question">Live streams</h3>
					<ul class="bcls-answer">
						<li><a href="#durationls">Getting duration for live streams</a></li>            
					</ul>
				
					<h3 class="bcls-question">Player controls</h3>
					<ul class="bcls-answer">
						<li><a href="#fullscreen">Fullscreen mode</a></li>
<!--				  <li><a href="#singleline">Showing single line controls</a></li>-->
					</ul>
				
					<h3 class="bcls-question">Playlists</h3>
						<ul class="bcls-answer">
							<li><a href="#switchingvideo">Switching between videos in a playlist</a></li>            
						</ul>
        
					<h3 class="bcls-question">Video content</h3>
					<ul class="bcls-answer">
						<li><a href="#thumbnailImage">Getting URL for thumbnail images</a></li>
						<li><a href="#localVideos">Playing local videos</a></li>
						<li><a href="#Setting_the_buffer_size">Setting the buffer size</a></li>
						<li><a href="#videoStillImage">Showing/ hiding video still images</a></li>
						<li><a href="#playbackMiddle">Starting playback in the middle of a video</a></li>
						<li><a href="#swapVideo">Swapping videos</a></li>
					</ul>
                
			</div>
			
		  <div id="durationls" class="section">
        <h2>Getting duration for live streams</h2>
			  <p>To get the duration for a live stream, you can use the <a href="../reference/current/javadoc/com/brightcove/player/event/Event.html#MAX_POSITION"><code>MAX_POSITION</code></a>. This gives you the largest seekable position for a live stream (ie., the furthest you can drag the scrollbar). Your code should look similar to this:</p>
        <p><a href="../reference/current/javadoc/com/brightcove/player/event/Event.html#MAX_POSITION"><code data-gist-id="ac85a1305f851b406dde" data-gist-hide-footer="true" data-gist-line="166-171" data-gist-hide-line-numbers="true"></code></a></p>
			</div>
			
		  <div id="thumbnailImage" class="section">
        <h2>Getting URL for thumbnail images</h2>
				<p>You may want to use the thumbnail or video still images from your Brightcove library. Use the following code to get the URL for your images:</p>
				<ul>
					<li><p>If you are using the Edge Catalog (com.brightcove.player.edge.Catalog), you should be able to get the thumbnail URL like this:</p>
						<p><a href="../reference/current/javadoc/com/brightcove/player/model/MetadataObject.html#getProperties()"><code data-gist-id="ac85a1305f851b406dde" data-gist-hide-footer="true" data-gist-line="8" data-gist-hide-line-numbers="true"></code></a></p>
						<p>If you find that the thumbnail image is too small, you can get the video still image instead:</p>
						<p><a href="../reference/current/javadoc/com/brightcove/player/model/MetadataObject.html#getProperties()"><code data-gist-id="ac85a1305f851b406dde" data-gist-hide-footer="true" data-gist-line="9" data-gist-hide-line-numbers="true"></code></a></p>
						</li>
					<li><p>If you are using the legacy Media API Catalog (com.brightcove.player.media.Catalog), you can do this:</p>
						<p><a href="../reference/current/javadoc/com/brightcove/player/model/MetadataObject.html#getProperties()"><code data-gist-id="ac85a1305f851b406dde" data-gist-line="11-18" data-gist-hide-footer="true" data-gist-hide-line-numbers="true"></code></a></p>
						<p>For a larger image, use the video still image:</p>
						<p><a href="../reference/current/javadoc/com/brightcove/player/model/MetadataObject.html#getProperties()"><code data-gist-id="ac85a1305f851b406dde" data-gist-line="20" data-gist-hide-footer="true" data-gist-hide-line-numbers="true"></code></a></p>
					</li>
				</ul>
       </div>
      
      <div id="googleanalytics" class="section">
				<h2>Google analytics</h2>
				<p>If you use the Brightcove player and the catalog class, video analytics will be automatically collected and will appear in your Video Cloud Analytics module. For additional metrics, you can add Google Analytics to your app.</p> 
				
			  <p>To integrate Google Analytics with your app, follow these steps:</p>
				  <ol>
						<li>Add the Google Services plugin to your project.	
						</li>
						<li>Get a Google configuration file and add it to your project.</li>
						<li>Extend the Application and provide a helper method that returns your applications tracker. It should look similar to the <a href="https://github.com/googlesamples/google-services/blob/master/android/analytics/app/src/main/java/com/google/samples/quickstart/analytics/AnalyticsApplication.java">google-services AnaltyicsApplication</a>.</li>
						<li>In a separate class which extends the BrightcovePlayer, obtain the shared tracker instance:
			  			<p><a href="https://developers.google.com/analytics/devguides/collection/android/v4/#set-up-your-project"><code data-gist-id="ac85a1305f851b406dde" data-gist-hide-footer="true" data-gist-line="108-110" data-gist-hide-line-numbers="true"></code></a></p>	
				    </li>
			      <li>Override appropriate methods to log screen changes and/or send custom events for tracking.	
				    </li>
				  </ol>
				  <p>For detailed steps, see Google's document to <a href="https://developers.google.com/analytics/devguides/collection/android/v4/#set-up-your-project">Add Analytics to Your Android App</a>.</p>
      </div>
			
			<div id="fullscreen" class="section">
				<h2>Fullscreen mode</h2>
				<p>You can manage fullscreen mode using code.</p>
				<ul>
					<li><p>Here is the code to set fullscreen mode:</p>
						<p><a href="../reference/current/javadoc/com/brightcove/player/event/EventType.html#ENTER_FULL_SCREEN"><code data-gist-id="ac85a1305f851b406dde" data-gist-hide-footer="true" data-gist-line="2" data-gist-hide-line-numbers="true"></code></a></p>
						</li>
					<li><p>Here is the code to exit fullscreen mode:</p>
						<p><a href="../reference/current/javadoc/com/brightcove/player/event/EventType.html#EXIT_FULL_SCREEN"><code data-gist-id="ac85a1305f851b406dde" data-gist-hide-footer="true" data-gist-line="3" data-gist-hide-line-numbers="true"></code></a></p>
					</li>
				</ul>
      </div>
            
	    <div id="Manually_adding_DRM_content" class="section">
				<h2>Manually adding DRM content</h2>
				<p>As a Perform customer, you may want to use DRM protected content from your own server. You can manually load DRM content as follows:</p>
				<p><a href="../reference/current/javadoc/com/brightcove/player/display/WidevineMediaDrmCallback.html"><code data-gist-id="ac85a1305f851b406dde" data-gist-hide-footer="true" data-gist-line="197-202" data-gist-hide-line-numbers="true"></code></a></p>
				<p class="BCL-aside">Note: You do not need to manually load DRM content in your Brightcove library.</p>
      </div>		
	
	    <div id="methods" class="section">
				<h2>Methods: synchronous or asynchronous?</h2>
				<p>Here are some of the asynchronous methods found in the Native Player SDK for Android:</p>
				<ul>
					<li>The <a href="../reference/current/javadoc/com/brightcove/player/view/BaseVideoView.html#start()"><code>start()</code></a>, <a href="../reference/current/javadoc/com/brightcove/player/event/EventType.html#SEEK_TO"><code>seekTo()</code></a> and <a href="../reference/current/javadoc/com/brightcove/player/view/BaseVideoView.html#stopPlayback()"><code>stopPlayback()</code></a> methods are asynchronous, because they emit an event for other components in the system to handle.</li>
					<li>The <a href="../reference/current/javadoc/com/brightcove/player/view/BaseVideoView.html#clear()"><code>clear()</code></a> method is synchronous with respect to updating the list, but it's asynchronous with respect to unloading the current video.</li>
				</ul>
      </div>
            
			<div id="localVideos" class="section">
				<h2>Playing local videos</h2>
				<p>If you want to play MP4 videos that are stored locally, then you should save them in the application asset folder.</p>
				<p><a href="../reference/current/javadoc/com/brightcove/player/model/Video.html"><code data-gist-id="ac85a1305f851b406dde" data-gist-hide-footer="true" data-gist-line="82-85" data-gist-hide-line-numbers="true"></code></a></p>
				<p class="BCL-aside">You may get an exception error if you try to play MP4 videos stored in the application resource folder (/res/raw).</p>
      </div>
	
	    <div id="Setting_the_buffer_size" class="section">
				<h2>Setting the buffer size</h2>
				<p>You may consider increasing the buffer length to eliminate buffering in the player if the delivery of the next segment is delayed from the CDN. But, you may not be able to do anything better manually that HLS already does.</p>
				<p>HLS is designed to play right away and drop quality if it can't keep up. This way, it does not need to preload a buffer. If it can't keep up, it will load as much of the video as it can at the best quality to prevent interruption.</p> 
				<p>That being said, if you are using the ExoPlayer implementation, you can control the following:</p>
				<ul>
					<li><a href="//docs.brightcove.com/en/video-cloud/mobile-sdks/brightcove-player-sdk-for-android/reference/current/javadoc/com/brightcove/player/display/ExoPlayerVideoDisplayComponent.html"><code>minBufferDurationToSwitchUp</code></a></li>
					<li><a href="//docs.brightcove.com/en/video-cloud/mobile-sdks/brightcove-player-sdk-for-android/reference/current/javadoc/com/brightcove/player/display/ExoPlayerVideoDisplayComponent.html"><code>maxBufferDurationToSwitchDown</code></a></li>
					<li><a href="//docs.brightcove.com/en/video-cloud/mobile-sdks/brightcove-player-sdk-for-android/reference/current/javadoc/com/brightcove/player/display/ExoPlayerVideoDisplayComponent.html"><code>minBufferMs</code></a></li>
					<li><a href="//docs.brightcove.com/en/video-cloud/mobile-sdks/brightcove-player-sdk-for-android/reference/current/javadoc/com/brightcove/player/display/ExoPlayerVideoDisplayComponent.html"><code>minRebufferMs</code></a></li>
				</ul>
				<p>For example, if you want to set the buffer length to 120 seconds, you could set <code>minBufferMs</code> to <code>120 * 1000</code>.</p>
      </div>
			
			<div id="captionsthemes" class="section">
        <h2>Setting captions and themes</h2>
				<p>Currently, the <a href="../reference/current/javadoc/com/brightcove/player/captioning/BrightcoveCaptionPropertiesActivity.html"><code>BrightcoveCaptionPropertiesActivity</code></a> is set in the Brightcove Player SDK’s manifest file, so developers don’t need to specify it in their applications:</p>
				<p><a href="../reference/current/javadoc/com/brightcove/player/captioning/BrightcoveCaptionPropertiesActivity.html"><code data-gist-id="ac85a1305f851b406dde" data-gist-hide-footer="true" data-gist-line="59-71" data-gist-highlight-line="69" data-gist-hide-line-numbers="true"></code></a></p>
      
				<p>The <a href="../reference/current/javadoc/com/brightcove/player/captioning/BrightcoveCaptionPropertiesActivity.html"><code>BrightcoveCaptionPropertiesActivity</code></a> will inherit the platform default theme, as long as you set themes for your app at the <code>&lt;activity&gt;</code> level in your app’s manifest.</p>
      
				<p>If you set a single app theme at the <code>&lt;application&gt;</code> level, then the <a href="../reference/current/javadoc/com/brightcove/player/captioning/BrightcoveCaptionPropertiesActivity.html"><code>BrightcoveCaptionPropertiesActivity</code></a> will inherit the properties of this application-level theme. For some themes, this can cause the activity to look oddly styled or even illegible.</p>
      
				<p>In those cases, you should specify the <a href="../reference/current/javadoc/com/brightcove/player/captioning/BrightcoveCaptionPropertiesActivity.html"><code>BrightcoveCaptionPropertiesActivity</code></a> in your own manifest and apply a theme there, like so:</p>
				<p><a href="../reference/current/javadoc/com/brightcove/player/captioning/BrightcoveCaptionPropertiesActivity.html"><code data-gist-id="ac85a1305f851b406dde" data-gist-hide-footer="true" data-gist-line="74-76" data-gist-highlight-line="75" data-gist-hide-line-numbers="true"></code></a></p>
      </div>
			
			<div id="defaultcaptions" class="section">
				<h2>Setting default captions</h2>
				<p>If your video uses multiple language captions, you can programmatically set a default language when playback starts. Your code should look similar to this:</p>
				<p><a href="../reference/current/javadoc/com/brightcove/player/view/BaseVideoView.html#setSubtitleLocale(java.lang.String)"><code data-gist-id="ac85a1305f851b406dde" data-gist-hide-footer="true" data-gist-line="115-121" data-gist-hide-line-numbers="true"></code></a></p>
      </div>
			
			<div id="videoStillImage" class="section">
        <h2>Showing/ hiding video still images</h2>
				<p>You can show the video still at any time by emitting a <a href="../reference/current/javadoc/com/brightcove/player/event/EventType.html#SET_VIDEO_STILL"><code>SET_VIDEO_STILL</code></a> event with a <a href="../reference/current/javadoc/com/brightcove/player/event/Event.html#VIDEO_STILL"><code>VIDEO_STILL</code></a> property set to the URI of the video still.</p>
				<p>Hiding should happen automatically whenever a <a href="../reference/current/javadoc/com/brightcove/player/event/EventType.html#CUE_POINT"><code>CUE_POINT</code></a>, <a href="../reference/current/javadoc/com/brightcove/player/event/EventType.html#DID_PLAY"><code>DID_PLAY</code></a>, <a href="../reference/current/javadoc/com/brightcove/player/event/EventType.html#DID_SEEK_TO"><code>DID_SEEK_TO</code></a>, <a href="../reference/current/javadoc/com/brightcove/player/event/EventType.html#WILL_INTERRUPT_CONTENT"><code>WILL_INTERRUPT_CONTENT</code></a>, <a href="../reference/current/javadoc/com/brightcove/player/event/EventType.html#ACTIVITY_STOPPED"><code>ACTIVITY_STOPPED</code></a>, or <a href="../reference/current/javadoc/com/brightcove/player/event/EventType.html#FRAGMENT_STOPPED"><code>FRAGMENT_STOPPED</code></a> event occurs.</p>
				<p>In general, we try to promote doing things via events, rather than direct method calls.</p>
			</div>
			
			<div id="playbackMiddle" class="section">
        <h2>Starting playback in the middle of a video</h2>
				<p>Sometimes, you may need to start playback from somewhere in the middle of the video. To do this, you can call <a href="../reference/current/javadoc/com/brightcove/player/view/BaseVideoView.html#seekTo(int)"><code>BrightCoveVideoView.seekTo()</code></a> before starting playback.</p>
				<p><a href="../reference/current/javadoc/com/brightcove/player/view/BaseVideoView.html#seekTo(int)"><code data-gist-id="ac85a1305f851b406dde" data-gist-hide-footer="true" data-gist-line="177-192" data-gist-hide-line-numbers="true"></code></a></p>
      </div>
			
<!--
			<div id="singleline" class="section">
                <h2>Showing single line controls</h2>
                <p>By default, the player controls will appear as a single line in landscape mode and appear stacked in portrait mode. You can override this behavior and display player controls as a single line in portrait mode.</p>
				<p>Follow these steps:</p>
				<ul>
					<li></li>
				</ul>
				
				<p><a href="../reference/current/javadoc/com/brightcove/player/view/BaseVideoView.html#setSubtitleLocale(java.lang.String)"><code data-gist-id="ac85a1305f851b406dde" data-gist-hide-footer="true" data-gist-line="115-121"></code></a></p>
            </div>
-->
            
			<div id="swapVideo" class="section">
				<h2>Swapping videos</h2>
				<p>This example shows one approach for swapping videos in the player.</p>
				<h3>Using single videos</h3>
				<p>Since the <a href="../reference/current/javadoc/com/brightcove/player/view/BaseVideoView.html#clear()"><code>clear()</code></a> method is asynchronous when unloading the current video, you need to wait before adding a new video to the player. Here are two options.</p>
				<ul>
					<li><p>Since the time to fetch a video from Video Cloud should dwarf the time to update the playlist, you can try something like this:</p>
						<p><a href="../reference/current/javadoc/com/brightcove/player/view/BrightcoveVideoView.html"><code data-gist-id="ac85a1305f851b406dde" data-gist-hide-footer="true" data-gist-line="23-32" data-gist-hide-line-numbers="true"></code></a></p>
					</li>
					<li><p>Another approach is to wait for an event:</p>
						<p><a href="../reference/current/javadoc/com/brightcove/player/event/EventType.html#DID_CHANGE_LIST"><code data-gist-id="ac85a1305f851b406dde" data-gist-hide-footer="true" data-gist-line="36-47" data-gist-hide-line-numbers="true"></code></a></p>
					</li>
				</ul>
			
        <h3>Using a playlist</h3>
				<p>If you are working with a playlist, keep in mind that calling the <a href="../reference/current/javadoc/com/brightcove/player/view/BaseVideoView.html#clear()"><code>clear()</code></a> method removes all the elements of the playlist. So, you may get an <code>IndexOutOfBounds</code> exception when trying to jump to the first video in the playlist.</p>
                <p>Instead, you can try something like this:</p>
				<p><a href="../reference/current/javadoc/com/brightcove/player/view/BrightcoveVideoView.html"><code data-gist-id="ac85a1305f851b406dde" data-gist-hide-footer="true" data-gist-line="52-54" data-gist-hide-line-numbers="true"></code></a></p>  
      </div>
			
			<div id="switchingvideo" class="section">
				<h2>Switching between videos in a playlist</h2>
				<p>If you are using a playlist, you can use the following code to switch between videos in the playlist:</p>
				<p><a href="../reference/current/javadoc/com/brightcove/player/model/Playlist.html"><code data-gist-id="ac85a1305f851b406dde" data-gist-hide-footer="true" data-gist-line="127-160" data-gist-hide-line-numbers="true"></code></a></p>
      </div>
            
            
			<div class="section" id="BCLreferences">
					<h2>Related Topics</h2>
					<ul>
						<li><a href="../guides/studio-android-sdk-quick-start.html">Quick Start to Brightcove Player SDK for Android</a></li>
					</ul>
			</div>
      
		</div>
	</div>
	<!-- bcl scripts -->
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/2.2/gist-embed.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.3/fastclick.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.3/handlebars.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
	<script src="/en/scripts/log.js"></script>
	<script src="/en/scripts/docs-nav-data.min.js"></script>
	<script src="/en/scripts/bcls-doc-site.js"></script>
  <script src="/en/scripts/bclsfaq.js"></script>
	<script>
		$(document).foundation();
	</script>
	<script type="text/javascript">
		/******** Any scripts specific to page samples should go here *********/
	</script>
	
    
<iframe id="CSAT" src="http://survey.clicktools.com/app/survey/go.jsp?iv=3poon3e7e9spn&q1=[articleURL]" style="margin-left:25%; padding-bottom:20px;width:550px;height:475px;border:none"></iframe>
<script>
    
    var cSat = document.getElementById('CSAT'),
        cSatSrc = cSat.getAttribute('src'),
        pageurl = window.location.href;
    cSat.setAttribute('src', cSatSrc.replace('[articleURL]', pageurl));
    
</script>
<br><br>
<div class="footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a></div>
<script>
var feedbackMail = document.getElementById("feedbackMail");
feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
</script>
</body>

</html>

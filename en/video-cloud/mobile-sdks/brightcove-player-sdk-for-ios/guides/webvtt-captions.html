<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
    <!-- change title to match the h1 heading -->
    <title id="bclPageTitle">Using WebVTT Captions</title>
    <link href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" rel="stylesheet" type="text/css" />
    <script src="//use.edgefonts.net/source-code-pro.js"></script>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/font-hack/2.015/css/hack-extended.min.css">

    <link rel="stylesheet" type="text/css" href="/en/styles/bcls-doc-site.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/atelier-forest.light.min.css">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/font-hack/2.015/css/hack-extended.min.css">

    <script>
        (function(i, s, o, g, r, a, m) {
        	i['GoogleAnalyticsObject'] = r;
        	i[r] = i[r] || function() {
        		(i[r].q = i[r].q || []).push(arguments)
        	}, i[r].l = 1 * new Date();
        	a = s.createElement(o),
        	m = s.getElementsByTagName(o)[0];
        	a.async = 1;
        	a.src = g;
        	m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

        ga('create', 'UA-2728311-29', 'auto');
        ga('send', 'pageview');
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>
</head>

<body>
    <!-- header navbar -->
    <div id="navWrapper" class="fixed"></div>
    <!-- breadcrumbs -->
    <nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
    <!-- search -->
    <div id="searchModal" class="reveal-modal" data-reveal></div>
    <!-- content -->
    <!-- content -->
    <div class="row">
        <div class="sidebar large-2 columns show-for-large-up">
            <div id="sidenav" class="side-nav"></div>
        </div>
        <div id="main" class="large-10 small-12 columns">
          <div class="section" id="top">
            <h1>Using WebVTT Captions</h1>
            <p>This topic discusses how to configure WebVTT captions for HLS videos using the Brightcove Player SDK for iOS and tvOS. The <a href="https://github.com/brightcove/brightcove-player-sdk-ios-sidecarsubtitles">Sidecar Subtitles plugin</a> enables you to do this.</p>
						<div class="BCL-aside">
								<p>Notes for the Player SDKs for iOS and tvOS:</p>
								<ul>
										<li>The Sidecar WebVTT plugin supports playback over AirPlay with captions.</li>
										<li>The Native SDKs do not currently support Sidecar WebVTT captions if you are using remote assets.</li>
								</ul>
						</div>
					</div>
					
					<div id="HLS_content" class="section">
				    <h2>HLS content</h2>
						<p>As part of the HLS spec, you need to specify a timestamp offset for WebVTT captions. To do this, add an <code>X-TIMESTAMP-MAP</code> header with the correct <code>MPEGTS</code> value in your WebVTT files.</p>
						<p>If you are missing this header or the value is not correct, you may see that your subtitles are not in sync with the video. This is because when the <code>X-TIMESTAMP-MAP</code> header is missing, the client assumes a default timestamp offset of <strong>0</strong>. For example, the difference between using a value of <strong>900000</strong> and <strong>0</strong> can cause your captions to be off by 10 seconds.</p>
						<p><code>X-TIMESTAMP-MAP</code> format:</p>
						<p><code data-gist-id="d59006640cce4709fdc2" data-gist-line="2" data-gist-hide-footer="true"></code></p>
						<p>Here is a sample WebVTT file:</p>
						<p><code data-gist-id="d59006640cce4709fdc2" data-gist-line="5-11" data-gist-highlight-line="6" data-gist-hide-footer="true"></code></p>	
					</div>
					
					<div id="Determine_the_offset_value" class="section">
				    <h2>Determine the offset value</h2>
						<p>If you are using Brightcove's Dynamic Ingest or Zencoder to transcode your content, use an offset value of <code>MPEGTS:900000</code>.</p>
						<p>If you are using an encoding system other than Zencoder, it is best to obtain the value needed. Apple recommends that you set the offset to match your encoded video.</p>
						<p>The <code>MPEGTS</code> value corresponds to the presentation timestamp (PTS) value of the MPEG frame at the given <code>LOCAL</code> time. If you are using Brightcove's older transcoding systems, you may find that you can use a value of <code>MPEGTS:0</code>.</p>
						<p>For example, to get the offset value, you can make a request similar to this:</p>
						<p>Request:</p>
						<p><code data-gist-id="d59006640cce4709fdc2" data-gist-line="17-18"></code></p>
						<p>Response:</p>
						<p><code data-gist-id="d59006640cce4709fdc2" data-gist-line="21-24" data-gist-highlight-line="21" data-gist-hide-footer="true"></code></p>
						<p class="BCL-aside">Note:  Adding the X-TIMESTAMP-MAP header may cause inconsistencies on other platforms, such as Windows Mobile applications. Make sure to test across all platforms after adding the offset header. The addition of this header tag is an HLS spec requirement, and not a WebVTT spec parameter.</p>
					</div>
					
					
					<div class="section" id="Resources">
						<h2>Resources</h2>
						<ul>
							<li>For details about using WebVTT with HLS, see the <a href="https://tools.ietf.org/html/draft-pantos-http-live-streaming-18#section-3">HTTP Live Streaming</a> document.</li>
							<li>For more information about the WebVTT format, see the <a href="https://w3c.github.io/webvtt/">WebVTT: The Web Video Text Tracks Format</a> document.</li>
								
						</ul>
					</div>
					
			  </div>
	  </div>
              
    <!-- bcl scripts -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/2.2/gist-embed.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.3/handlebars.min.js"></script>

    <script src="/en/scripts/docs-nav-data.min.js"></script>
    <script src="/en/scripts/bcls-doc-site.js"></script>
    <script>
        $(document).foundation();
    </script>
<iframe id="CSAT" src="http://survey.clicktools.com/app/survey/go.jsp?iv=3poon3e7e9spn&q1=[articleURL]" style="margin-left:25%; padding-bottom:20px;width:550px;height:475px;border:none"></iframe>
<script>
    
    var cSat = document.getElementById('CSAT'),
        cSatSrc = cSat.getAttribute('src'),
        pageurl = window.location.href;
    cSat.setAttribute('src', cSatSrc.replace('[articleURL]', pageurl));
    
</script>
<br><br>
<div class="footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a></div>
<script>
var feedbackMail = document.getElementById("feedbackMail");
feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
</script>
</body>

</html>

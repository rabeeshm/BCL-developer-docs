<!DOCTYPE html>
<html lang="en">

<head>
	
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
	<!-- change title to match the h1 heading -->
	<title>Merged Configurations API</title>
	<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" />
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/normalize.css" />
	<script src="//use.edgefonts.net/source-code-pro.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/font-hack/2.015/css/hack-extended.min.css">

	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/atelier-forest.light.min.css" />
    <link rel="stylesheet" type="text/css" href="/en/styles/bcls-doc-site.css" />
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/font-hack/2.015/css/hack-extended.min.css">

	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2728311-29', 'auto');
  ga('send', 'pageview');

</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>
</head>

<body>
	<!-- header navbar -->
	<div id="navWrapper" class="fixed"></div>
	<!-- breadcrumbs -->
	<nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
	<!-- search -->
	<div id="searchModal" class="reveal-modal" data-reveal></div>
	<!-- content -->
	<!-- content -->
	<div class="row">
		<div class="sidebar large-2 columns show-for-large-up">
			<div id="sidenav" class="side-nav"></div>
		</div>
		<div id="main" class="large-10 small-12 columns">
			<div id="top" class="section">
				<h1>Merged Configurations API</h1>
				<!-- Place document intro sentence(s) here -->
				<p>There are four ways to combine published and preview versions of a parent and child player. The four combinations are:</p>
				<ul>
				    <li>published parent - published child</li>
				    <li>published parent - preview child</li>
				    <li>preview parent - published child</li>
				    <li>preview parent - preview child</li>
				</ul>
				<p>This document will detail how to use the merged configurations API to view the merged JSON configurations for each possible combination. Note that this is simply a way to <strong>view</strong> merged configurations, and has no effect on any player. Although using this API is not a common use case for most customers, it can be helpful in complex situations, for instance where you are using advanced array merging using <code>array_prepend</code> or <code>array_append</code>. This array merging technique is detailed in the <a href="http://docs.brightcove.com/en/video-cloud/player-management/guides/embeds.html#arrayfields">Embed APIs Guide</a>.</p>
			</div>
      <div id="basic" class="section">
        <h2>Basic functionality</h2>
        <p>The usage of the merged configurations API can be a bit confusing if one does not thoroughly understand the basic functionality in dealing with parent/child creation and published (master)/preview players. Here is a quick review of some basic rules to be sure you are up to speed. For this explanation, the common beginning of the endpoints, <code>https://players.api.brightcove.com/v1/accounts/$ACCOUNT_ID/</code>, is left off to make it easier to focus on the most significant portion.</p>
				<ul>
				    <li>To create a child player you use the HTTP <code>POST</code> method with the <code>...players/$PLAYER_ID/embeds</code> endpoint.</li>
				    <li>To create a preview version of a child player you use the HTTP <code>PATCH</code> method with the <code>...players/$PLAYER_ID/embeds/$EMBED_ID/configuration</code> endpoint.</li>
				    <li>To view the configuration of the published (master) version of the child player use the HTTP <code>GET</code> method with the <code>...players/$PLAYER_ID/embeds/$EMBED_ID/configuration/<strong>master</strong></code> endpoint.</li>
				    <li>To view the configuration of the preview version of the child player use the HTTP <code>GET</code> method with the <code>...players/$PLAYER_ID/embeds/$EMBED_ID/configuration/<strong>preview</strong></code> endpoint.</li>
				</ul>
      </div>
			<div id="create" class="section">
				<h2>Create parent/child players</h2>
				<p>To set the stage for demonstrating the use of the merged configurations API, a bit of groundwork need to be laid. First, assume you have a published, parent player with a configuration as shown in the JSON object below.</p>
				<p><code data-gist-id="89575f48ac017bcaa476" data-gist-hide-footer="true" data-gist-line="1-25"></code></p>
				<p> This configuration defines the poster with two tigers to be displayed before playback, as shown in this screenshot.</p>
				<div><img src="assets/merged-configurations-parent.png"></div>
				<p>Next, a child player is created using the following curl statement.</p>
				<p><code data-gist-id="89575f48ac017bcaa476" data-gist-hide-footer="true" data-gist-line="30-47"></code></p>
				<p>Looking at the <strong>published</strong> version (the child is automatically published when created) of the child player, the configuration shows the video source and poster were overridden by the child. That configuration and a screenshot of the displayed poster appear here:</p>
				<p><code data-gist-id="89575f48ac017bcaa476" data-gist-hide-footer="true" data-gist-line="52-62"></code></p>
				<div><img src="assets/merged-configurations-child.png"></div>
				<p>It should be of no surprise that the proceeding configuration information shows the child player has a new video source and poster.</p>
				<p>Finally, the child player will be updated. This will create a preview version of the child. The following curl statement will be used to do that. The only property affected is the poster which is a picture of splashing water.</p>
				<p><code data-gist-id="89575f48ac017bcaa476" data-gist-hide-footer="true" data-gist-line="66-77"></code></p>
				<p>Now use the following curl statement to retrieve the child player's preview version's configuration.</p>
				<p><code data-gist-id="89575f48ac017bcaa476" data-gist-hide-footer="true" data-gist-line="81-85"></code></p>
				<p>The configuration of the child player's preview version shows the video source is the same as previously shown, but the poster was changed. That configuration, and a screenshot of the displayed poster appear here:</p>
				<p><code data-gist-id="89575f48ac017bcaa476" data-gist-hide-footer="true" data-gist-line="89-99"></code></p>
				<div><img src="assets/merged-configurations-child-preview.png"></div>
				<p>At this point you now have the players needed to demonstrate the merged combinations API.</p>
				<p class="BCL-aside">Note: To reiterate parent/child functionality, the overlay with the text <em>First Plugin Working!</em> defined at the parent was inherited by the child, and the updated version of that child.</p>
			</div>
      <div id="section-name" class="section">
        <h2>Using the API</h2>
        <p>As stated in the introductory material of this page, the merged configurations API is used to view the merged JSON configurations for combinations of parent/child and published/preview players. The general format of the endpoint to use is:</p>
				<p><code data-gist-id="89575f48ac017bcaa476" data-gist-hide-footer="true" data-gist-line="27"></code></p>
				<p>The key part of the endpoint is the ending portion that contains two query parameters:</p>
				<p><code>/merged?playerBranch=$PLAYER_BRANCH&embedBranch=$CHILD_BRANCH</code></p>
				<p>The values for both <code>$PLAYER_BRANCH</code> and <code>$CHILD_BRANCH</code> are the strings <strong>master</strong> and <strong>preview</strong>. (Remember <em>master</em> is equivalent to the published version.) An actual endpoint for use in a curl statement using the <code>published</code> version of the parent and the <code>published</code> version of the child is:</p>
				<p><code data-gist-id="89575f48ac017bcaa476" data-gist-hide-footer="true" data-gist-line="109"></code></p>
				<p class="BCL-aside">Note: The quotation marks around the endpoint are needed as curl will cut off the URL at the ampersand (&) separating the query parameters without the quotes.</p>
				<p>The following curl statement which utilizes the merged configurations API (lines 104-109) and the resulting configuration JSON (113-137) show the published parent and published child merged together, based on the players built above. Note that all the parent player's configuration is inherited, except that overridden at the child, in this case the poster and video source.</p>
				<p><code data-gist-id="89575f48ac017bcaa476" data-gist-hide-footer="true" data-gist-line="104-137" data-gist-highlight-line="116"></code></p>
				<p>The following curl statement which utilizes the merged configurations API (lines 141-146) and resulting configuration JSON (150-174) show the published parent and preview child merged together, based on the players built above. </p>
				<p><code data-gist-id="89575f48ac017bcaa476" data-gist-hide-footer="true" data-gist-line="141-174" data-gist-highlight-line="153"></code></p>
				<p>The highlighted lines show the only difference in the configurations, which makes perfect sense as the only update to the child player (which created the preview version) was a change to the poster.</p>
      </div>
			<div id="inaction" class="section">
				<h2>Players in action</h2>
				<p>As you have seen, this API will display the JSON configurations of the merged combinations of players. If you wish to see a player combination actually playing a video you can use a URL in the following form:</p>
				<p><code data-gist-id="89575f48ac017bcaa476" data-gist-hide-footer="true" data-gist-line="179"></code></p>
				<p>Just as in the curl endpoint, {ParentBrach} and {ChildBranch} need to be replaced by either <strong>master</strong> or <strong>preview</strong>.</p>
			</div>
			<div class="section" id="BCLreferences">
				<h2>Related Topics</h2>
				<ul>
					<li><a href="//docs.brightcove.com/en/video-cloud/player-management/guides/embeds.html">Embed APIs Guide</a></li>
				</ul>
			</div>
		</div>
	</div>
	<!-- bcl scripts -->
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/2.2/gist-embed.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.3/handlebars.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
	<script src="/en/scripts/log.js"></script>
	<script src="/en/scripts/docs-nav-data.min.js"></script>
	<script src="/en/scripts/bcls-doc-site.js"></script>
	<script src="/en/scripts/bc-mapi.js"></script>
	<script>
		$(document).foundation();
	</script>
	<script type="text/javascript">
		/******** Any scripts specific to page samples should go here *********/
	</script>
	
    
<iframe id="CSAT" src="http://survey.clicktools.com/app/survey/go.jsp?iv=3poon3e7e9spn&q1=[articleURL]" style="margin-left:25%; padding-bottom:20px;width:550px;height:475px;border:none"></iframe>
<script>
    
    var cSat = document.getElementById('CSAT'),
        cSatSrc = cSat.getAttribute('src'),
        pageurl = window.location.href;
    cSat.setAttribute('src', cSatSrc.replace('[articleURL]', pageurl));
    
</script>
<br><br>
<div class="footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a></div>
<script>
var feedbackMail = document.getElementById("feedbackMail");
feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
</script>
</body>

</html>

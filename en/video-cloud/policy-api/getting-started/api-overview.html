<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
    <!-- change title to match the h1 heading -->
    <title>Policy API Overview</title>
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/normalize.css" />
    <script src="//use.edgefonts.net/source-code-pro.js"></script>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/font-hack/2.015/css/hack-extended.min.css">

    <link rel="stylesheet" type="text/css" href="/en/styles/bcls-doc-site.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/atelier-forest.light.min.css">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/font-hack/2.015/css/hack-extended.min.css">

    <script>
        (function(i, s, o, g, r, a, m) {
            i['GoogleAnalyticsObject'] = r;
            i[r] = i[r] || function() {
                (i[r].q = i[r].q || []).push(arguments)
            }, i[r].l = 1 * new Date();
            a = s.createElement(o),
                m = s.getElementsByTagName(o)[0];
            a.async = 1;
            a.src = g;
            m.parentNode.insertBefore(a, m)
        })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');
        ga('create', 'UA-2728311-29', 'auto');
        ga('send', 'pageview');
    </script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>
</head>

<body>
    <!-- header navbar -->
    <div id="navWrapper" class="fixed"></div>
    <!-- breadcrumbs -->
    <nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
    <!-- search -->
    <div id="searchModal" class="reveal-modal" data-reveal></div>
    <!-- content -->
    <!-- content -->
    <div class="row">
        <div class="sidebar large-2 columns show-for-large-up">
            <div id="sidenav" class="side-nav"></div>
        </div>
        <div id="main" class="large-10 small-12 columns">
            <div id="top" class="section">
                <h1>Policy API Overview</h1>
                <p>The Policy API is used to create or get policy keys that can be used to access the <a href="//docs.brightcove.com/en/video-cloud/playback-api/index.html">Playback API</a>.</p>
                <p class="BCL-aside">Note: policy keys are generated for Brightcove Players automatically when you create them. You only need to generate policy keys directly using this API if you wish to get a key to access the Playback API without creating a player - typically this would be for apps created using the <a href="http://docs.brightcove.com/en/video-cloud/mobile-sdks/index.html">//docs.brightcove.com/en/video-cloud/mobile-sdks/index.html</a>. See <a href="//docs.brightcove.com/en/video-cloud/player-management/guides/policy-key.html">Policy Keys</a> for instructions on how to obtain the policy key for any Brightcove Player.</p>
            </div>
            <div class="section" id="faq">
                <h2>FAQ</h2>
                <p>Here are some questions about the Policy API that we commonly get.</p>
                <dl>
                    <dt>Can policy keys be created for multiple accounts, or only one?</dt>
                    <dd>Policy keys allow access to videos and playlist for one account. If you have multiple accounts, you need to create policy keys for each one.</dd>
                    <dt>Do policy keys expire?</dt>
                    <dd>No, policy keys are good forever. If you need to revoke a policy key, you must contact <a href="//support.brightcove.com/en/contact">Brightcove Support</a> - include the account id and the policy key you wish to revoke in the request.</dd>
                    <dt>Will policy keys work for all users on the account?</dt>
                    <dd>Yes, anyone who has the policy key can use it.</dd>
                </dl>
            </div>
            <div class="section" id="baseURL">
                <h2>Base URL</h2>
                <p>The base URL for the Policy API is:</p>
                <pre><code>https://policy.api.brightcove.com/v1</code></pre>

                <h3>Account path</h3>
                <p>In all cases, requests will be made for a specific Video Cloud Account. So, you will always add <code>/accounts/</code> followed by your account id to the base URL:</p>
<pre><code>https://policy.api.brightcove.com/v1<strong>/accounts/{account_id}</strong></code></pre>
            </div>
            <div id="authenticaion" class="section">
                <h2>Authentication</h2>
                <p>Requests are authenticated by a access token passed in an <code>Authorization</code> header:</p>
                <pre><code>Authorization: Bearer {access_token}</code></pre>
                <p>To get access tokens, you will need to have client credentials for the account that have permissions for <code>video-cloud/player/all</code> operations. You can obtain your client credentials (a <code>client_id</code> and <code>client_secret</code>) through <a href="//support.brightcove.com/en/video-cloud/docs/managing-api-authentication-credentials">Studio (recommended)</a> or directly via the <a href="//docs.brightcove.com/en/video-cloud/oauth-api/getting-started/oauth-api-overview.html">Brightcove OAuth API</a>.</p>
                <p>Once you have client credentials, you can <a href="//docs.brightcove.com/en/video-cloud/oauth-api/guides/get-token.html">obtain temporary access tokens from the OAuth API</a>.</p>
            </div>
            <div class="section" id="createPolicy">
                <h2>Create a policy key</h2>
                <p>To create a new policy key, make a POST request to:</p>
<pre><code>https://policy.api.brightcove.com/v1/accounts/{account_id}/policy_keys</code></pre>
                <h3>Request body (concise format)</h3>
                <p>In the request body, include the JSON for the policy - this is the concise format (see the full format below):</p>
<pre><code>{
    "key-data": {
        "account-id": "{account_id}"
    }
}</code></pre>
                <p>This is the most basic policy, which restricts access to the account, you must include this in any policy you create. The account id here must match the account id in the request URL, or an error will be returned.</p>
                <h4>Domain restriction</h4>
                <p>In addition to limiting access to the account, you can also limit access to specific domains by adding the <code>allowed-domains</code> key:</p>
<pre><code>{
    "key-data": {
        "account-id": "123456789001",
        "allowed-domains": [
            "http://www.abc.com",
            "https://www.abc.com",
            "http://www.xyz.com",
            "https://www.xyz.com"
        ]
    }
}</code></pre>
                <p class="BCL-aside">Note: any key for your account may be used to access the account content via the Playback API, so if you are using domain restriction, we highly recommend that you domain restrict all of your players.</p>
                <h3>Request body (full format)</h3>
                <p>You can also use the full format for the request body. In this format, you include a <code>policies</code> array of policy objects, which allow or deny access to the Playback API based on logical patterns. A <code>pattern</code> is an object whose only property is a logical operator. The following logical operators can be used:</p>
                <ul>
                    <li><code>=</code> equals</li>
                    <li><code>!=</code> does not equal</li>
                    <li><code>contains?</code> contains</li>
                    <li><code>not-contains?</code> does not contain</li>
                </ul>
                <p>Logical operators can be combined using <code>and</code> or <code>or</code>.</p>
                <p>The other property of a policy object is <code>effect</code>, which specifies whether those domains or accounts matching the pattern are allowed or denied access to the Playback API. The value will be either <code>allow</code> or <code>deny</code>.</p>
                <p>Here is the full format version of the policy with domain restriction above:</p>
<pre><code>{
    "policies": [
        {
            "pattern": {
                "!=": [
                    "123456789001"
                ]
            },
            "effect": "deny"
        },
        {
            "pattern": {
                "not-contains?": [
                    [
                        "http://www.abc.com",
                        "https://www.abc.com",
                        "http://www.xyz.com",
                        "https://www.xyz.com"
                    ],
                    "[request.domain]"
                ]
            },
            "effect": "deny"
        }
    ]
 }</code></pre>
                <h3>Response</h3>
                <p>The response to create requests will be JSON that includes the encrypted <code>key-string</code> that you can use to authenticate requests to the Playback API, as well as the policy associated with the key:</p>
<pre><code>{
    "key-data": {
        "account-id": "57838016001"
    },
    "key-string": "BCpkADawqM0NK0Rq8n6sEQyWykemrqeSmIQqqVt3XBrdpl8TYlvqN3hwKphBJRnkPgx6WAbozCW_VgTOBCNf1AQRh8KnmXSXfveQalRc5-pyNlSod5XzP99If2U",
    "policies": [
        {
            "effect": "deny",
            "pattern": {
                "!=": [
                    "[request.params.account-id]",
                    "57838016001"
                ]
            }
        }
    ]
}</code></pre>
                <p class="BCL-aside">Note: the <code>policies</code> in responses is just a different expression of the <code>key-data</code> for the policy, for information only - you do not need to use it in any way.</p>
            </div>
            <div class="section" id="getPolicy">
                <h2>Policy requests</h2>
                <p>To retrieve the policy object associated with a <code>key-string</code>, make a GET request to:</p>
<pre><code>/accounts/v1/{account_id}/policy_keys/{key_string}]</code></pre>
                <p>The response will be JSON representation of the key-string and policy:</p>
<pre><code>{
    "key-data": {
        "account-id": "57838016001"
    },
    "key-string": "BCpkADawqM0NK0Rq8n6sEQyWykemrqeSmIQqqVt3XBrdpl8TYlvqN3hwKphBJRnkPgx6WAbozCW_VgTOBCNf1AQRh8KnmXSXfveQalRc5-pyNlSod5XzP99If2U",
    "policies": [
        {
            "effect": "deny",
            "pattern": {
                "!=": [
                    "[request.params.account-id]",
                    "57838016001"
                ]
            }
        }
    ]
}</code></pre>
            </div>
            <div class="section" id="revokePolicy">
                <h2>Revoke a policy</h2>
                <p>If you need to revoke an existing policy, submit a request to <a href="http://support.brightcove.com/en/contact">Brightcove Support</a>. Include the key string for the policy you want to revoke in your request.</p>
            </div>
            <div class="section" id="relatedTopics">
                <h2>Related Topics</h2>
                <ul>
                    <li><a href="../references/versions/v1/">Policy API Reference</a></li>
                    <li><a href="./quick-start.html">Policy API Quick Start</a></li>
                    <li><a href="//docs.brightcove.com/en/video-cloud/playback-api/getting-started/overview-playback.html">Playback API Overview</a></li>
                </ul>
            </div>
        </div>
    </div>
    <!-- bcl scripts -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/2.2/gist-embed.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.3/handlebars.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
    <script src="//docs.brightcove.com/en/scripts/log.js"></script>
    <script src="//docs.brightcove.com/en/scripts/docs-nav-data.min.js"></script>
    <script src="//docs.brightcove.com/en/scripts/bcls-doc-site-v1.js"></script>
    <script src="//docs.brightcove.com/en/scripts/bc-mapi.js"></script>
    <script>
        $(document).foundation();
    </script>
    <script type="text/javascript">
        /******** Any scripts specific to page samples should go here *********/
    </script>
    <div class="footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a>
    </div>
    <script>
        var feedbackMail = document.getElementById("feedbackMail");
        feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
    </script>
</body>

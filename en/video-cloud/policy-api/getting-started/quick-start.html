<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
  <!-- change title to match the h1 heading -->
  <title>Quick Start to Policy API</title>
  <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" />
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/normalize.css" />
  <script src="//use.edgefonts.net/source-code-pro.js"></script>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/font-hack/2.015/css/hack-extended.min.css">

  <link rel="stylesheet" type="text/css" href="/en/styles/bcls-doc-site.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/atelier-forest.light.min.css">
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/font-hack/2.015/css/hack-extended.min.css">

  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-2728311-29', 'auto');
    ga('send', 'pageview');

  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>
</head>

<body>
  <!-- header navbar -->
  <div id="navWrapper" class="fixed"></div>
  <!-- breadcrumbs -->
  <nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
  <!-- search -->
  <div id="searchModal" class="reveal-modal" data-reveal></div>
  <!-- content -->
  <!-- content -->
  <div class="row">
    <div class="sidebar large-2 columns show-for-large-up">
      <div id="sidenav" class="side-nav"></div>
    </div>
    <div id="main" class="large-10 small-12 columns">
      <div id="top" class="section">
        <h1>Quick Start to the Policy API</h1>
        <!-- Place document intro sentence(s) here -->

        <p>In this quick start you will perform the following tasks:</p>
        <ul>
          <li>Create a policy object</li>
          <li>Retrieve a policy object</li>
        </ul>
        <p class="BCL-aside">For details on the API used in this document you can view the <a href="//docs.brightcove.com/en/video-cloud/cms-api/getting-started/overview-cms.html">Content Management System API Overview</a> document and the <a href="//docs.brightcove.com/en/video-cloud/cms-api/references/cms-api/versions/v1/index.html">Content Management System API</a> reference.</p>
      </div>
      <div id="api-tester" class="section">
        <h2>API Tester</h2>
        <p>The Policy API's security is implemented using OAuth2. To permit you to get started using the Policy API as quickly as possible, the API calls in this quick start will use a shell script called <strong>api-tester.sh</strong> to get access tokens and make the API calls. The api-tester script uses cURL to make http calls. cURL is built in on Mac OS X and all Unix/Linux systems. To get cURL on Windows, see <a href="../../concepts/curl/curl.html">Setting up cURL</a>. Then download the <a href="../../oauth-api/assets/api-tester.sh.zip">api-tester.sh script</a></p>
        <p class="BCL-aside">You can see the full code for the shell script at <a href="../../oauth-api/guides/get-token.html#codeSamples">Getting Access Tokens</a>.</p>
        <h3>Running the shell script</h3>
        <p>After you download the shell script, unzip it wherever you like, and then go to a command line in the same folder. To run the script, type:</p>
        <pre><code>bash api-tester.sh</code></pre>
        <p>Each time you run the script, it will prompt you for 5 variables:</p>
        <ul>
          <li>Client ID (see the <a href="#obtaincredentials">next section</a> on obtaining client credentials)</li>
          <li>Client Secret (see the <a href="#obtaincredentials">next section</a> on obtaining client credentials)</li>
          <li>The full API call (example: <code>https://policy.api.brightcove.com/v1/accounts/12345678/policy_keys</code></li>
          <li>The request verb - one of the following: GET | POST </li>
          <li>Request data - used for POST, PATCH, and PUT; for GET and DELETE requests, you will leave this blank and just press <strong>return</strong></li>
        </ul>
        <p>For each part of this quick start, you will be given the values for each of these inputs to use with your account.</p>
      </div>
      <div id="obtaincredentials" class="section">
        <h2>Obtain credentials</h2>
        <p>To use the Policy API you will need proper credentials. In this quick start, you will work on a Brightcove test account, so you will not need to complete this step, but be aware that you will need to get client credentials when you work on your own account.</p>
        <ol>
          <li>To obtain credentials follow the instructions in <a href="../../oauth-api/guides/managing-api-credentials.html">Managing API Credentials</a>. This is the recommended way of obtaining your client credentials. The permissions you will need are <strong>Player Read</strong> and <strong>Player Read/Write</strong>:
            <div><img src="./assets/quick-start-required-permissions.png" width="412" height="140"></div>
            <p>You can also obtain credentials using the OAuth API, following the instructions in one of the guides listed below:</p>
              <ul>
                <li><a href="//docs.brightcove.com/en/video-cloud/oauth-api/guides/get-client-credentials.html">OAuth: Get Client Credentials Using CURL</a></li>
                <li><a href="//docs.brightcove.com/en/video-cloud/oauth-api/guides/get-client-credentials-postman.html">OAuth: Get Client Credentials Using Postman</a></li>
              </ul>
            </li>
          </ol>
        </div>

  <div id="createPolicy" class="section">
    <h2>Create a policy</h2>
    <p>One of the basic tasks you will want to create a policy. The fundamental call information is:</p>
    <ul>
      <li>HTTP method: <code>POST</code></li>
      <li>Endpoint: <code>https://policy.api.brightcove.com/v1/accounts/<em>{YOUR_ACCOUNT_ID}</em>/policy_keys</code></li>
    </ul>
    <p>You will need to pass data defining the policy in the request body. The simplest policy looks like this:</p>
<pre><code>{
  "key-data": {
      "account-id": "{account_id}"
  }
}</code></pre>
    <ol start="2">
      <li>You will now use the api-tester.sh script to retrieve all videos. Run <code>bash api-tester.sh</code> using the input values below:
      <p>client_id:</p>
        <pre><code>553d4903-4547-435d-944c-2c8e2f6abc5d</code></pre>
      <p>client_secret:</p>
        <pre><code>ENBQH6pHfJQub7oR0SGCn2Pu_W2SY5QsVw24fK-frXcE6hdTRnJO-0_LBmKZh15rVliIAiECAQF1yBYP_l90gQ</code></pre>
      <p>Request URL:</p>
<pre><code>https://policy.api.brightcove.com/v1/accounts/57838016001/policy_keys</code></pre>
        <p>Request method</p>
        <pre><code>POST</code></pre>
        <p>Request data:</p>
<pre><code>{"key-data": {"account-id": "57838016001"}}</code></pre>
      </li>
      <li>The response should look like this:
<pre><code>{
    "key-data": {
        "account-id": "57838016001"
    },
    "key-string": "BCpkADawqM1sAorMz0FAkKX5KbEf_bX4-svEsgdEQszAm0SF7fnm-d-KCDSI8yU7lArijlJ95g3G2FkucW0ivo0oT_A2cV7seXt5-8BR8tvduw4B-DTXVjQNjr8",
    "policies": [
        {
            "effect": "deny",
            "pattern": {
                "!=": [
                    "[request.params.account-id]",
                    "57838016001"
                ]
            }
        }
    ]
}</code></pre>
      </li>
    </ol>
  </div>
  <div id="getPolicy" class="section">
    <h2>Get a policy</h2>
    <p>The call for getting a policy object is:</p>
    <ul>
      <li>HTTP method: <code>GET</code></li>
      <li>Endpoint: <code>https://policy.api.brightcove.com/v1/accounts/<em>{YOUR_ACCOUNT_ID}</em>/policy_keys/{key_string}</code></li>
    </ul>
    <p>The video object returned will look like the response to the previous step, including the encrypted key-string and the associated policy.</p>
    <ol start="4">
      <li>You will now get a policy object.  Run <code>bash api-tester.sh</code> from the command line again, using the following input values:
        <p>client_id:</p>
        <pre><code>553d4903-4547-435d-944c-2c8e2f6abc5d</code></pre>
      <p>client_secret:</p>
        <pre><code class="nohighlight">5ENBQH6pHfJQub7oR0SGCn2Pu_W2SY5QsVw24fK-frXcE6hdTRnJO-0_LBmKZh15rVliIAiECAQF1yBYP_l90gQ</code></pre>
      <p>Request URL:</p>
<pre><code>https://cms.api.brightcove.com/v1/accounts/57838016001/policy_keys/BCpkADawqM0NK0Rq8n6sEQyWykemrqeSmIQqqVt3XBrdpl8TYlvqN3hwKphBJRnkPgx6WAbozCW_VgTOBCNf1AQRh8KnmXSXfveQalRc5-pyNlSod5XzP99If2U</code></pre>
        <p>Request method</p>
        <pre><code>GET</code></pre>
        <p>Request data: none (just press Return)</p>

      </li>
      <li>The response should look like this:
<pre><code>{
    "key-data": {
        "account-id": "57838016001"
    },
    "key-string": "BCpkADawqM0NK0Rq8n6sEQyWykemrqeSmIQqqVt3XBrdpl8TYlvqN3hwKphBJRnkPgx6WAbozCW_VgTOBCNf1AQRh8KnmXSXfveQalRc5-pyNlSod5XzP99If2U",
    "policies": [
        {
            "effect": "deny",
            "pattern": {
                "!=": [
                    "[request.params.account-id]",
                    "57838016001"
                ]
            }
        }
    ]
}</code></pre>
</li>

    </div>
      <div class="section" id="BCLreferences">
        <h2>Related Topics</h2>
        <ul>
          <li><a href="./api-overview.html">Policy API Overview</a></li>
        </ul>
      </div>
    </div>
  </div>
  <!-- bcl scripts -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/2.2/gist-embed.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.3/handlebars.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
  <script src="/en/scripts/log.js"></script>
  <script src="/en/scripts/docs-nav-data.min.js"></script>
  <script src="/en/scripts/bcls-doc-site-v1.js"></script>
  <script src="/en/scripts/bc-mapi.js"></script>
  <script>
    $(document).foundation();
  </script>
  <script type="text/javascript">
    /******** Any scripts specific to page samples should go here *********/
    </script>
    <div class="footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a></div>
    <script>
      var feedbackMail = document.getElementById("feedbackMail");
      feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
    </script>
  </body>

  </html>

<!DOCTYPE html>
<html lang="en">
  <head>
<script>
    // force into https mode if not already there -- currently not used
    forceSecure = function () {
        var pageURL = window.location.href,
            pageProtocol = window.location.protocol;
        if (pageProtocol === "http:") {
            window.location.href = pageURL.replace("http:", "https:");
        }
    };
</script>


    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
    <!-- change title to match the h1 heading -->
    <title id="bclPageTitle">Media API Sample: Create an MRSS feed with PHP</title>
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" />
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/normalize.css" />
    <script src="//use.edgefonts.net/source-code-pro.js"></script>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/font-hack/2.015/css/hack-extended.min.css">

  <link rel="stylesheet" type="text/css" href="/en/styles/bcls-doc-site.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/atelier-forest.light.min.css" />
    <link rel="stylesheet" type="text/css" href="/en/styles/anytime.5.0.0-1401232312.min.css" />
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2728311-29', 'auto');
  ga('send', 'pageview');

</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>
  </head>

  <body>
	<!-- header navbar -->
	<div id="navWrapper" class="fixed"></div>
	<!-- breadcrumbs -->
	<nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
	<!-- search -->
	<div id="searchModal" class="reveal-modal" data-reveal></div>
	<!-- content -->
    <div class="row">
        <div class="sidebar large-2 columns show-for-large-up">
            <div id="sidenav" class="side-nav"></div>
        </div>
        <div id="main" class="large-10 small-12 columns">
        <div id="top" class="section">
            <h1 id="bclPageHeading">Media API Sample: Create an MRSS feed with PHP</h1>
            <p>This example uses PHP code to retrieve data from the Media API and create an MRSS feed. When calling the Media API, we use the  <code>search_videos()</code> READ method to perform a complex search, taking advantage of the <code>all</code>, <code>any</code>, <code>page_size</code> and <code>video_fields</code> terms to limit the search response.</p>
            <p>The JSON data returned from the Media API is then formatted in XML tags to create a Media RSS (MRSS) feed. For details about formatting an MRSS feed, refer to the <a href="//www.rssboard.org/media-rss">Media RSS Specification</a> page.</p>
			<p>The code is written in PHP and should run from your server.</p>
          </div>
          <div id="results" class="section">
            <h2><a name="results"></a>Results</h2>
            <p>Below is the MRSS feed generated by the PHP code. In this example, we retrieved data from the Media API for one video which has the term <strong>water</strong> in the title or short description and a tag value of <strong>sea</strong>. We also limited the fields returned to only the ones we needed. In the next section, we'll review the code used to generate this feed.</p>
			  <code data-gist-id="9002753" data-gist-hide-footer="true"></code>
		  </div>
		  
		  <div id="code" class="section">
          <h2><a name="code"></a>Code explanation</h2>                  
	      <p>You can view or download the complete PHP code from <a href="https://gist.github.com/9003118">here</a>.</p> 
          <p>First, we define the constant values, including your Media API Read token, and build the associated MRSS tags.</p>
		  <p class="text-warning">For this example, you will need a Media API Read token with URL access. This token allows you to get the media files themselves and not just the video metadata. If you don't already have this, you can <a href="//support.brightcove.com/en/video-cloud/docs/managing-media-api-tokens#get">read about how to get your token</a>.</p>
		  <p><code data-gist-id="9003118" data-gist-line="1-38" data-gist-hide-footer="true"></code></p>
		  <p>Next, we build the URL for the RESTful call to the Brightcove Media API, execute the curl statement and format the JSON response data. In this example, we return data for one video which has the term <strong>water</strong> in the title or short description, and a tag value of <strong>sea</strong>. We also limit the fields returned to the <strong>name</strong>, <strong>shortDescription</strong>, <strong>publishedDate</strong>, <strong>tags</strong>, <strong>thumbnailURL</strong>, <strong>id</strong> and <strong>videoFullLength</strong>.</p>
		  <p><code data-gist-id="9003118" data-gist-line="40-53" data-gist-hide-footer="true"></code></p>
		  <p>Here, we loop over the Media API response data and format the associated MRSS tags. When we are done populating the item data, we create the closing tags for the MRSS feed.</p>
		  <code data-gist-id="9003118" data-gist-line="55-107" data-gist-hide-footer="true"></code>
        </div>
		  
		<div class="section" id="BCLreferences">
          <h2>Related topics</h2>
          <ul>
            <li><a href="//docs.brightcove.com/en/video-cloud/media/references/reference.html">Media API Reference</a></li>
            <li><a href="//docs.brightcove.com/en/video-cloud/media/guides/quick-start.html">Getting Started with Video Cloud Media API</a></li>
            <li><a href="//docs.brightcove.com/en/video-cloud/media/guides/search_videos-guide.html">Using search_videos</a></li>
            <li><a href="//www.rssboard.org/media-rss">Media RSS Specification</a></li>
              
          </ul>
        </div> 
     
      </div>
    </div>
    <!-- bcl scripts -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/2.2/gist-embed.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.3/handlebars.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
  	<script src="/en/scripts/docs-nav-data.min.js"></script>
    <script src="/en/scripts/bcls-doc-site.js"></script>
    <script src="/en/scripts/bc-mapi.js"></script>
    <script>
        $(document).foundation();
    </script>
    
      
    
	<iframe id="CSAT" src="http://survey.clicktools.com/app/survey/go.jsp?iv=3poon3e7e9spn&q1=[articleURL]" style="margin-left:25%; padding-bottom:20px;width:550px;height:475px;border:none"></iframe>
<script>
    
    var cSat = document.getElementById('CSAT'),
        cSatSrc = cSat.getAttribute('src'),
        pageurl = window.location.href;
    cSat.setAttribute('src', cSatSrc.replace('[articleURL]', pageurl));
    
</script>
<br><br>
<div class="footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a></div>
<script>
var feedbackMail = document.getElementById("feedbackMail");
feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
</script>
</body>
</html>

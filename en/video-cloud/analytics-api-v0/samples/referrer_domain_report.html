<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
    <!-- change title to match the h1 heading -->
    <title id="bclPageTitle">Referrer Domain by Player Report Sample</title>
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" />
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/normalize.css" />
    <script src="//use.edgefonts.net/source-code-pro.js"></script>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="/en/styles/bcls-doc-site.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/atelier-forest.light.min.css" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2728311-29', 'auto');
  ga('send', 'pageview');

</script>	<script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>
  </head>
  <body>
	<!-- header navbar -->
	<div id="navWrapper" class="fixed"></div>
	<!-- breadcrumbs -->
	<nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
	<!-- search -->
	<div id="searchModal" class="reveal-modal" data-reveal></div>
	<!-- content -->
    <!-- content -->
    <div class="row">
        <div class="sidebar large-2 columns show-for-large-up">
            <div id="sidenav" class="side-nav"></div>
        </div>
        <div id="main" class="large-10 small-12 columns">
          <div id="top" class="section">
            <h1 id="bclPageHeading">Samples: Referrer Domain by Player Report Sample</h1>
          <p class="BCL-objective">This sample shows an Analytics API request for report on referrer domains for a specific player. The raw response data is included, along with some sample graphs created from parts of the data. The JavaScript code used to generate the sample graphs is at the bottom of page source code.</p><!--break-->
        </div>
        <div id="request" class="section">
        <h2><a name="request"></a>Request</h2>
        <p>Below is a request for summary metrics for a Video Cloud account for a specific time period (in this case, from <span class="startDate"></span> to <span class="endDate"></span>)</p>
<pre><code id="httpRequest"></code></pre>
        </div>
        <div id="response" class="section">
        <h2><a name="response"></a>JSON Response</h2>
        <p>Below is the data that was returned from the request above:</p>
          <pre><code id="jsonresponse"></code></pre>
        </div>
        <div id="sampleGraph" class="section">
          <h2><a name="sampleGraph"></a>Sample Graphs</h2>
          <p>Below you can see sample graphs generated from parts of the returned data. The graphs were created using the <a href="//www.flotcharts.org">Flot plotting library for jQuery</a>.</p>
          <p id="startDate" class="startDate"><strong>Start date:</strong> </p>
          <p id="endDate" class="endDate"><strong>End date:</strong> </p>
          <h3>Video Views by Referring Domain - bar</h3>
          <p>Bar graph representation of the number of video views per referring domain</p>
          <div id="chartViews" style="width:800px;height:400px"></div>
          <div id="chartViewsLegend" style="padding:10px 20px;"></div>
          <h3>Video Views by Referring Domain - pie</h3>
          <p>Pie graph representation of the number of video views per referring domain</p>
          <div id="pieChart" style="width:800px;height:600px"></div>
          <div id="pieChartLegend" style="padding:10px 20px;"></div>
        </div>
        <div class="section" id="code">
          <h2><a name="code"></a>Code for this page</h2>
          <h3>JavaScript used for this sample:</h3>
<pre><code id="js_code"></code></pre>
        </div>
      </div>
    </div>
    <!-- bcl scripts -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
    <script src="/en/scripts/jquery.flot.js"></script>
    <script src="/en/scripts/jquery.flot.pie.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.3/handlebars.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
    
    <script src="/en/scripts/docs-nav-data.min.js"></script>
    <script src="/en/scripts/bcls-doc-site.js"></script>
    <script src="/en/scripts/format_json.js"></script>
    <script src="/en/scripts/prefix.js"></script>
    <script>
        $(document).foundation();
    </script>
    <script id="pageScript" type="text/javascript">
      /******** Any scripts specific to page samples should go here *********/
        $(document).ready(function(){
        var startDate = new Date(1362103200000).toString(),
        endDate = new Date(1362189600000).toString(),
        $startDate = $('.startDate'),
        $endDate = $('.endDate'),
        $response = $('#jsonresponse'),
        $httpRequest = $("#httpRequest"),
        request = "https://data.brightcove.com/analytics-api/videocloud/accounts/20318290001/report?dimensions=referrer_domain&from=1362103200000&to=1362189600000",
        chartViews = "#chartViews",
        pieChart = "#pieChart",
        responseData = {"account":"20318290001","item_count":60,"items":[{"player_load":0,"video_view":0,"video_impression":1,"referrer_domain":"ask.com"},{"player_load":0,"video_view":0,"video_impression":2,"referrer_domain":"avg.com"},{"player_load":0,"video_view":0,"video_impression":0,"referrer_domain":"babylon.com"},{"player_load":0,"video_view":0,"video_impression":1,"referrer_domain":"bing.com"},{"player_load":0,"video_view":0,"video_impression":4,"referrer_domain":"blogspot.in"},{"player_load":0,"video_view":151,"video_impression":521,"referrer_domain":"brightcove.com"},{"player_load":0,"video_view":88,"video_impression":390,"referrer_domain":"direct"},{"player_load":0,"video_view":1,"video_impression":1,"referrer_domain":"google.ae"},{"player_load":0,"video_view":0,"video_impression":1,"referrer_domain":"google.at"},{"player_load":0,"video_view":0,"video_impression":1,"referrer_domain":"google.ba"}]};

        // make graph - depends on jquery.flot.js
        makeViewGraph = function(jsonObject,element,legendElement) {
          var options = {},plotData = {};
          options.legend = {"show": true,"container":legendElement};
          plotData.series = [];
          for (var i = 0; i < jsonObject.items.length; i++) {
            var series = {};
            series.data = [];
            series.label = jsonObject.items[i].referrer_domain;
            series.xaxis = {"min":0};
            series.yaxis = {"min":0};
            series.bars = {
              "show": true,
              "barWidth": .5,
              "align": "left",
              "horizontal": false };
            series.data[i] = [i,jsonObject.items[i].video_view];
            plotData.series[i] = series;
          }
          var plot = $.plot(element,plotData.series,options);
        }
        makePieGraph = function(jsonObject, element, legendElement) {
          var options = { "series" :
                            { "pie" :
                                { "show" : true }
                            },
                          "legend" :
                            { "show" : true,
                              "container":legendElement
                          }
                        },
              plotData = {};
          plotData.series = [];
          for (var i = 0; i < jsonObject.items.length; i++) {
            //var player = jsonObject.items[i];
            var series = {};
            series.label = jsonObject.items[i].referrer_domain;
            series.data = jsonObject.items[i].video_view;
            plotData.series[i] = series;
          }
          BCLSmain.bclslog(plotData);
          var plot = $.plot(element,plotData.series, options);
        }
        $response.html(BCLSformatJSON.formatJSON(responseData));
        $startDate.append(startDate);
        $endDate.append(endDate);
        // re-highlight pre-code blocks
        BCLSmain.BCLhighlight();
        makeViewGraph(responseData, chartViews, $("#chartViewsLegend"));
        makePieGraph(responseData, pieChart, $("#pieChartLegend"));
      });
    </script>
    <script>
      $(document).ready(function(){
        $("#js_code").html(BCLSpreFix($("#pageScript").html()));
      });
    </script>
      
    
	<iframe width="550" height="475" frameborder="0" src="
http://survey.clicktools.com/app/survey/go.jsp?iv=3poon3e7e9spn&q1=
[articleURL]" style="margin-left:25%; padding-bottom:20px;"></iframe>
<br><br>
<div class="footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a></div>
<script>
var feedbackMail = document.getElementById("feedbackMail");
feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
</script>
</body>
</html>


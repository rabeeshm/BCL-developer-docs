<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
  <title id="bclPageTitle">Smart Player API Sample: Loading Videos with Select Statement</title>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" type="text/css">
  <script src="//use.edgefonts.net/source-code-pro.js"></script>
  <link rel="stylesheet" href="//files.brightcove.com/proxima-nova/font-faces.css" type="text/css">
  <link rel="stylesheet" href="/en/styles/bcls-doc-site.css" type="text/css"/>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/zenburn.css" />
  <link rel="stylesheet" href="/en/styles/anytime.5.0.0-1401232312.min.css" type="text/css"/>
  <link rel="stylesheet" href="/en/video-cloud/smart-player-api/samples/css/api-samples.css" type="text/css">
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2728311-29', 'auto');
  ga('send', 'pageview');

</script>

             /* styles for lightbox sample */
             <style id="pageStyles">
             .BrightcoveExperience {
               margin-top: 10px;
             }
             .player-block {
               position: relative;
             }
             </style>
  <script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>
           </head>

           <body>
  <!-- header navbar -->
	<div id="navWrapper" class="fixed"></div>
	<!-- breadcrumbs -->
	<nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
  <!-- search -->
  <div id="searchModal" class="reveal-modal" data-reveal></div>
  <!-- content -->
    <div class="row">
        <div class="sidebar large-2 columns show-for-large-up">
            <div id="sidenav" class="side-nav"></div>
        </div>
        <div id="main" class="large-10 small-12 columns">
                <div id="top" class="section">
                  <p style="background-color:#CC0000;color:#F5F5F5;font-weight:bold;margin-top:80px;padding:4px;">WARNING: Do not use the Smart Player for new projects. The Smart Player will be deprecated in 2017. Click <a style="color:#CCffff;" href="https://support.brightcove.com/en/service-changes">here</a> for more information.</p>
<h1>Loading Videos with Select Statement</h1>
                  <!-- content starts here -->

                  <!-- Start of content -->

                  <p class="BCL-objective">This example uses the Smart Player API's <code>getPlaylistByID()</code> method to retrieve the video data for a specified playlist. When the playlist is returned, HTML <code>&lt;option&gt;</code> statements are dynamically built and injected into a <code>&lt;select&gt;</code> statement. If another video is selected (an HTML <code>change</code> event dispatched from the <code>&lt;select&gt;</code> statement), the <code>&lt;option&gt;</code>'s  <code>selectedIndex</code> value is used to retrieve the correct video ID from the playlist's <code>videos</code> property and that video is played.</p>
                </div><!-- div id="top" -->

                <!-- every div class section must have an id -->
                <!--break-->
                <div id="resources" class="section">
                  <!-- h2 contents will be in page navigation label - 21 characters (including spaces) maximum -->
                  <h2><a name="resources"></a>API resources used</h2>
                  <h3>Smart Player API</h3>
                  <p>This sample uses the following API resources</p>
                  <h4>Modules and methods</h4>
                  <ul>
                    <li>
                      <ul>
                        <li>VIDEO_PLAYER
                          <ul>
                            <li>loadVideoByID()</li>
                            <li>addEventListener()</li>
                          </ul>
                        </li>
                        <li>CONTENT
                          <ul>
                            <li>getPlaylistByID()</li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                  </ul>
                  <h4>Events</h4>
                  <ul>
                    <li>onTemplateLoad</li>
                    <li>onTemplateReady</li>
                    <li>brightcove.api.events.MediaEvent.COMPLETE</li>
                  </ul>
                  <p class="text-warning">Note: the read methods of the Smart Player API are available to Express 3, Professional, and Enterprise accounts.</p>
                </div><!-- div id="resources" -->

                <div id="player" class="section">
                  <h2><a name="player"></a>Functioning example</h2>
                  <p class="text-warning">Note: the buttons below are for development purposes only &mdash; do not use in production.</p>
          <!-- buttons to switch between HTML and Flash Players -->
          <div id="modeSwitch">
            <span class="button" id="switchToHTML5" style="margin-bottom: 20px;margin-right: 10px;">Switch to HTML5 Player</span>
            <span class="button" id="switchToFlash" style="margin-bottom: 20px;">Switch to Flash Player</span>
          </div>
                  <!-- Start of Brightcove Player -->

                  <div style="display:none">
                  </div>

          <!--
          By use of this code snippet, I agree to the Brightcove Publisher T and C
          found at https://accounts.brightcove.com/en/terms-and-conditions/.
        -->

        <script language="JavaScript" type="text/javascript" src="//sadmin.brightcove.com/js/BrightcoveExperiences.js"></script>

        <object id="myExperience922656010001" class="BrightcoveExperience">
          <param name="bgcolor" value="#FFFFFF" />
          <param name="width" value="480" />
          <param name="height" value="270" />
          <param name="playerID" value="921267190001" />
          <param name="playerKey" value="AQ~~,AAAA1oy1bvE~,ALl2ezBj3WG3MLvDx9F9zkV06cNK00ey" />
          <param name="isVid" value="true" />
          <param name="isUI" value="true" />
          <param name="dynamicStreaming" value="true" />

          //do not use an initial video as it may appear briefly in the player
          <!-- <param name="@videoPlayer" value="922656010001" /> -->

          <!-- smart player api params -->
          <param name="includeAPI" value="true" />
          <param name="templateLoadHandler" value="onTemplateLoad" />
          <param name="templateReadyHandler" value="onTemplateReady" />

        </object>

          <!--
          This script tag will cause the Brightcove Players defined above it to be created as soon
          as the line is read by the browser. If you wish to have the player instantiated only after
          the rest of the HTML is processed and the page load is complete, remove the line.
        -->
        <script src="//docs.brightcove.com/en/scripts/https-fix.js"></script><script type="text/javascript">brightcove.createExperiences();</script>

        <!-- End of Brightcove Player -->

        <div id="videoSelector">
          <select id="videoSelect" onChange="javascript:onVideoSelected(event)">
          </select>
        </div>
      </div><!-- div id="player" -->

      <div id="logic" class="section" >
        <h2><a name="logic"></a>How it is done</h2>
        <p>The sample uses the Smart Player API.</p>
        <h3>The Smart Player API part</h3>
        <p>When the player is ready, we get a reference to the <code>VIDEO_PLAYER</code> module and the <code>CONTENT</code> module. Then the playlist is retrieved using <code>getPlaylistByID()</code> method, and in the callback function the HTML <code>&lt;option&gt;</code> statements are dynamically built.</p>
        <code data-gist-id="6829834" data-gist-hide-footer="true" data-gist-line="71,80-87"></code>
        <p>The <code>loadVideoByID()</code> method is used in the event handler for the <code>getPlaylistByID()</code> method so the first video starts playing immediately, as shown on line 83 of the above code snippet.<br /><br /></p>
        <p>The <code>COMPLETE</code> event is used so when a video has finished, the next one in the playlist starts to play. The <code>loadVideoByID()</code> method is used here also.</p>
        <code data-gist-id="6829834" data-gist-hide-footer="true" data-gist-line="72,74-79"></code><br /><br />
        <p>The <code>loadVideoByID()</code> method is used yet again in the event handler for the <code>&lt;select&gt;</code> statement. The <code>selectedIndex</code> is used to retrieve the correct video.</p>
        <code data-gist-id="6829834" data-gist-hide-footer="true" data-gist-line="51,88-94"></code>
        <h3>The rest</h3>
        <p>Note: no video ID is used in the player code. This ensures the video associated with that ID does not briefly appear in the player before the first video in the playlist starts to play.</p>
        <p>An empty HTML <code>&lt;select&gt;</code> statement is used just below the player code. This is where the dynamically built <code>&lt;option&gt;</code> statements are injected. Note the <code>onChange</code> event is setup inline in the HTML code also.</p>
        <code data-gist-id="6829834" data-gist-hide-footer="true" data-gist-line="50-53"></code>
      </div><!-- div id="logic" -->

      <div id="code" class="section">
        <h2><a name=""></a>The code</h2>
        <p>See the full code <a href="https://gist.github.com/bcls/6829834">here</a>.</p>
        <h3>Complete JavaScript used for this sample:</h3>
        <code data-gist-id="6829834" data-gist-hide-footer="true" data-gist-line="55-95"></code>
      </div><!-- div id="code" -->
    </div><!-- div id="main" -->
  </div><!-- <div class="row"> -->

  <!-- bcl scripts -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/2.2/gist-embed.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.3/handlebars.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>

  <script src="/en/scripts/docs-nav-data.min.js"></script>
  <script src="/en/scripts/bcls-doc-site.js"></script>
  <script src="/en/scripts/flashHTMLswitch-nojQ.js"></script>
    <script>
        $(document).foundation();
    </script>

  <!--******** Any scripts specific to page samples should go here *********-->
  <script src="/en/scripts/secondsToTime.js"></script>
  <script id="pageScript" type="text/javascript">

      <!-- custom scripts for this player and functionality -->

      var player,
      APIModules,
      videoPlayer,
      contentModule,
      videosAra,
      counter = 0;

      var onTemplateLoad = function(experienceID){
       player = brightcove.api.getExperience(experienceID);
       APIModules = brightcove.api.modules.APIModules;
     };

     var onTemplateReady = function(evt){
       videoPlayer = player.getModule(APIModules.VIDEO_PLAYER);
       contentModule = player.getModule(APIModules.CONTENT);
       contentModule.getPlaylistByID("1323984733001", onGetPlaylist);
       videoPlayer.addEventListener(brightcove.api.events.MediaEvent.COMPLETE, onComplete);
     };

    var onComplete = function(evt){
      counter ++;
      var toPlayID = videosAra[counter].id;
      videoPlayer.loadVideoByID(toPlayID);
    }

    var onGetPlaylist = function(playlistDTO){
      console.log(playlistDTO);
      videosAra = playlistDTO.videos;
      videoPlayer.loadVideoByID(videosAra[0].id);
      for (var i = 0; i < playlistDTO.videoCount; i++) {
        videoSelect.innerHTML += '<option value="' + playlistDTO.videos[i].id +'">' + playlistDTO.videos[i].displayName + '</option>';
      }
    };

    var onVideoSelected = function(evt){
      var selectedIndex = videoSelect.selectedIndex;
      counter =  selectedIndex;
      var toPlayID = videosAra[selectedIndex].id;
      videoPlayer.loadVideoByID(toPlayID);
    };

    <!-- end custom scripts for this player and functionality -->
</script>

    
    
	<div style="text-align:center">
    <iframe id="CSAT" src="//learning-services-media.brightcove.com/doc-assets/general/surveylink.html" style=" padding-bottom:20px;border:none"></iframe>
</div>
<div class="footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a></div>
<script>
var feedbackMail = document.getElementById("feedbackMail");
feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
</script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
  <title id="bclPageTitle">Smart Player API Sample: Display Playlist Duration in Minutes</title>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" type="text/css">
  <script src="//use.edgefonts.net/source-code-pro.js"></script>
  <link rel="stylesheet" href="//files.brightcove.com/proxima-nova/font-faces.css" type="text/css">
  <link rel="stylesheet" href="/en/styles/bcls-doc-site.css" type="text/css"/>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/zenburn.css" />
  <link rel="stylesheet" href="/en/styles/anytime.5.0.0-1401232312.min.css" type="text/css"/>
  <link rel="stylesheet" href="/en/video-cloud/smart-player-api/samples/css/api-samples.css" type="text/css">
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2728311-29', 'auto');
  ga('send', 'pageview');

</script>

 <style id="pageStyles">
    .BrightcoveExperience {
     margin-top: 10px;
   }
   .player-block {
     position: relative;
   }
 </style>
  <script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>
</head>

<body>
  <!-- header navbar -->
	<div id="navWrapper" class="fixed"></div>
	<!-- breadcrumbs -->
	<nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
  <!-- search -->
  <div id="searchModal" class="reveal-modal" data-reveal></div>
  <!-- content -->
    <div class="row">
        <div class="sidebar large-2 columns show-for-large-up">
            <div id="sidenav" class="side-nav"></div>
        </div>
        <div id="main" class="large-10 small-12 columns">
      <div id="top" class="section">
        <h1>Display Playlist Duration in Minutes</h1>
        <!-- content starts here -->

        <!-- Start of content -->

        <p class="BCL-objective">The following examples show how to display the total video minutes assigned to a playlist and a playlist player. First, we use the Smart Player API <code>getPlaylistByID()</code> method to retrieve the video data for a specified playlist. Then we add up the length for each video to get the total minutes for the playlist.</p>
        <p class="BCL-objective">For the first player, we load the playlist video ids and names into a drop-down menu. When you select a video from this menu, we call the <code>loadVideoByID()</code> method to load the selected video in the player.</p>
        <p class="BCL-objective">The second player uses a built-in horizontal scroller to display thumbnails for each video in the associated playlist.</p>
      </div><!-- div id="top" -->

      <!-- every div class section must have an id -->
      <!--break-->
      <div id="resources" class="section">
        <!-- h2 contents will be in page navigation label - 21 characters (including spaces) maximum -->
        <h2><a name="resources"></a>API resources used</h2>
        <h3>Smart Player API</h3>
        <p>This sample uses the following API resources</p>
        <h4>Modules and methods</h4>
        <ul>
          <li>VIDEO_PLAYER
            <ul>
              <li>loadVideoByID()</li>
            </ul>
          </li>  
          <li>CONTENT
            <ul>
              <li>getPlaylistByID()</li>
            </ul>
          </li>
        </ul>
        <h4>Events</h4>
        <ul>
          <li>onTemplateLoad</li>
          <li>onTemplateReady</li>
        </ul>
        <p class="text-warning">Note: the read methods of the Smart Player API are available to Express 3, Professional, and Enterprise accounts.</p>
      </div><!-- div id="resources" -->

      <div id="player" class="section">
        <h2><a name="player"></a>The players</h2>
        <p class="text-warning">Note: the buttons below are for development purposes only &mdash; do not use in production.</p>
          <!-- buttons to switch between HTML and Flash Players -->
          <div id="modeSwitch">
            <span class="button" id="switchToHTML5" style="margin-bottom: 20px;margin-right: 10px;">Switch to HTML5 Player</span>
            <span class="button" id="switchToFlash" style="margin-bottom: 20px;">Switch to Flash Player</span>
          </div>
          <div class="player-block">
          <br/>
        
        <!-- Sample 1 - playlist duration -->
        <p>This first sample uses a standard Chromeless Video Player.</p>
        
        <!-- Start of Brightcove Player -->

        <div style="display:none">
        
        </div>
        
        <!--
        By use of this code snippet, I agree to the Brightcove Publisher T and C 
        found at https://accounts.brightcove.com/en/terms-and-conditions/. 
        -->
        
        <script language="JavaScript" type="text/javascript" src="//sadmin.brightcove.com/js/BrightcoveExperiences.js"></script>
        
        <object id="myExperience123" class="BrightcoveExperience">
          <param name="bgcolor" value="#FFFFFF" />
          <param name="width" value="480" />
          <param name="height" value="270" />
          <param name="playerID" value="2807046872001" />
          <param name="playerKey" value="AQ~~,AAABmA9XpXk~,-Kp7jNgisrekQXrin1OH6so-OhtAlbn9" />
          <param name="isVid" value="true" />
          <param name="isUI" value="true" />
          <param name="dynamicStreaming" value="true" />
          
          <!-- smart player api params -->
          <param name="includeAPI" value="true" />
          <param name="templateLoadHandler" value="onTemplateLoad" />
          <param name="templateReadyHandler" value="onTemplateReady" />
          
        </object>
        
        <!-- 
        This script tag will cause the Brightcove Players defined above it to be created as soon
        as the line is read by the browser. If you wish to have the player instantiated only after
        the rest of the HTML is processed and the page load is complete, remove the line.
        -->
        <script src="//docs.brightcove.com/en/scripts/https-fix.js"></script><script type="text/javascript">brightcove.createExperiences();</script>
        
        <!-- End of Brightcove Player -->
        
        <div id="videoSelector">
            <select id="videoSelect" onchange="loadVideo(event)">
            </select>            
        </div>

        <p id="playlistDuration"></p>
        <br/>
        <!-- Sample 2 - playlist player duration -->
        <p>This second sample uses a Chromeless Video Player with a horizontal playlist.</p>
        
        <!-- Start of Brightcove Player -->

        <div style="display:none">
        
        </div>
        
        <!--
        By use of this code snippet, I agree to the Brightcove Publisher T and C 
        found at https://accounts.brightcove.com/en/terms-and-conditions/. 
        -->
        
        <script language="JavaScript" type="text/javascript" src="//sadmin.brightcove.com/js/BrightcoveExperiences.js"></script>
        
        <object id="myExperience456" class="BrightcoveExperience">
            <param name="bgcolor" value="#FFFFFF" />
            <param name="width" value="480" />
            <param name="height" value="335" />
            <param name="playerID" value="2748583357001" />
            <param name="playerKey" value="AQ~~,AAABmA9XpXk~,-Kp7jNgisrdnVxQWHX-7jQDpPknJrHbN" />
            <param name="isVid" value="true" />
            <param name="isUI" value="true" />
            <param name="dynamicStreaming" value="true" />
                  
            <!-- smart player api params -->
            <param name="includeAPI" value="true" />
            <param name="templateLoadHandler" value="onTemplateLoad2" />
            <param name="templateReadyHandler" value="onTemplateReady2" />
        </object>
        
        <!-- 
        This script tag will cause the Brightcove Players defined above it to be created as soon
        as the line is read by the browser. If you wish to have the player instantiated only after
        the rest of the HTML is processed and the page load is complete, remove the line.
        -->
       <!--<script src="//docs.brightcove.com/en/scripts/https-fix.js"></script><script type="text/javascript">brightcove.createExperiences();</script>-->
        
        <!-- End of Brightcove Player -->

        <p id="playlistPlayerDuration"></p>

      </div><!-- div id="player" -->

      <div id="logic" class="section" >
        <h2><a name="logic"></a>How it is done</h2>
        <p>These samples use the Smart Player API.</p>
        <h3>The Smart Player API part</h3>
        <p>When each player is ready, we get a reference to the <code>VIDEO_PLAYER</code> module and the <code>CONTENT</code> module. Then the playlist is retrieved using the <code>getPlaylistByID()</code> method. In the callback function, the duration of the playlist is calculated by adding the length of each video in the playlist. This total in milliseconds is then converted into minutes. </p>
        <p>For the first player, we load each playlist video id and name into a drop-down menu. When you select a video from this menu, we call the <code>loadVideoByID()</code> method to load the selected video.</p>
        <p>The second player uses a built-in horizontal list to display the video thumbnails in the playlist.</p>
    
        <h3>The rest</h3>
        <p>We take the total minutes for each playlist and inject the playlist duration into a <code>&lt;p&gt;</code> element on the page for each player.</p>
      </div><!-- div id="logic" -->

      <div id="code" class="section">
        <h2><a name="code"></a>The code</h2>
        <p>You can view or download the full code for the <a href="https://gist.github.com/bcls/7019993">playlist sample</a> (first player) or the <a href="https://gist.github.com/bcls/7031863">playlist player sample</a> (second player).</p>
        <p>For more information about how to manage multiple players on one page, refer to the <a href="//support.brightcove.com/en/video-cloud/solutions/displaying-multiple-videos-single-page">Displaying multiple videos on a single page</a> solution and the <a href="//solutions.brightcove.com/cs/smart-player-api/multiple-players.html">Stopping other players on the page when a video starts</a> solution.</p>

        <h3>HTML added for the first player:</h3>
        <code data-gist-id="7365130" data-gist-hide-footer="true" data-gist-line="53-59"></code>
        <h3>Modifications made to the player publishing code:</h3>
        <p>Since there are two players on one page, we have to use unique experience ids and unique templateLoadHandler and templateReadyHandler function names.</p>
        <p> Below is the code for the first player.</p>
        <p><code data-gist-id="7365130" data-gist-hide-footer="true" data-gist-line="27-42"></code></p>
        <p> Below is the code for the second player.</p>
        <p><code data-gist-id="7365130" data-gist-hide-footer="true" data-gist-line="78-92"></code></p>
        <h3>JavaScript used for the two players:</h3>
        <p>Since there are two players on one page, we have to use unique method and variable names for each player.</p>
        <code data-gist-id="7365130" data-gist-hide-footer="true" data-gist-line="107-194"></code>
      </div><!-- div id="code" -->

    </div><!-- div id="main" -->
  </div><!-- <div class="row"> -->
</div>
  <!-- bcl scripts -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/2.2/gist-embed.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.3/handlebars.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/1.3/gist-embed.min.js"></script>


  <script src="/en/scripts/docs-nav-data.min.js"></script>
  <script src="/en/scripts/bcls-doc-site.js"></script>
  <script src="/en/scripts/flashHTMLswitch-nojQ.js"></script>
    <script>
        $(document).foundation();
    </script>

  <!--******** Any scripts specific to page samples should go here *********-->
  <script src="/en/scripts/secondsToTime.js"></script>
  <script type="text/javascript">
		var player,
			player2,
			APIModules,
			APIModules2,
			videoPlayer,
			contentModule,
			contentModule2,
			videoData = {};
			
		var onTemplateLoad = function(experienceID) {
			console.log("onTemplateLoad1");
			// get a reference to the first player and API Modules
			player = brightcove.api.getExperience(experienceID);
			APIModules = brightcove.api.modules.APIModules;
		};
		
		var onTemplateReady = function(evt) {
			console.log("onTemplateReady1");
			// get references to modules for the first player
			videoPlayer = player.getModule(APIModules.VIDEO_PLAYER);
			contentModule = player.getModule(APIModules.CONTENT);
			// fetch the playlist
			getPlaylistData();
		};
		
		var getPlaylistData = function(){
		// retrieve the playlist data from the Video Cloud service
		contentModule.getPlaylistByID(2805100167001, function(playlistDTO) {
			console.log(playlistDTO);
			// load the first video in the playlist
			videoPlayer.loadVideoByID(playlistDTO.videos[0].id);
			// create the option statments for the playlist drop-down menu
			var str = "",
				totalTime = 0;
			for (var i in playlistDTO.videos) {
				str += '<option value="' + playlistDTO.videos[i].id +'">' + playlistDTO.videos[i].displayName + '</option>'; 
				// Calculate playlist duration
				totalTime += playlistDTO.videos[i].length;
			}
			document.getElementById("videoSelect").innerHTML = str;
			videoData = playlistDTO;
			
			// set the playlist duration
			totalTime = BCLSsecondsToTime(totalTime / 1000);
			playlistDuration.innerHTML = '<strong>Playlist duration: </strong>' + totalTime.m + ':' +totalTime.s + 'min';
			});		
		};
		
		var loadVideo = function(evt){
			videoPlayer.loadVideoByID(videoData.videos[evt.target.selectedIndex].id);
		};
		
		var onTemplateLoad2 = function(experienceID) {
			console.log("onTemplateLoad2");
			// get a reference to the second player and API Modules
			player2 = brightcove.api.getExperience(experienceID);
			APIModules2 = brightcove.api.modules.APIModules;
		};
		
		var onTemplateReady2 = function(evt) {
			console.log("onTemplateReady2");
			// get references to modules for the second player
			contentModule2 = player2.getModule(APIModules.CONTENT);
			// fetch the playlist
			getPlaylistData2();
		};
		
		var getPlaylistData2 = function(){
		// retrieve the playlist data from the Video Cloud service
		contentModule2.getPlaylistByID(1754200320001 , function(playlistDTO) {
			console.log(playlistDTO);
			// create the option statments for the playlist drop-down menu
			var totalTime = 0;
			for (var i in playlistDTO.videos) {
				// Calculate playlist duration
				totalTime += playlistDTO.videos[i].length;
			}
			
			// set the playlist duration
			totalTime = BCLSsecondsToTime(totalTime / 1000);
			playlistPlayerDuration.innerHTML = '<strong>Player playlist duration: </strong>' + totalTime.m + ':' +totalTime.s + 'min';
			});		
		};

  </script>

    
    
	<div style="text-align:center">
    <iframe id="CSAT" src="//learning-services-media.brightcove.com/doc-assets/general/surveylink.html" style=" padding-bottom:20px;border:none"></iframe>
</div>
<div class="footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a></div>
<script>
var feedbackMail = document.getElementById("feedbackMail");
feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
</script>
</body>
</html>
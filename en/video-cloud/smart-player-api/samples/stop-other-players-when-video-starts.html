<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
  <title id="bclPageTitle">Smart Player API Sample: Stopping Other Players on the Page when a Video Starts</title>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" type="text/css">
  <script src="//use.edgefonts.net/source-code-pro.js"></script>
  <link rel="stylesheet" href="//files.brightcove.com/proxima-nova/font-faces.css" type="text/css">
  <link rel="stylesheet" href="/en/styles/bcls-doc-site.css" type="text/css"/>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/zenburn.css" />
  <link rel="stylesheet" href="/en/styles/anytime.5.0.0-1401232312.min.css" type="text/css"/>
  <link rel="stylesheet" href="/en/video-cloud/smart-player-api/samples/css/api-samples.css" type="text/css">
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2728311-29', 'auto');
  ga('send', 'pageview');

</script>
<!--             /* styles for lightbox sample */    --> 
<style type="text/css">
	.playerbox {
		float: left;
	}
	.wrap:after {
    	content:'';
    	display:block;
    	clear: both;
	}
</style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>
</head>
<body>
  <!-- header navbar -->
	<div id="navWrapper" class="fixed"></div>
	<!-- breadcrumbs -->
	<nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
  <!-- search -->
  <div id="searchModal" class="reveal-modal" data-reveal></div>
  <!-- content -->
    <div class="row">
        <div class="sidebar large-2 columns show-for-large-up">
            <div id="sidenav" class="side-nav"></div>
        </div>
        <div id="main" class="large-10 small-12 columns">
                <div id="top" class="section">
                  <h1>Stopping Other Players on the Page when a Video Starts</h1>
                  <!-- content starts here -->
                  <!-- Start of content -->
                  <p class="BCL-objective">This example pauses other players on the same page when a video starts to play. This example loads all players on the page into an array and an event listener is added that listens for the PLAY event. When the PLAY event is detected, a function is called that will pause all other players on the page.</p>
                  <p class="text-warning">Note: Having several players on a single page is not recommended. It's usually a better user experience to have a single player on the page and <a href="http://docs.brightcove.com/en/video-cloud/smart-player-api/samples/load-video-by-thumb.html">load videos into it</a>. That way, pages load more quickly and are less demanding on the browser.</p>
          </div><!-- div id="top" -->

                <!-- every div class section must have an id -->
                <!--break-->
                <div id="resources" class="section">
                  <!-- h2 contents will be in page navigation label - 21 characters (including spaces) maximum -->
                  <h2>API resources used</h2>
                  <h3>Smart Player API</h3>
                  <p>This sample uses the following API resources</p>
                  <h4>Modules and methods</h4>
                  <ul>
                    <li>
                      <p>VIDEO_PLAYER</p>
                      <ul>
                        <li>pause()</li>
                      </ul>
                    </li>
                  </ul>
                  <h4>Events</h4>
                  <ul>
                    <li>onTemplateLoad</li>
                    <li>onTemplateReady</li>
                  </ul>
                  <p class="text-warning">Note: The read methods of the Smart Player API are available to Express III, Professional, and Enterprise accounts.</p>
                </div><!-- div id="resources" -->

                <div id="player" class="section">
                  <h2>Functioning example</h2>
  <p>In this example, each time any player plays the others will pause if they're playing.</p>
  	<div class="wrap">
		<div class="playerbox">
			<p>Player 1</p>
			<object id="player1" class="BrightcoveExperience">
				<param name="bgcolor" value="#FFFFFF" />
				<param name="width" value="360" />
				<param name="height" value="200" />
				<param name="playerID" value="1753810340001" />
				<param name="playerKey" value="AQ~~,AAABmA9XpXk~,-Kp7jNgisrdihurn3hYnYJWo8k_gM6uF" />
				<param name="isVid" value="true" />
				<param name="isUI" value="true" />
				<param name="dynamicStreaming" value="true" />
				<param name="@videoPlayer" value="1754276205001" />
				<param name="templateLoadHandler" value="onTemplateLoad" />
				<param name="templateReadyHandler" value="onTemplateReady" />
				<param name="includeAPI" value="true" />
				<param name="autoStart" value="false" />
			</object>
		</div>

		<div class="playerbox">
			<p>Player 2</p>
			<object id="player2" class="BrightcoveExperience">
				<param name="bgcolor" value="#FFFFFF" />
				<param name="width" value="360" />
				<param name="height" value="200" />
				<param name="playerID" value="1753810340001" />
				<param name="playerKey" value="AQ~~,AAABmA9XpXk~,-Kp7jNgisrdihurn3hYnYJWo8k_gM6uF" />
				<param name="isVid" value="true" />
				<param name="isUI" value="true" />
				<param name="dynamicStreaming" value="true" />
				<param name="@videoPlayer" value="3851380732001" />
				<param name="templateLoadHandler" value="onTemplateLoad" />
				<param name="templateReadyHandler" value="onTemplateReady" />
				<param name="includeAPI" value="true" />
				<param name="autoStart" value="false" />
			</object>
		</div>

		<div class="playerbox">
			<p>Player 3</p>
			<object id="player3" class="BrightcoveExperience">
				<param name="bgcolor" value="#FFFFFF" />
				<param name="width" value="360" />
				<param name="height" value="200" />
				<param name="playerID" value="1753810340001" />
				<param name="playerKey" value="AQ~~,AAABmA9XpXk~,-Kp7jNgisrdihurn3hYnYJWo8k_gM6uF" />
				<param name="isVid" value="true" />
				<param name="isUI" value="true" />
				<param name="dynamicStreaming" value="true" />
				<param name="@videoPlayer" value="3851389913001" />
				<param name="templateLoadHandler" value="onTemplateLoad" />
				<param name="templateReadyHandler" value="onTemplateReady" />
				<param name="includeAPI" value="true" />
				<param name="autoStart" value="false" />
			</object>
		</div>
	</div>
    </div>
      <div id="logic" class="section" >
        <h2>How it is done</h2>
        <p>The sample uses the Smart Player API. The player has the API enabled and the players on the page are loaded into an array.</p>
        <code data-gist-id="54e6a80744a713133d6c" data-gist-hide-footer="true" data-gist-line="82-91"></code>
        <p>The players have an <code>onTemplateReady</code> event handler defined that will call the  <code>onPlay() </code>method when the <code>PLAY</code> event is detected. </p>
        <code data-gist-id="54e6a80744a713133d6c" data-gist-hide-footer="true" data-gist-line="93-99"></code>
        <p>The <code>onPlay()</code> method loops through the <code>players</code> array and pauses the players.</p>
        <code data-gist-id="54e6a80744a713133d6c" data-gist-hide-footer="true" data-gist-line="101-112"></code>
      </div><!-- div id="logic" -->
      <div id="code" class="section">
        <h2>The code</h2>
        <p>See the full code <a href="https://gist.github.com/bcls/54e6a80744a713133d6c">here</a>.</p>
        <h3>Complete JavaScript used for this sample</h3>
        <code data-gist-id="54e6a80744a713133d6c" data-gist-hide-footer="true" data-gist-line="82-112"></code>
      </div><!-- div id="code" -->
    </div><!-- div id="main" -->
  </div><!-- <div class="row"> -->

  <!-- bcl scripts -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/2.2/gist-embed.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.3/handlebars.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>

  <script src="/en/scripts/docs-nav-data.min.js"></script>
  <script src="/en/scripts/bcls-doc-site.js"></script>
  <script src="/en/scripts/flashHTMLswitch-nojQ.js"></script>
    <script>
        $(document).foundation();
    </script>
<script type="text/javascript" src="http://admin.brightcove.com/js/BrightcoveExperiences.js"></script>

  <!--******** Any scripts specific to page samples should go here *********-->
  <script id="pageScript" type="text/javascript">

      <!-- custom scripts for this player and functionality -->
	var players = [];	// array to hold players

	function onTemplateLoad (id) {
		// Add each player's id to the players array
		console.log(id + " loaded");
		players.push(id);
	}

	function onTemplateReady (event) {
		// Add a PLAY event handler to each player
		var player = brightcove.api.getExperience(event.target.experience.id);
		var videoPlayer = player.getModule(brightcove.api.modules.APIModules.VIDEO_PLAYER);
		// Wrap handler in anaonymous function
		videoPlayer.addEventListener(brightcove.api.events.MediaEvent.PLAY, function(event) {onPlay(event);});
	}

	function onPlay(event) {
		var id = event.target.experience.id;
		console.log ("Player " + id + " playing");

		// Loop through the players array, and stop the others
		for (var i = 0; i < players.length; i++) {
			if (players[i] != id) {
				console.log ("Stopping player " + players[i]);
				var player = brightcove.api.getExperience(players[i]);
				var videoPlayer = player.getModule(brightcove.api.modules.APIModules.VIDEO_PLAYER); 
				videoPlayer.pause(true);
			}
		}
	}
    <!-- end custom scripts for this player and functionality -->
</script>

    
    
	<iframe id="CSAT" src="http://survey.clicktools.com/app/survey/go.jsp?iv=3poon3e7e9spn&q1=[articleURL]" style="margin-left:25%; padding-bottom:20px;width:550px;height:475px;border:none"></iframe>
<script>
    
    var cSat = document.getElementById('CSAT'),
        cSatSrc = cSat.getAttribute('src'),
        pageurl = window.location.href;
    cSat.setAttribute('src', cSatSrc.replace('[articleURL]', pageurl));
    
</script>
<br><br>
<div class="footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a></div>
<script>
var feedbackMail = document.getElementById("feedbackMail");
feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
</script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">

    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
        <title id="bclPageTitle">Smart Player API Sample: Language Selection</title>
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" type="text/css">
        <script src="//use.edgefonts.net/source-code-pro.js"></script>
        <link rel="stylesheet" href="//files.brightcove.com/proxima-nova/font-faces.css" type="text/css">
        <link rel="stylesheet" href="/en/styles/bcls-doc-site.css" type="text/css"/>
        <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/zenburn.css" />
        <link rel="stylesheet" href="/en/styles/anytime.5.0.0-1401232312.min.css" type="text/css"/>
        <link rel="stylesheet" href="/en/video-cloud/smart-player-api/samples/css/api-samples.css" type="text/css">
        <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2728311-29', 'auto');
  ga('send', 'pageview');

</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>
    </head>

    <body>
  <!-- header navbar -->
	<div id="navWrapper" class="fixed"></div>
	<!-- breadcrumbs -->
	<nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
  <!-- search -->
  <div id="searchModal" class="reveal-modal" data-reveal></div>
  <!-- content -->
    <div class="row">
        <div class="sidebar large-2 columns show-for-large-up">
            <div id="sidenav" class="side-nav"></div>
        </div>
        <div id="main" class="large-10 small-12 columns">
        <div id="top" class="section">
            <h1>Language Selection</h1>
            <!-- content starts here -->

            <!-- Start of content -->

            <p class="BCL-objective">This example loads an English language video in the player and provides a drop-down menu to choose the same video in different languages. To get the playlist of language videos, we use the Smart Player API's <code>getPlaylistByID()</code> method to retrieve the video data for a specific playlist. When you select a language from the drop-down menu, the appropriate video id is retrieved from the playlist data, and the <code>loadVideoByID()</code> method is used to load the video in the player.</p>
        </div><!-- div id="top" -->

        <!-- every div class section must have an id -->
        <!--break-->
        <div id="resources" class="section">
        <!-- h2 contents will be in page navigation label - 21 characters (including spaces) maximum -->
          <h2><a name="resources"></a>API resources used</h2>
          <h3>Smart Player API</h3>
          <p>This sample uses the following API resources</p>
          <h4>Modules and methods</h4>
          <ul>
                <li>VIDEO_PLAYER
                  <ul>
                    <li>loadVideoByID()</li>
                    <li>play()</li>
                  </ul>
                </li>
                <li>CONTENT
                  <ul>
                    <li>getPlaylistByID()</li>
                  </ul>
                </li>
          </ul>
          <h4>Events</h4>
          <ul>
            <li>onTemplateLoad</li>
            <li>onTemplateReady</li>
            <li>selection: onChange</li>
          </ul>
          <p class="text-warning">Note: the read methods of the Smart Player API are availble to Express 3, Professional, and Enterprise accounts.</p>
        </div><!-- div id="resources" -->

        <div id="player" class="section">
            <!-- h2 contents will be in page navigation label - 21 characters (including spaces) maximum -->
            <h2><a name="player"></a>The player</h2>
            <p>A standard Video Player is used for this sample.</p>
            <p class="text-warning">Note: the buttons below are for development purposes only &mdash; do not use in production.</p>

            <!-- buttons to switch between HTML and Flash Players -->
            <div id="modeSwitch">
                <span class="button" id="switchToHTML5" style="margin-bottom: 20px;margin-right: 10px;">Switch to HTML5 Player</span>
                <span class="button" id="switchToFlash" style="margin-bottom: 20px;">Switch to Flash Player</span>
           </div><!-- div id="modeSwitch" -->
            
            <!-- Start of Brightcove Player -->

            <div style="display:none">
            Used for language select videos. 
            </div>
            
            <!--
            By use of this code snippet, I agree to the Brightcove Publisher T and C 
            found at https://accounts.brightcove.com/en/terms-and-conditions/. 
            -->
            
            <script language="JavaScript" type="text/javascript" src="//sadmin.brightcove.com/js/BrightcoveExperiences.js"></script>
            
            <object id="myExperience2745496927001" class="BrightcoveExperience">
              <param name="bgcolor" value="#FFFFFF" />
              <param name="width" value="500" />
              <param name="height" value="470" />
              <param name="playerID" value="2750693723001" />
              <param name="playerKey" value="AQ~~,AAABmA9XpXk~,-Kp7jNgisrcOuHNDXJqPJ4SYayVW8GL-" />
              <param name="isVid" value="true" />
              <param name="isUI" value="true" />
              <param name="dynamicStreaming" value="true" />
              <param name="@videoPlayer" value="2745496927001" />
              
              <!-- smart player api params -->
              <param name="includeAPI" value="true" />
              <param name="templateLoadHandler" value="onTemplateLoad" />
              <param name="templateReadyHandler" value="onTemplateReady" />
              
            </object>
            
            <!-- 
            This script tag will cause the Brightcove Players defined above it to be created as soon
            as the line is read by the browser. If you wish to have the player instantiated only after
            the rest of the HTML is processed and the page load is complete, remove the line.
            -->
            <script src="//docs.brightcove.com/en/scripts/https-fix.js"></script><script type="text/javascript">brightcove.createExperiences();</script>
            
            <!-- End of Brightcove Player -->
            
            
            <div id="input" class="section">
            	<!-- language selection drop-down menu -->
                <p>Select a language:	&nbsp;
                	<select id="videoLanguage" onchange="loadVideo(this.value)">
                  	<option selected="selected">English</option>
                    <option>German</option>
                    <option>Spanish</option>
                  </select>
                </p>
            </div>
            </div>
         <div id="logic" class="section" >
            <h2><a name="logic"></a>How it is done</h2>
            <p>The sample uses the Smart Player API.</p>
            <h3>The Smart Player API part</h3>
            <p>When the player is ready, we get a reference to the <code>VIDEO_PLAYER</code> module and the <code>CONTENT</code> module. Then we call the <code>buildPlaylistData()</code> function and use the <code>CONTENT</code> module's <code>getPlaylistByID()</code> method to retrieve the playlist video data for a specified id. (see <a href="/en/video-cloud/smart-player-api/solutions/fetch-playlists.html">Fetch Playlists</a> for more information about how to do this). </p>
            <p>When the user selects a language in the drop-down menu, the <code>loadVideo()</code> function is called. There, we loop through the video data in the playlist, parsing the JSON data that we have stored in the <code>longDescription</code> field. When the language field matches the selected value, we get the associated <code>videoID</code>. We use the <code>loadVideoByID()</code> method to load the selected video, and we use the <code>play()</code> method to start the video.</p>
            <p>We could have simply stored a language text field in the video data's <code>longDescription</code>, but the JSON format was used so that you could add other metadata.</p>
            <h3>The rest</h3>
            <p>The rest of the code is just HTML and JavaScript. We use the <code>onchange()</code> event in the <code>select</code> tag to call the <code>loadVideo()</code> function when a language is selected.</p>
            
          </div><!-- div id="logic" -->

          <div id="code" class="section">
            <h2>The code</h2>
            <h3>Modifications to the player publishing code</h3>

            <code data-gist-id="7033588" data-gist-line="34-37" data-gist-hide-footer="true"></code>

          <h3>JavaScript used for this sample:</h3>
		      <code data-gist-id="7033588" data-gist-line="61-109" data-gist-hide-footer="true"></code>
          <p>See the full code <a href="https://gist.github.com/bcls/7033588">here</a>.</p>
          </div><!-- div id="code" -->
      </div><!-- div id="main" -->
    </div><!-- <div class="row"> -->

    <!-- bcl scripts -->
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/2.2/gist-embed.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.3/handlebars.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>

    <script src="/en/scripts/docs-nav-data.min.js"></script>
    <script src="/en/scripts/bcls-doc-site.js"></script>
    <script src="/en/scripts/flashHTMLswitch-nojQ.js"></script>
    <script>
        $(document).foundation();
    </script>

    <!--******** Any scripts specific to page samples should go here *********-->
    <script id="pageScript" type="text/javascript">

	  <!-- custom script for language selection -->
		var player,
			APIModules,
			videoPlayer,
			contentModule,
			videoData = {};

		var onTemplateLoad = function(experienceID){
			console.log("EVENT: onTemplateLoad");
			// get a reference to the player and API Modules
			player = brightcove.api.getExperience(experienceID);
			APIModules = brightcove.api.modules.APIModules;
		};

		var onTemplateReady = function(evt) {
			console.log("EVENT.onTemplateReady");
			// get references to modules
			videoPlayer = player.getModule(APIModules.VIDEO_PLAYER);
			contentModule = player.getModule(APIModules.CONTENT);
			// fetch the playlist
			buildPlaylistData();

		}
		
		var buildPlaylistData = function(){
			// retrieves the playlist data from the Video Cloud service
			contentModule.getPlaylistByID(2744551701001 , function(playlistDTO) {
				//console.log(playlistDTO);
				videoData = playlistDTO;	
			})
		}
			
		var loadVideo = function(selectedLang) {
			console.log("load video: " + selectedLang);
			for (var i in videoData.videos) {
				data = JSON.parse(videoData.videos[i].longDescription);
				//console.log(data.language);
				if (data.language == selectedLang) {
					videoID = videoData.videos[i].id;
				}
			}
			// load and play the selected video
			videoPlayer.loadVideoByID(videoID);
			videoPlayer.play();
		}

	  <!-- end of custom script for language selection -->
    </script>

      
    
	<iframe id="CSAT" src="http://survey.clicktools.com/app/survey/go.jsp?iv=3poon3e7e9spn&q1=[articleURL]" style="margin-left:25%; padding-bottom:20px;width:550px;height:475px;border:none"></iframe>
<script>
    
    var cSat = document.getElementById('CSAT'),
        cSatSrc = cSat.getAttribute('src'),
        pageurl = window.location.href;
    cSat.setAttribute('src', cSatSrc.replace('[articleURL]', pageurl));
    
</script>
<br><br>
<div class="footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a></div>
<script>
var feedbackMail = document.getElementById("feedbackMail");
feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
</script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
    <!-- change title to match the h1 heading -->
    <title id="bclPageTitle">Smart Player API Samples: Scroll Player into View</title>
    <link href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" rel="stylesheet" type="text/css" />
    <script src="//use.edgefonts.net/source-code-pro.js"></script>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/font-hack/2.015/css/hack-extended.min.css">

    <link rel="stylesheet" type="text/css" href="/en/styles/bcls-doc-site.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/github.min.css">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/font-hack/2.015/css/hack-extended.min.css">

    <link href="/en/video-cloud/smart-player-api/samples/css/api-samples.css" rel="stylesheet" type="text/css">
    
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2728311-29', 'auto');
  ga('send', 'pageview');

</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>
  </head>
  <body>
  <!-- header navbar -->
	<div id="navWrapper" class="fixed"></div>
	<!-- breadcrumbs -->
	<nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
  <!-- search -->
  <div id="searchModal" class="reveal-modal" data-reveal></div>
  <!-- content -->
    <div class="row">
        <div class="sidebar large-2 columns show-for-large-up">
            <div id="sidenav" class="side-nav"></div>
        </div>
        <div id="main" class="large-10 small-12 columns">
        <div id="top" class="section">
            <h1 id="bclPageHeading">Smart Player API Samples: Scroll Player into View</h1>
          <p>This example starts playing the video as soon as you fully scroll the player into view, and pauses the video when you scroll it out of view. We call the Smart Player API's <code>play()</code> and <code>pause()</code> methods to start and stop the video based on the position of the player.</p>
          <p>Scroll down to the player to see it work.</p>
        </div>
        <!-- every div class section must have an id -->
        <div class="section" id="resources">
          <h2><a name="resources"></a>API resources used</h2>
          <p>This sample uses the following API resources</p>
          <h4>Modules and methods</h4>
          <ul>
            <li>VIDEO_PLAYER
              <ul>
                <li>play()</li>
                <li>pause()</li>
              </ul>
            </li>
          </ul>
          <h4>Events</h4>
          <ul>
            <li>templateLoad</li>
            <li>templateReady</li>
            <li>window: onscroll</li>
          </ul>
        </div>
        <div class="section" id="logic">
            <h2><a name="logic"></a>How it is done</h2>
            <p>The sample uses the Smart Player API.</p>
            <h3>The Smart Player API part</h3>
            <p>First, we get a reference to the <code>VIDEO_PLAYER</code> module. When you scroll the player fully into view, we call the Smart Player API's <code>play()</code> method start playing the video. When you scroll the player out of view, we call the Smart Player API's <code>pause()</code> method stop the video.</p>
            <h3>The rest</h3>
            <p>We use the <code>window.onscroll</code> event to detect when the page is being scrolled. If it is, we call the <code>checkIfVideoInView()</code> and <code>isScrolledIntoView()</code> methods to determine if the HTML player element is fully visible in the viewport (i.e., you can see all of the player in the browser). When the player is fully visible, the value of <code>true</code> is returned and we start the video play. Otherwise, the value of <code>false</code> is returned and we stop the video.</p>
            <p>The video will not play if you quickly scroll down before the player loads. To get around this issue, in the <code>onTemplateReady()</code> method, we call the <code>checkIfVideoInView()</code> method to check if the player is already scrolled into view.</p>
          </div>
        <div class="section" id="player">
          <!-- h2 contents will be in page navigation label - 21 characters (including spaces) maximum -->
          <h2><a name="player"></a>The player</h2>
          <p>A standard Chromeless Video Player is used for this sample.</p>
          <p class="text-warning">Note: the buttons below are for development purposes only &mdash; do not use in production.</p>
          <!-- buttons to switch between HTML and Flash Players -->
          <div id="modeSwitch">
            <span class="button" id="switchToHTML5" style="margin-bottom: 20px;margin-right: 10px;">Switch to HTML5 Player</span>
            <span class="button" id="switchToFlash" style="margin-bottom: 20px;">Switch to Flash Player</span>
          </div>
          <div class="player-block">
          
          <!-- Start of Brightcove Player -->

          <div style="display:none">
        
          </div>
        
          <!--
          By use of this code snippet, I agree to the Brightcove Publisher T and C
          found at https://accounts.brightcove.com/en/terms-and-conditions/.
          -->
        
          <script type="text/javascript" src="//sadmin.brightcove.com/js/BrightcoveExperiences.js"></script>
          <div id="thePlayer">
            <object id="myExperience1507781667001" class="BrightcoveExperience">
              <param name="bgcolor" value="#FFFFFF" />
              <param name="width" value="486" />
              <param name="height" value="412" />
              <param name="playerID" value="1507808031001" />
              <param name="playerKey" value="AQ~~,AAABXxBZKsE~,AdU2xXeQoKDu-DirvwwAJg9zE6m-qyfI" />
              <param name="isVid" value="true" />
              <param name="dynamicStreaming" value="true" />
        
              <param name="@videoPlayer" value="1507781667001" />
        
              <!-- smart player api params -->
              <param name="includeAPI" value="true" />
              <param name="templateLoadHandler" value="onTemplateLoad" />
              <param name="templateReadyHandler" value="onTemplateReady" />
        
            </object>
          </div>
          <br/><br/><br/>
          <!--
          This script tag will cause the Brightcove Players defined above it to be created as soon
          as the line is read by the browser. If you wish to have the player instantiated only after
          the rest of the HTML is processed and the page load is complete, remove the line.
          -->
          <script src="//docs.brightcove.com/en/scripts/https-fix.js"></script><script type="text/javascript">brightcove.createExperiences();</script>
        
          <!-- End of Brightcove Player -->
            
          </div>
          
          <div class="section" id="code">
            <h2><a name=""></a>The code</h2>
            <h3>Modifications to the player publishing code</h3>
             <code data-gist-id="7363002" data-gist-line="40-43" data-gist-hide-footer="true"></code>

            <h3>JavaScript used for this sample:</h3>
            <p class="text-warning">Note: We assign the <code>window.onscroll</code> event handler a reference to the function, so no parentheses are needed after the function name.</p>
             <code data-gist-id="7363002" data-gist-line="57-110" data-gist-hide-footer="true"></code>

          </div>
        </div>
      </div>
    </div>
    <!-- bcl scripts -->
    <script src="/en/scripts/prefix.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/2.2/gist-embed.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.3/handlebars.min.js"></script>
    
    <script src="/en/scripts/docs-nav-data.min.js"></script>
    <script src="/en/scripts/bcls-doc-site.js"></script>
    <script src="/en/scripts/flashHTMLswitch-nojQ.js"></script>
    <script>
        $(document).foundation();
    </script>
    <script id="pageScript" type="text/javascript">

	  <!-- custom script for language selection -->
		var player,
			APIModules,
			videoPlayer,
			playerReady=false;

		var onTemplateLoad = function(experienceID){
			console.log("EVENT: onTemplateLoad");
			// get a reference to the player and API Modules
			player = brightcove.api.getExperience(experienceID);
			APIModules = brightcove.api.modules.APIModules;
		};

		var onTemplateReady = function(evt) {
			console.log("EVENT.onTemplateReady");
			// get references to modules
			videoPlayer = player.getModule(APIModules.VIDEO_PLAYER);
			playerReady = true;
            checkIfVideoInView(thePlayer);
		}
		
		var isScrolledIntoView = function(elem) {
			// get the position of the viewport
			var docViewTop = $(window).scrollTop();
            var docViewBottom = docViewTop + $(window).height();
			
			// get the position of the player element
            var elemTop = $(elem).offset().top;
            var elemBottom = elemTop + $(elem).height();
			
			// determine if the player element is in fully in the viewport
            return ((elemBottom >= docViewTop) && (elemTop <= docViewBottom)
              && (elemBottom <= docViewBottom) &&  (elemTop >= docViewTop) );
		}
		
		var checkIfVideoInView = function() {
          if (playerReady) {
			  // the player is loaded
			 if ( isScrolledIntoView(thePlayer) ) {
				// the player is fully in the viewport
				videoPlayer.play();
			  } else {
				// the player is not in the viewport
				videoPlayer.pause(); 
			  } 
		  }
        }
		
		window.onscroll = checkIfVideoInView;
		
	</script>
    
      
    
	<iframe id="CSAT" src="http://survey.clicktools.com/app/survey/go.jsp?iv=3poon3e7e9spn&q1=[articleURL]" style="margin-left:25%; padding-bottom:20px;width:550px;height:475px;border:none"></iframe>
<script>
    
    var cSat = document.getElementById('CSAT'),
        cSatSrc = cSat.getAttribute('src'),
        pageurl = window.location.href;
    cSat.setAttribute('src', cSatSrc.replace('[articleURL]', pageurl));
    
</script>
<br><br>
<div class="footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a></div>
<script>
var feedbackMail = document.getElementById("feedbackMail");
feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
</script>
</body>
</html>

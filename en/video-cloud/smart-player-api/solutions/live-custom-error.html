<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
    <!-- change title to match the h1 heading -->
    <title id="bclPageTitle">Live Custom Error Message</title>
    <link href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" rel="stylesheet" type="text/css" />
    <script src="//use.edgefonts.net/source-code-pro.js"></script>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/font-hack/2.015/css/hack-extended.min.css">

    <link rel="stylesheet" type="text/css" href="/en/styles/bcls-doc-site.css" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/github.min.css">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/font-hack/2.015/css/hack-extended.min.css">

	  <link rel="stylesheet" href="//code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css">
    <link href="/en/video-cloud/smart-player-api/samples/css/api-samples.css" rel="stylesheet" type="text/css">
    
    
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2728311-29', 'auto');
  ga('send', 'pageview');

</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>
  </head>
  <body>
  <!-- header navbar -->
	<div id="navWrapper" class="fixed"></div>
	<!-- breadcrumbs -->
	<nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
  <!-- search -->
  <div id="searchModal" class="reveal-modal" data-reveal></div>
  <!-- content -->
    <div class="row">
        <div class="sidebar large-2 columns show-for-large-up">
            <div id="sidenav" class="side-nav"></div>
        </div>
        <div id="main" class="large-10 small-12 columns">
        <div id="top" class="section">
            <h1 id="bclPageHeading">Live Custom Error Message</h1>
          <p>This example hides the player and displays a message image when a user tries to play a live video stream that is not available.</p>
            
        </div>
        <!-- every div class section must have an id -->
        <div class="section" id="resources">
          <h2><a name="resources"></a>API resources used</h2>
          <h3>Smart Player API</h3>
          <p>This sample uses the following API resources</p>
          <h4>Modules and methods</h4>
          <ul>
            <li>VIDEO_PLAYER</li>
          </ul>
          <h4>Events</h4>
          <ul>
            <li>templateLoad</li>
            <li>templateReady</li>
            <li>templateError</li>
            <li>mediaError</li>
          </ul>
        </div>
			
        <div class="section" id="player">
          <!-- h2 contents will be in page navigation label - 21 characters (including spaces) maximum -->
          <h2><a name="player"></a>The player</h2>
          <p>A standard Chromeless Video Player is used for this sample.</p>
          <p class="text-warning">Note: the buttons below are for development purposes only &mdash; do not use in production.</p>
          <!-- buttons to switch between HTML and Flash Players -->
          <div id="modeSwitch">
            <span class="button" id="switchToHTML5" style="margin-bottom: 20px;margin-right: 10px;">Switch to HTML5 Player</span>
            <span class="button" id="switchToFlash" style="margin-bottom: 20px;">Switch to Flash Player</span>
          </div>
          
          <p>This player is set to play a live video stream, which is currently unavailable. Start video playback to see the custom error message that replaces the player.</p>
			
          <div id="player-block">

            <!-- Start of Brightcove Player -->

            <div style="display:none">

            </div>

            <!--
            By use of this code snippet, I agree to the Brightcove Publisher T and C 
            found at https://accounts.brightcove.com/en/terms-and-conditions/. 
            -->

            <script language="JavaScript" type="text/javascript" src="http://admin.brightcove.com/js/BrightcoveExperiences.js"></script>

            <object id="myExperience846254200001" class="BrightcoveExperience">
              <param name="bgcolor" value="#FFFFFF" />
              <param name="width" value="480" />
              <param name="height" value="270" />
              <param name="playerID" value="1847432356001" />
              <param name="playerKey" value="AQ~~,AAAAksdab5E~,uSnu82XezIZ7ueRQ1JqfT4-A0whaLgE3" />
              <param name="isVid" value="true" />
              <param name="isUI" value="true" />
              <param name="dynamicStreaming" value="true" />
              <param name="@videoPlayer" value="2176497899001" />

              <param name="templateErrorHandler" value="onTemplateError"/>

              <!-- smart player api params -->
              <param name="includeAPI" value="true" />
              <param name="templateLoadHandler" value="onTemplateLoad" />
              <param name="templateReadyHandler" value="onTemplateReady" />
            </object>

            <!-- 
            This script tag will cause the Brightcove Players defined above it to be created as soon
            as the line is read by the browser. If you wish to have the player instantiated only after
            the rest of the HTML is processed and the page load is complete, remove the line.
            -->
            <script type="text/javascript">brightcove.createExperiences();</script>

            <!-- End of Brightcove Player -->

          </div><!-- id="player-block" -->
        </div><!-- id="player" -->
			
          <div class="section" id="logic">
            <h2><a name="logic"></a>How it is done</h2>
            <p>This example uses the Smart Player API to direct error handling when there is no content available. In the error handler function, we get a reference to the player's <code>div</code> element and remove all of its child elements from the page. Then we add an <code>img</code> element with the custom error message. In this way, we have replaced the player with a custom image.</p>
            <h3>Modifications to the player publishing code</h3>
            <p>From Video Cloud, copy the player publishing code to your page.</p>
            <ol>
              <li>Add the following parameters to name the templete error, template ready and template load handler  functions:</li>
            </ol>
            <code data-gist-id="366a353db98e58876c68" data-gist-line="36-41" data-gist-hide-footer="true"></code>
            <h3>The Smart Player API part</h3>
            <p>This example uses JavaScript in the page code to access the Smart Player API.</p>
            <ol start="2">
              <li>When the player is loaded, get a reference to the player and the API modules. </li>
            </ol>
            <p><code data-gist-id="366a353db98e58876c68" data-gist-line="97-102" data-gist-hide-footer="true"></code></p>
            <ol start="3">
              <li>When the player is ready, get a reference to the <code>VIDEO_PLAYER</code> module. Notice there is an <code>addEventListener</code> call that you can leave commented out for now. This is an alternate way to listen for media errors.</li>
            </ol>
            <p><code data-gist-id="366a353db98e58876c68" data-gist-line="104-110" data-gist-hide-footer="true"></code></p>
            <ol start="4">
              <li>In the template error handler function, write the error info to the log and call the <code>displayStandbyMsg()</code> function.</li>
            </ol>
            <p><code data-gist-id="366a353db98e58876c68" data-gist-line="82-87" data-gist-hide-footer="true"></code></p>
            <ol start="5">
              <li>Remove the player elements and display a custom image.</li>
              <ul>
                <li>Lines 72-75: Get a reference to the <code>div</code> container around the player and remove all of the child elements.</li>
                <li>Lines 76-78: Create an <code>img</code> element with the <code>src</code> property pointing to the custom image. This element is then added to now empty <code>div</code> container.</li>
              </ul>
            </ol>
            <p><code data-gist-id="366a353db98e58876c68" data-gist-line="70-79" data-gist-hide-footer="true"></code></p>
            
            <h3>Alternate solution</h3>
            <p>Instead of using the template error handler, you can also listen for a media error.</p>
            <ol>
              <li>Comment out the templete error handler that you added to the player code in the previous section.</li>
            </ol>
            <p><code data-gist-id="f48ae56755bb20675ac7" data-gist-line="36-41" data-gist-hide-footer="true" data-gist-highlight-line="36"></code></p>
            <ol start="2">
              <li>When the player is ready, add an event listener for the <code>mediaError</code> event.</li>
            </ol>
            <p><code data-gist-id="f48ae56755bb20675ac7" data-gist-line="104-110" data-gist-hide-footer="true" data-gist-highlight-line="109"></code></p>
            <ol start="3">
              <li>In the media error handler function, write the error info to the log and call the <code>displayStandbyMsg()</code> function.</li>
            </ol>
            <p><code data-gist-id="f48ae56755bb20675ac7" data-gist-line="90-95" data-gist-hide-footer="true"></code></p>
			
          <div id="code" class="section">
            <h2><a name=""></a>The code</h2>
            <p>Browse or download the <a href="https://gist.github.com/bcls/366a353db98e58876c68">full code sample</a>.</p>

            <h3>JavaScript used for this sample:</h3>
            <code data-gist-id="366a353db98e58876c68" data-gist-line="56-112" data-gist-hide-footer="true"></code>
          </div><!-- div id="code" --> 

        </div>
      </div>
    </div>
    <!-- bcl scripts -->
    <script src="/en/scripts/prefix.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/2.2/gist-embed.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.3/handlebars.min.js"></script>
    
    <script src="/en/scripts/docs-nav-data.min.js"></script>
    <script src="/en/scripts/bcls-doc-site.js"></script>
    <script src="/en/scripts/BrowserDetect.js"></script>
<!--    <script src="/en/scripts/jQuery-Feature-Carousel/js/jquery.featureCarousel.js"></script>-->
<!--    <script src="/en/scripts/bc-mapi.js"></script>-->
    <script src="/en/scripts/secondsToTime.js"></script>
    <script src="/en/scripts/flashHTMLswitch-nojQ.js"></script>
    <script src="/en/scripts/prefix.js"></script>
    <script>
        $(document).foundation();
    </script>
	  
	<!-- jQuery libraries for tabbed navigation -->
	<script src="//code.jquery.com/jquery-1.10.2.js"></script>
	<script src="//code.jquery.com/ui/1.11.1/jquery-ui.js"></script>
	<!-- jQuery initialize tabbed navigation -->
	<script>
		$(function () {
			$("#tabs").tabs();
		});
	</script>
	  
    <script id="pageScript" type="text/javascript">
      /******** Any scripts specific to page samples should go here *********/
      
		  var player,
        APIModules,
        videoPlayer;
    
      // utility function logger - check for console to avoid errors in old IE
      var bclsLog = function (context, message) {
        if (window["console"] && console["log"]) {
            console.log(context, message);
        };
      };

      // display standby message	
      var displayStandbyMsg = function() {
        bclsLog("displayStandbyMsg", "Remove player and display standby image.");
        var img = document.createElement("IMG");
        img.src = "http://cs1.brightcodes.net/vineet/HTML_files/pleaseStandBy1.png";
        var live_div= document.getElementById("player-block");
        while (live_div.hasChildNodes()) { 
          live_div.removeChild(live_div.lastChild); 
        } 
        document.getElementById("player-block").appendChild(img);
      };	

      // works for non-DVR, DVR LIVE Video	
      var onVideoError = function(evt) {
        bclsLog("onVideoError", "There is an Error playing back the currently LIVE video.");
        bclsLog("type:", evt.type);
        bclsLog("errorType:", evt.code);
        displayStandbyMsg();
      };	
    
      // works for non-DVR, DVR LIVE Video	
      var onTemplateError = function(evt) {
        bclsLog("onTemplateError", "There is an Error playing back the currently LIVE video.");
        bclsLog("type:", evt.type);
        bclsLog("errorType:", evt.errorType);
        displayStandbyMsg();
      };

      var onTemplateLoad = function(experienceID){
        bclsLog("EVENT", "onTemplateLoad");
        // get a reference to the player and API Modules
        player = brightcove.api.getExperience(experienceID);
        APIModules = brightcove.api.modules.APIModules;
      };

      var onTemplateReady = function(evt) {
        bclsLog("EVENT", "onTemplateReady");
        // get references to modules
        videoPlayer = player.getModule(APIModules.VIDEO_PLAYER);
        // add event listeners - can listen for a media error event instead of a template error
//        videoPlayer.addEventListener("mediaError", onVideoError);  
      };
      
    </script>
<!--
    <script>
      $(document).ready(function(){
        $("#js_code").html(BCLSpreFix($("#pageScript").html()));
        $("#css_code").html(BCLSpreFix($("#pageStyles").html()));
      });
    </script>
-->
      
    
	<iframe id="CSAT" src="http://survey.clicktools.com/app/survey/go.jsp?iv=3poon3e7e9spn&q1=[articleURL]" style="margin-left:25%; padding-bottom:20px;width:550px;height:475px;border:none"></iframe>
<script>
    
    var cSat = document.getElementById('CSAT'),
        cSatSrc = cSat.getAttribute('src'),
        pageurl = window.location.href;
    cSat.setAttribute('src', cSatSrc.replace('[articleURL]', pageurl));
    
</script>
<br><br>
<div class="footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a></div>
<script>
var feedbackMail = document.getElementById("feedbackMail");
feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Begin Drupal Taxonomy Data -->
    <meta name="products" content="Video Cloud, Brightcove Player">
    <meta name="role" content="Device SDK Developer">
    <meta name="task" content="Develop with the Native SDKs">
    <meta name="topic" content="Troubleshooting/Error Handling">
    <meta name="sdk" content="iOS,tvOS,Android">
    <meta name="keywords" content="device,SDK,FAQ">
    <!-- End Drupal Taxonomy Data -->

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  	<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
    <meta name="robots" content="noindex">
  	<!-- change title to match the h1 heading -->
  	<title>Working with Android Pie and Network TLS</title>

    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/normalize.css" />
    <link href="//fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700" rel="stylesheet" type="text/css">
    <script src="//use.edgefonts.net/source-code-pro.js"></script>
    <link rel="stylesheet" href="//learning-services-media.brightcove.com/doc-assets/js/prism/prism.css">
    <link rel="stylesheet" href="//docs.brightcove.com/en/styles/template-less/css/bcls-doc.css">
    <link rel="stylesheet" href="/en/styles/foundation-fixes.css">

    <script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>

</head>

<body>
	<!-- header navbar -->
	<div id="navWrapper" class="fixed"></div>
	<!-- breadcrumbs -->
	<nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
	<!-- search -->
	<div id="searchModal" class="reveal-modal" data-reveal></div>
	<!-- content -->
	<div class="row">
		<div class="sidebar large-2 columns show-for-large-up">
			<div id="sidenav" class="side-nav"></div>
		</div>
		<div id="main" class="large-10 small-12 columns">
			<h1>Working with Android Pie and Network TLS</h1>
      <aside class="bcls-aside bcls-aside--warning">This is a temporary STAGING document for review only. For the official Brightcove documentation site, go to <a href="https://support.brightcove.com/">support.brightcove.com</a></aside>
      <p>In this topic, you will learn how to manage secure communications with your apps using Android Pie with the Native SDK for Android.</p>


	    <!-- BEGIN DRUPAL CONTENT -->

      <article class="bcls-article">
  <section class="bcls-section">
  <h2 id="Overview">Overview</h2>

  <p>Transport Layer Security (TLS) is a protocol for providing secure communications over a computer network. TLS is implemented on top of HTTP, allowing for encrypted communication over HTTPS.</p>
  <p>
    When Google released Android Marshmallow (API level 23), it provided a configuration to disable clear text traffic, which would prevent your app from making clear HTTP requests. With the release of Android Pie (API level 28), clear text traffic is disabled by default. If your application attempts to do a clear HTTP request, an IOException is thrown with the following message:
  </p>
  <pre>
<code class="notranslate language-java">Exception: IOException java.io.IOException: Cleartext HTTP traffic to * not permitted</code></pre>
<p>
  If your app targets Android Pie (API level 28) or above, you need to decide how to handle this behavior change so that your app works as expected. You have three options:
</p>
<ul>
  <li>
    <a href="#HTTPS_only">Ensure your app only makes HTTPS requests</a>
  </li>
  <li>
    <a href="#HTTP_for_all_domains">Enable clear HTTP traffic for all domains</a>
  </li>
  <li>
    <a href="#HTTP_for_specific_domains">Enable clear HTTP traffic for all domains</a>
  </li>
</ul>
<p>
  For more information, visit googleâ€™s website: <a href="https://developer.android.com/about/versions/pie/android-9.0-changes-28#framework-security-changes">Framework security changes</a> and
<a href="https://developer.android.com/training/articles/security-config">Network security configuration</a>.
</p>

  </section>

  <section class="bcls-section">
  <h2 id="HTTPS_only">HTTPS only</h2>
  <p>
    One option is to make sure all of your network requests use HTTPS. To do so, follow these steps:
  </p>
  <ol class="bcls-tasklist__restart">
    <li>
      <p>
        Enable your CDN for secure communication.
      </p>
      <ul>
        <li>
          Video Cloud customers (whether you are using the house CDN or a named CDN) should contact their Brightcove account managers to ensure accounts are configured to deliver over HTTPS.
        </li>
        <li>
          For those using remote assets, you may need to configure your CDN appropriately.
        </li>
      </ul>
    </li>
    <li>
      <p>
        Use secure communication to deliver your media content. This includes video, ads, captions, poster images, thumbnails and other third-party API connections.
      </p>
        <ul>
          <li>
            Video Cloud customers: Use the Playback API to retrieve the secure protocol for each of your assets. The Brightcove SDK for Android selects HTTPS by default when available.
          </li>
          <li>
            Brightcove Player customers: Make sure your media content is delivered over HTTPS.
          </li>
        </ul>
    </li>
  </ol>

  </section>

  <section class="bcls-section">
  <h2 id="HTTP_for_all_domains">HTTP for all domains</h2>
  <p>
    Your app can use clear HTTP traffic for all domains. To enable this, open the <strong>AndroidManifest</strong> file, and add the following line in the <code class="notranslate">application</code> tag. For example:
  </p>
  <pre>
<code class="notranslate language-java">&lt;application
   android:name=&quot;mypackage.MyApplication&quot;
   android:usesCleartextTraffic=&quot;true&quot;&gt;
&hellip;
&lt;/application&gt;</code></pre>

  </section>

  <section class="bcls-section">
  <h2 id="HTTP_for_specific_domains">HTTP for specific domains</h2>
  <p>
    You can specify certain domains to be permitted to use clear HTTP requests. To do this, follow these steps:
  </p>
  <ol class="bcls-tasklist__restart">
    <li>
      <p>
        Create an xml file, for example <strong>network-security-config.xml</strong>, and add it to the <strong>res/xml</strong> directory. See the following example for how to set your domains:
      </p>
      <pre><code class="notranslate language-java">&lt;network-security-config&gt;
   &lt;domain-config cleartextTrafficPermitted=&quot;true&quot;&gt;
       &lt;domain includeSubdomains=&quot;true&quot;&gt;c.brightcove.com&lt;/domain&gt;
       &lt;domain includeSubdomains=&quot;true&quot;&gt;solutions.brightcove.com&lt;/domain&gt;
   &lt;/domain-config&gt;
&lt;/network-security-config&gt;</code></pre>
    </li>
    <li>
      <p>
        Set the file name in your <strong>AndroidManifest</strong> as shown below:
      </p>
      <pre><code class="notranslate language-java">&lt;application
   android:name=&quot;mypackage.MyApplication&quot;
   <span class="bcls-highlight">android:networkSecurityConfig=&quot;@xml/network_security_config&quot;&gt;</span>
&hellip;
&lt;/application&gt;</code></pre>
    </li>
  </ol>
  <aside class="bcls-aside bcls-aside--information">The <code class="notranslate">networkSecurityConfig</code> parameter overrides the <code class="notranslate">usesCleartextTraffic</code> parameter. This means that if both are enabled, only the declared domains in the <code class="notranslate">networkSecurityConfig</code> file parameter will be allowed to use clear HTTP requests.</aside>


  </section>


  </article>


















      <!-- END DRUPAL CONTENT -->
		</div>
	</div>
	<!-- bcl scripts -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js"></script>
  <script src="/en/scripts/docs-nav-data.min.js"></script>
  <script src="/en/scripts/bcls-doc-site-v3.js"></script>
  <script src="//learning-services-media.brightcove.com/doc-assets/js/bcls-utils.js"></script>
  <script src="//learning-services-media.brightcove.com/doc-assets/js/prism/prism.js"></script>
  <script>
  $(document).foundation();
  </script>
  <!-- Any scripts specific to page samples should go here -->
</body>

</html>

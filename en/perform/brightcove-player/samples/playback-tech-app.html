<!DOCTYPE html>
<html lang="en">

<head>


  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
  <!-- change title to match the h1 heading -->
  <title>Brightcove Playback Technology App</title>
  <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/normalize.css" />
  <script src="//use.edgefonts.net/source-code-pro.js"></script>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/font-hack/2.015/css/hack-extended.min.css">

  <link rel="stylesheet" type="text/css" href="/en/styles/bcls-doc-site.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/atelier-forest.light.min.css">
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/font-hack/2.015/css/hack-extended.min.css">


  <!-- page plugin styles -->
  <link href="//solutions.brightcove.com/bcls/brightcove-player/overlay-toggle/overlay-button.css" rel="stylesheet">

  <style>
    .form-block {
        float: left;
        width: 50%;
        min-width: 400px;
        padding-right: 10px;
    }

	</style>

  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2728311-29', 'auto');
  ga('send', 'pageview');

</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>

  <!-- Page styles -->

</head>

<body>
    <!-- header navbar -->
    <div id="navWrapper" class="fixed"></div>
    <!-- breadcrumbs -->
    <nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
  <!-- search -->
  <div id="searchModal" class="reveal-modal" data-reveal></div>
  <!-- content -->
    <div class="row">
        <div class="sidebar large-2 columns show-for-large-up">
            <div id="sidenav" class="side-nav"></div>
        </div>
        <div id="main" class="large-10 small-12 columns">
      <div id="top" class="section">
        <h1>Brightcove Playback Technology App</h1>
        <p>This app determines the playback technology for a given player and video for the current browser. Try loading this page in different browsers to see how video playback technology is browser dependent.</p>
        <div class="form-wrapper">
            <div class="form-block">
                <h3>Input data</h3>
                <fieldset>
                    <legend>Inputs</legend>

                        <p>
                            Account Id:
                            <input name="account_id" id="account_id" type="text" value="" placeholder="1752604059001">
                        </p>
                        <p>
                            Player Id:
                            <input name="player_id" id="player_id" type="text" value="" placeholder="01163bbc-a536-443f-9646-318d0d0694ae">
                        </p>
                        <p>
                            Video Id:
                            <input name="video_id" id="video_id" size="55" type="text" value="" placeholder="1754261691001">
                        </p>
                        <p>
                            <button id="techButton" >Display playback technology</button>
                        </p>
                    <p>If left blank, these values will default to a Brightcove sample account, player and video.</p>

                </fieldset>
            </div>
            <div class="form-block">
                <h3>Brightcove player</h3>
                <fieldset>
                    <legend>Player</legend>
                    <div id="player_embed"></div>
                </fieldset>
                <h3>Technology details</h3>
                <fieldset>
                    <legend>Response</legend>
                    <p id="outputArea"></p>
                </fieldset>
            </div>
        </div>

      </div>
      <p style="clear:both;">&nbsp;</p>

    </div>
  </div>
  <!-- bcl scripts -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/2.2/gist-embed.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>

  <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.3/handlebars.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
  <script src="/en/scripts/log.js"></script>
  <script src="/en/scripts/docs-nav-data.min.js"></script>
  <script src="/en/scripts/bcls-doc-site-v1.js"></script>
  <script src="/en/scripts/bc-mapi.js"></script>
  <script src="/en/scripts/expander.js"></script>
  <script>
      $(document).foundation();
  </script>

  <script type="text/javascript">
    /******** Any scripts specific to page samples should go here *********/

        var myPlayer,
            source,
			front,
            sourceType,
            sourceTypeText,
            outputText,
			skinValue,
            accountId = document.getElementById("account_id"),
            playerId = document.getElementById("player_id"),
            playerIdString,
            videoId = document.getElementById("video_id"),
            playerEmbed = document.getElementById("player_embed"),
            displayTechButton = document.getElementById("techButton"),
            response = document.getElementById("outputArea");

        displayTechButton.onclick = function() {
            accountId.value = (accountId.value == "") ? "1752604059001" : accountId.value;
            playerId.value = (playerId.value == "") ? "01163bbc-a536-443f-9646-318d0d0694ae" : playerId.value;
            videoId.value = (videoId.value == "") ? "1754261691001" : videoId.value;

            response.innerHTML = "";

            // dynamically build the player video element
            playerHTML = '<video id=\"video_1\" width=\"300px\" height=\"150px\" data-video-id=\"' + videoId.value + '\" data-account=\"' + accountId.value + '\" data-player=\"' + playerId.value + '\" data-embed=\"default\" class=\"video-js\" controls></video>' + '<script src=\"//players.brightcove.net/' + accountId.value + '/' + playerId.value + '_default/index.min.js\"><' + '/script>';

            // inject the player code into the DOM
            playerEmbed.innerHTML = playerHTML;

            playerIdString = playerId.value.toString();
            // console.log("playerIdString= ", playerIdString);
            if (playerIdString.lastIndexOf("_") >= 0) {
                playerScriptFile = '//players.brightcove.net/' + accountId.value + '/' + playerId.value + '/index.min.js';
            } else {
                playerScriptFile = '//players.brightcove.net/' + accountId.value + '/' + playerId.value + '_default/index.min.js';
            }

            loadJS(playerScriptFile, function() {
                // put code here to run after script is loaded
                playerLoaded();
            });

         }

        function loadJS(src, callback) {
            var s = document.createElement('script');
            s.src = src;
            s.async = true;
            s.onreadystatechange = s.onload = function() {
                var state = s.readyState;
                if (!callback.done && (!state || /loaded|complete/.test(state))) {
                    callback.done = true;
                    callback();
                }
            };
            document.getElementsByTagName('head')[0].appendChild(s);
        }

        function playerLoaded() {
             videojs("video_1").one('loadedmetadata', function(){
                myPlayer = this;
                source = myPlayer.currentSrc();
			    front = source.slice(0,source.indexOf("?"));
			    sourceType = front.slice(front.lastIndexOf("."));

               switch(sourceType) {
                  case ".m3u8":
                      sourceTypeText = "HLS";
                      break;
                  case ".mp4":
                      sourceTypeText = "MP4";
                      break;
                  default:
                      sourceTypeText = sourceType;
                }

                mimeType = myPlayer.currentType();

//			  find object tag with class="vjs-tech" - Flash
//			  find video tag with class="vjs-tech" - HTML5

			  	elements = document.getElementsByClassName("vjs-tech");
			    tagType = elements[0].tagName;

			  	switch(tagType) {
                case "OBJECT":
                    tagTypeText = "Flash";
                    break;
                case "VIDEO":
                    tagTypeText = "HTML5";
                    break;
                default:
                    tagTypeText = tagType;
                }

                mediaInfo = myPlayer.mediainfo;

        outputText = "Video ID = " + mediaInfo.id + "<br/>";
        outputText += "Source type = " + sourceTypeText + "<br/>";
        outputText += "MIME type = " + mimeType + "<br/>";
			  outputText += "Browser technology used = " + tagTypeText + "<br/>";
        outputText += "Player dimensions = " + myPlayer.width() + " x "+ myPlayer.height() + "<br/>";
        outputText += "Video dimensions = " + myPlayer.videoWidth() + " x " + myPlayer.videoHeight() + "<br/>";
				outputText += "Player version = " + bc.VERSION + "<br/>";

				if (bc.SKIN) {
					switch(bc.SKIN){
						case "false":
							skinValue = "No skin";
							break;
						case "graphite":
							skinValue = "Graphite";
							break;
						default:
							skinValue = "Luna (default)";
					}
				} else {
					skinValue = "Luna (default)";
				}

				outputText += "Player skin = " + skinValue;
        response.innerHTML = outputText;
        });
    }
  </script>



    <iframe id="CSAT" src="http://survey.clicktools.com/app/survey/go.jsp?iv=3poon3e7e9spn&q1=[articleURL]" style="margin-left:25%; padding-bottom:20px;width:550px;height:475px;border:none"></iframe>
<script>

    var cSat = document.getElementById('CSAT'),
        cSatSrc = cSat.getAttribute('src'),
        pageurl = window.location.href;
    cSat.setAttribute('src', cSatSrc.replace('[articleURL]', pageurl));

</script>
<br><br>
<div class="footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a></div>
<script>
var feedbackMail = document.getElementById("feedbackMail");
feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
</script>
</body>

</html>

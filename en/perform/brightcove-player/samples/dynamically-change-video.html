<!DOCTYPE html>
<html lang="en">

<head>
    
  
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
  <!-- change title to match the h1 heading -->
  <title>Dynamically Change Source Videos</title>
  <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" />
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/normalize.css" />
  <script src="//use.edgefonts.net/source-code-pro.js"></script>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/font-hack/2.015/css/hack-extended.min.css">

  <link rel="stylesheet" type="text/css" href="/en/styles/bcls-doc-site.css">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/atelier-forest.light.min.css">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/font-hack/2.015/css/hack-extended.min.css">

  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2728311-29', 'auto');
  ga('send', 'pageview');

</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>
  <style id="pageStyles">
    .video-js {
      width: 640px;
      height: 360px;
    }
  </style>
  </head>

<body>
    <!-- header navbar -->
	<div id="navWrapper" class="fixed"></div>
	<!-- breadcrumbs -->
	<nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
  <!-- search -->
  <div id="searchModal" class="reveal-modal" data-reveal></div>
  <!-- content -->
    <div class="row">
        <div class="sidebar large-2 columns show-for-large-up">
            <div id="sidenav" class="side-nav"></div>
        </div>
        <div id="main" class="large-10 small-12 columns">
      <div id="top" class="section">
        <h1>Dynamically Change Source Videos</h1>
        <p class="video-cloud-only">It is a common use-case to dynamically change the video loaded in the player. This topic shows you how to do this using both the In-Page embed and the iframe implementations. When you select a button on the HTML page, the source video will change.</p>
        <p class="perform-only">It is a common use-case to dynamically change the video loaded in the player. This topic shows you how to do this using both the In-Page embed and the iframe implementations.</p>
      </div>
            
      <div id="developmentsequence" class="section">
        <h2 id="expanderHead">Development sequence</h2>
        <div id="expanderContent" style="display:none">
          <p>Here is the recommended development sequence:</p>
          <ol>
            <li>Use the In-Page embed player implementation to test the functionality of your player, plugin and CSS (if CSS is needed)</li>
            <li>Put the plugin's JavaScript and CSS into separate files for local testing</li>
            <li>Deploy the plugin code and CSS to your server once you have worked out any errors</li>
            <li>Use <span class="video-cloud-only">Video Cloud</span><span class="perform-only">Perform</span> Studio to add the plugin and CSS to your player</li>
            <li>Replace the In-Page embed player implementation if you determine that the iframe implementation is a better fit (detailed in next section)</li>
          </ol>
          <p>For details about these steps, review the <a href="../../brightcove-player/guides/plugin-dev-quick-start.html">Quick Start to Plugin Development</a> guide.</p>
          <h3>iframe or In-Page embed</h3> 
          <p>When developing enhancements for the Brightcove player you will need to decide if the code is a best fit for the iframe or In-Page embed implementation. The best practice recommendation is to build a plugin for use with an iframe implementation. The
            advantages of using the iframe player are:</p>
          <ul>
            <li>No collisions with existing JavaScript and/or CSS</li>
            <li>Automatically responsive</li>
            <li>The iframe eases use in social media apps (or whenever the video will need to "travel" into other apps)</li>
          </ul>
          <p>Although integrating the In-Page embed player can be more complex, there are times when you will plan your code around that implementation. To generalize, this approach is best when the containing page needs to communicate to the player. Specifically,
            here are some examples:</p>
          <ul>
            <li>Code in the containing page needs to listen for and act on player events</li>
            <li>The player uses styles from the containing page</li>
            <li>The iframe will cause app logic to fail, like a redirect from the containing page</li>
          </ul>
          <p>Even if your final implementation does not use the iframe code, you can still use the In-Page embed code with a plugin for your JavaScript and a separate file for your CSS. This encapsulates your logic so that you can easily use it in multiple players.</p>
        </div><!-- id="expanderContent" -->
    </div>
            
    <div id="selectimplementation" class="section">
        <h2>Select implementation</h2>
        <p>In this sample, you will test with the In-Page embed code and then move the CSS and JavaScript into separate files to test locally. Then, you will move the JavaScript code to a plugin and run this sample as an iframe implementation. </p>
    </div>
    
    <div id="resources" class="section">
        <h2>API resources used</h2>
		  <p>The following sections detail resources used from various APIs.</p>
        <h3>Brightcove player API methods</h3>
        <ul>
          <li><code>play()</code></li>
          <li><code>catalog.getVideo()</code></li>
          <li><code>catalog.load()</code></li>
        </ul>
    </div>
            
    <div id="player" class="section">
        <h2>The player</h2>
        <p>Click the button below the player to dynamically change the source video.</p>
        
        <div class="player-block">
            <video id="myPlayerID" 
              data-account="1752604059001" 
              data-player="b51d022a-e462-4796-a084-07f44367a6e9" 
              data-embed="default" 
              data-video-id="4093643993001" 
              class="video-js" controls autoplay></video>
            <br/>
            <button onclick="changeVideo()">change video</button>
        </div>
		  
      </div><!-- id="player" -->
            
      <div id="code" class="section">
        <h2>How it works</h2>
		  <p>The following sections explain the player, JavaScript and CSS code used in the example.</p>
          
        <h3>Create the player</h3>
          <p>To create a player and assign a video to it, follow these steps:</p>
          <ol>
              <li>In the <strong>Players</strong> module, create a new player or use an existing one.</li>
              <li><span class="video-cloud-only">In the <strong>Media</strong> module, select a video and publish it with this player.</span><span class="perform-only">Assign video content to the player and publish it.</span></li>
              <li>Copy the <strong>In-Page</strong> embed code and paste it into a new HTML file.</li>
          </ol>
          <p class="BCL-aside">For details on how to get this embed code, see the <a href="../../brightcove-player/getting-started/quick-start-bc-player.html">Quick Start to Brightcove Player</a> document.</p>
          <p>The embed code should look like this:</p>
        <p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-hide-footer="true" data-gist-line="28-34,38"></code></p>
            
      
      <p class="BCL-aside">You can use Studio to create a player or refer to the <a href="../../player-management/guides/vc-player-mgmt-quick-start.html">Quick Start to Player Management</a> guide to create a player using the API directly.</p>
          
<!--
        <p>Whether you use Studio or the API directly you will you will get options for the embed_in_page or iframe implementations. Below you see the server response from using the API directly.</p>
        <p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-hide-footer="true" data-gist-line="1-7"></code></p>
-->
        <p>You will use the In-Page embed and the iframe implementations in the next steps.</p>
    </div>
          
          
      <div id="embedinpage" class="section perform-only">
        <h2>Use In-Page embed</h2>
		  <p>First, you will use the In-Page embed implementation to reference the player and change the source video using another URL for a new video. You will use the player's <code>src()</code> method to load the new video.</p>
        <h3>The HTML code</h3>
            <p>Add the following HTML to your page code:</p>
          <ul>
            <li>Lines 123-129: Defines the player and the button to click to load another video.</li>
          </ul> 
        <p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-hide-footer="true" data-gist-line="123-130"></code></p>

        <h3>The JavaScript code</h3>
        <p>This code gets a reference to the player and changes the video content.</p>
        <ul>
          <li>Lines 135-136: Creates two variables.</li>
          <li>Lines 138-140: Gets a reference to the player when it is ready.</li>
          <li>Lines 142-145: Function called on button click that uses the <code>src()</code> method to load the new video into the player and starts the video.</li>
        </ul>
		    <p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-hide-footer="true" data-gist-line="134-146"></code></p>
        <p class="BCL-aside">Note: If the player was created with no video content initially assigned you must use an object with <code>type</code> and <code>src</code> properties for the argument of the <code>src()</code> method, as shown here. If initially a video source is assigned, you can use just the URL string for the argument.</p>
        <h3>The stylesheet</h3>
          <p>This example uses CSS styles for Brightcove player.</p>
        <ul>
          <li>Lines 115-117: Set the dimensions of the player.</li>
        </ul>
        <p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-hide-footer="true" data-gist-line="114-119"></code></p>
        
        <h3>The complete code</h3>
        <p>Your page should look similar to this:</p>
        <p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-line="108-149"  data-gist-hide-footer="true"></code></p>
        <p>Browse the HTML page. You will see the appropriate video loaded into the player.</p>
	  </div>
            
    <div id="embedinpage1" class="section video-cloud-only">
        <h2>Use In-Page embed</h2>
      <p>First, you will use the In-Page embed implementation to reference the player and change the source video using the id from another video in your Video Cloud library. The general approach to this functionality is:</p>
        <ul>
          <li>Use the <code>catalog</code>'s <code>getvideo()</code> method to retrieve a new video.</li>
          <li>Use the <code>catalog</code>'s <code>load()</code> method to play the new video.</li>
        </ul>
     
        <h3>The HTML code</h3>
            <p>Add the following HTML to your page code:</p>
          <ul>
            <li>Lines 28-33: Define the player along with the initial video content.</li>
            <li>Line 36: Defines the button which when selected will update the video content.</li>
          </ul> 
        <p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-hide-footer="true" data-gist-line="27-37"></code></p>

        <h3>The JavaScript code</h3>
        <p>This code gets a reference to the player and changes the video content.</p>
        <ul>
          <li>Line 42: Instantiates the player on the page.</li>
          <li>Lines 52-54: Get a reference to the player when it is ready.</li>
          <li>Line 45: Returns the video object from your Video Cloud library for the specified video id.</li>
          <li>Line 47-48: Loads and plays the new video.</li>
        </ul>
    <p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-hide-footer="true" data-gist-line="40-56"></code></p>
        
        <h3>The stylesheet</h3>
          <p>This example uses CSS styles for the display fields and the Brightcove player.</p>
        <ul>
          <li>Lines 20-21: Set the dimensions of the player.</li>
        </ul>
        <p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-hide-footer="true" data-gist-line="18-23"></code></p>
        
        <h3>The complete code</h3>
        <p>Your page should look similar to this:</p>
        <p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-line="10-58"  data-gist-hide-footer="true"></code></p>
        <p>Browse the HTML page. When you select the <strong>change video</strong> button you should see the new video in the player.</p>
    </div>
            
    <div id="iframe" class="section perform-only">
        <h2>Use iframe</h2>
      <p>It is a best practice to use the iframe player implementation if you can. The recommended approach to changing the video source is to is to create a plugin that basically performs the JavaScript shown in the previous section. The process is complicated a bit since the JavaScript must be in a plugin to work in the iframe, as well the new video's URL must be passed into the iframe. To pass data into the iframe you must use HTML's <code>postMessage()</code> method. This is explained at length in the <a href="//docs.brightcove.com/en/perform/brightcove-player/samples/listen-for-play-button.html">Brightcove Player Sample: Play Video from iframe Parent</a> document.</p>
     
        <h3>The HTML code</h3>
            <p>The additions to the standard HTML page are the iframe tag for the player and a button.</p>
        <p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-hide-footer="true" data-gist-line="177-180"></code></p>
        <h3>The JavaScript code</h3>
        <p>When the button is clicked, the event handler function dispatches an event into the iframe. Note that the first argument of the <code>postMessage()</code> method is passed into the iframe's event listener as the <code>data</code> object in the event object. This provides access to the new video's URL in the iframe.</p>
        <p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-hide-footer="true" data-gist-line="182-190"></code></p>
        <h3>The plugin code</h3>
        <p>This code handles the event passed into the iframe, then uses information in the event object to play the new video.</p>
        <ul>
          <li>Line 160: Listens for the event to be dispatched into the iframe. Upon handling the event the <code>changeVideoFunc()</code> function is called. Note that the <code>postMessage()</code> method always dispatches an event named <code>message</code>, which is the reason for the first parameter.</li>
          <li>Line 152: Standard declaration for a plugin. Note the name of the plugin is <code>listenForChange</code>. You will be entering the name of the function into Studio's Plugin section later in this process.</li>
          <li>Line 153: Creates a variable to hold player instance.</li>
          <li>Line 154: Event handler function declaration called by the <code>addEventListener()</code> method.</li>
          <li>Line 155: Checks to be sure the event being handled is the for changing the video. In this case this check is probably superfluous as only one event is being dispatched into the iframe, but is a good practice.</li>
          <li>Line 156: Uses the <code>src()</code> method to load the video into the player. The <code>videoURL</code> defined as part of the event object's <code>data</code> property. In this case, the <code>data</code> property is the object built and passed in the iframe's parent page.</li>
          <li>Line 157: Plays the video (optional, of course).</li>
        </ul>
        <p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-hide-footer="true" data-gist-line="152-161"></code></p>
        <p>Once you have the code entered, you need to save the file to an Internet accessible URL. Then, you can go into Studio and provide the URL to the player as shown:</p>
        <div><img src="/en/video-cloud/brightcove-player/samples/assets/dynamic-add-plugin.png" alt="dynamic add plugin"></div>
        <p>You now need to be sure the plugin function is called. You can do this in Studio as shown:</p>
        <div><img src="/en/video-cloud/brightcove-player/samples/assets/dynamic-add-plugin-name.png" alt="dynamic add plugin name"></div>
        <p>Of course, the plugin name supplied must match the name given to the plugin in the associated JavaScript.</p>
        <p>The functionality is now ready to use. You will see one video playing, then when you click the button another video will be dynamically loaded and played.</p>
    </div>
            
    <div id="iframe1" class="section video-cloud-only">
        <h2>Use iframe</h2>
		  <p>It is a best practice to use the iframe player implementation if you can. The recommended approach to changing the video source is to append a query string in the form <code>?videoId=12345</code> to the <code>iframe</code>'s <code>src</code> attribute.</p>
		 
        <h3>The HTML code</h3>
            <p>Add the following HTML to your page code:</p>
          <ul>
            <li>Lines 83-84: Define the player along with the initial video content.</li>
            <li>Line 87: Defines the button which when selected will update the video content.</li>
          </ul> 
        <p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-hide-footer="true" data-gist-line="81-88"></code></p>

        <h3>The JavaScript code</h3>
        <p>This code gets a reference to the player and changes the video content.</p>
        <ul>
          <li>Line 92: Gets a reference to the first <code>iframe</code> element on the page.</li>
          <li>Line 92: Defines the query string for the new video id from your Video Cloud library.</li>
          <li>Line 97: Appends the query string with the new video id to the <code>iframe</code>'s <code>src</code> attribute.</li>
        </ul>
		<p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-hide-footer="true" data-gist-line="91-100"></code></p>
        
        <h3>The stylesheet</h3>
          <p>This example uses CSS styles for the display fields and the Brightcove player.</p>
        <ul>
          <li>Lines 74-75: Set the dimensions of the player.</li>
        </ul>
        <p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-hide-footer="true" data-gist-line="72-77"></code></p>
        
        <h3>The complete code</h3>
        <p>Your page should look similar to this:</p>
        <p><code data-gist-id="b62528eb1aac500b1dcb" data-gist-line="64-103"  data-gist-hide-footer="true"></code></p>
        <p>Browse the HTML page. When you select the <strong>change video</strong> button you should see the new video in the player.</p>
	  </div>           
    
	 
      <div class="section" id="BCLreferences">
        <h2>Related Topics</h2>
        <ul>
          <li class="video-cloud-only"><a href="//docs.brightcove.com/en/video-cloud/player-management/guides/vc-player-mgmt-quick-start.html">Quick Start to Player Management</a></li>
          <li class="perform-only"><a href="//docs.brightcove.com/en/perform/player-management/guides/vc-player-mgmt-quick-start.html">Quick Start to Player Management</a></li>
          <li class="perform-only"><a href="//docs.brightcove.com/en/perform/brightcove-player/guides/plugin-dev-quick-start.html">Quick Start to Plugin Development</a></li>
          <li class="video-cloud-only"><a href="//docs.brightcove.com/en/video-cloud/brightcove-player/guides/plugin-dev-quick-start.html">Quick Start to Plugin Development</a></li>
          <li  class="perform-only"><a href="//docs.brightcove.com/en/perform/brightcove-player/samples/listen-for-play-button.html">Brightcove Player Sample: Play Video from iframe Parent</a></li>
        </ul>
      </div>
    </div>
  </div>
  <!-- bcl scripts -->
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/2.2/gist-embed.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
  
  <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.3/handlebars.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
  <script src="/en/scripts/log.js"></script>
  <script src="/en/scripts/docs-nav-data.min.js"></script>
  <script src="/en/scripts/bcls-doc-site-v1.js"></script>
  <script src="/en/scripts/bc-mapi.js"></script>
  <script src="/en/scripts/expander.js"></script>
  <script>
      $(document).foundation();
  </script>
  <script src="//players.brightcove.net/1752604059001/b51d022a-e462-4796-a084-07f44367a6e9_default/index.min.js"></script>
  <!-- custom script -->
  <script type="text/JavaScript">
    var myPlayer;

    videojs('myPlayerID').ready(function () {
      myPlayer = this;
    });

    function changeVideo() {
      console.log('in change vid')
      myPlayer.catalog.getVideo('3851389913001', function (error, video) {
        myPlayer.catalog.load(video);
        myPlayer.play();
      })
    }
  </script>
    
    
	<iframe id="CSAT" src="http://survey.clicktools.com/app/survey/go.jsp?iv=3poon3e7e9spn&q1=[articleURL]" style="margin-left:25%; padding-bottom:20px;width:550px;height:475px;border:none"></iframe>
<script>
    
    var cSat = document.getElementById('CSAT'),
        cSatSrc = cSat.getAttribute('src'),
        pageurl = window.location.href;
    cSat.setAttribute('src', cSatSrc.replace('[articleURL]', pageurl));
    
</script>
<br><br>
<div class="footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a></div>
<script>
var feedbackMail = document.getElementById("feedbackMail");
feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
</script>
</body>

</html>

<!DOCTYPE html>
<html lang="en">

<head>

	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no, width=device-width" />
	<!-- change title to match the h1 heading -->
	<title>Brightcove Player Sample: Dynamic Call to Action</title>
	<link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/foundation.min.css" />
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/css/normalize.css" />
	<script src="//use.edgefonts.net/source-code-pro.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/font-hack/2.015/css/hack-extended.min.css">

	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/styles/atelier-forest.light.min.css" />
    <link rel="stylesheet" type="text/css" href="/en/styles/bcls-doc-site.css" />
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" type="text/css" href="//cdn.jsdelivr.net/font-hack/2.015/css/hack-extended.min.css">

	<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2728311-29', 'auto');
  ga('send', 'pageview');

</script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/vendor/modernizr.js"></script>
  <style>
    .video-js {
      height: 344px;
      width: 610px;
    }
  </style>
  <link href="//players.brightcove.net/videojs-overlay/1/videojs-overlay.css" rel='stylesheet'>
  <link href="//players.brightcove.net/videojs-custom-endscreen/2/videojs-custom-endscreen.css" rel='stylesheet'>
</head>

<body>
	<!-- header navbar -->
	<div id="navWrapper" class="fixed"></div>
	<!-- breadcrumbs -->
	<nav id="breadCrumbWrapper" class="breadcrumbs show-for-medium-up"></nav>
	<!-- search -->
	<div id="searchModal" class="reveal-modal" data-reveal></div>
	<!-- content -->
<div class="perform-only">
        <h1>Brightcove Player Sample:  Dynamic Call to Action</h1>
        <p>The information contained in this document is not applicable for Perform customers. It reads video metadata from the Video Cloud catalog to dynamically create a link for a call to action.</p>
    </div>	<!-- content -->
	<div class="row video-cloud-only">
		<div class="sidebar large-2 columns show-for-large-up">
			<div id="sidenav" class="side-nav"></div>
		</div>
		<div id="main" class="large-10 small-12 columns">
			<div id="top" class="section">
				<h1>Brightcove Player Sample:  Dynamic Call to Action</h1>
				<!-- Place document intro sentence(s) here -->
				<p>In this sample, a dynamically built call to action is shown in three different ways. This means that a link will be shown that the person who is watching the video can click, and in this case, a new window/tab opens with a different web page visible. In this sample, the URL for the link and the text for the link is stored in the video's metadata. The metadata is read then the appropriate HMTL anchor tag is dynamically built with the corresponding link and text.</p>
        <p>The call to action is displayed in three ways:</p>
        <ul>
          <li>In an overlay whenever the video is paused.</li>
          <li>On the custom endscreen.</li>
          <li>In the HTML page. The location in the page is determined by simply placing this HTML paragraph tag where you want the call to action link to appear: <code>&lt;p id=&quot;cta&quot;&gt;&lt;/p&gt;</code>.</li>
        </ul>
        <p>Of course, you do not need to use all three methods, but just the appropriate techniques for your business case. Simply remove the code not needed for your implementation.</p>
			</div>

			<div id="developmentsequence" class="section">
        <h2 id="expanderHead">Development sequence</h2>
        <div id="expanderContent" style="display:none">
          <p>Here is the recommended development sequence:</p>
          <ol>
            <li>Use the embed_in_page player implementation to test the functionality of your player, plugin and CSS (if CSS is needed)</li>
            <li>Put the plugin's JavaScript and CSS into separate files for local testing</li>
            <li>Deploy the plugin code and CSS to your server once you have worked out any errors</li>
            <li>Use the new Video Cloud Studio to add the plugin and CSS to your player</li>
            <li>Replace the embed_in_page player implementation if you determine that the iframe implementation is a better fit (detailed in next section)</li>
          </ol>
          <p>For details about these steps, review the <a href="//docs.brightcove.com/en/video-cloud/brightcove-player/guides/plugin-dev-quick-start.html">Quick Start to Plugin Development</a> guide.</p>
          <h3>iframe or embed_in_page</h3>
          <p>When developing enhancements for the Brightcove player you will need to decide if the code is a best fit for the iframe or embed_in_page implementation. The best practice recommendation is to build a plugin for use with an iframe implementation. The advantages of using the iframe player are:</p>
          <ul>
            <li>No collisions with existing JavaScript and/or CSS</li>
            <li>Automatically responsive</li>
            <li>The iframe eases use in social media apps (or whenever the video will need to "travel" into other apps)</li>
          </ul>
          <p>Although integrating the embed_in_page player can be more complex, there are times when you will plan your code around that implementation. To generalize, this approach is best when the containing page needs to communicate to the player. Specifically, here are some examples:</p>
          <ul>
            <li>Code in the containing page needs to listen for and act on player events</li>
            <li>The player uses styles from the containing page</li>
            <li>The iframe will cause application logic to fail, like a redirect from the containing page</li>
          </ul>
          <p>Even if your final implementation does not use the iframe player, you can still use the embed_in_page player with a plugin that contains your JavaScript and CSS. This encapsulates your logic so that you can easily use it in multiple players.</p>
			  </div><!-- id="expanderContent" -->
      </div>

      <div id="selectimplementation" class="section">
				<h2>Select implementation</h2>
				<p>In this sample, the player is going to interact with the parent page, so the in-page embed implementation will be used.</p>
			</div>

			<div id="resources" class="section">
				<h2>API/Plugin resources used</h2>
				<p>The following sections detail resources used from various APIs.</p>
				<h3>Brightcove Player API</h3>
				<ul>
          <li><code>on()</code>: Method to associate an event handler with an event, in this case <code>loadstart</code>.</li>
          <li><code>mediainfo</code>: Object containing video information.</li>
        </ul>
        <h3>Plugins</h3>
        <ul>
          <li><a href="../../brightcove-player/guides/custom-endscreen-plugin.html">Custom Endscreen Plugin</a></li>
          <li><a href="../../brightcove-player/guides/overlay-plugin.html">Display Overlay Plugin</a></li>
        </ul>
			</div>

			<div id="player" class="section">
				<h2>The player</h2>
        <p>You will be able to see all three call to action display techniques with this player.</p>
        <ul>
          <li>Look below the player and you see the call to action in the HTML page.</li>
          <li>Start then pause the video. You will see the call to action every time the video is paused.</li>
          <li>At the end of the video the custom endscreen will appear containing the call to action.</li>
        </ul>
        <video id="myPlayerID"
          data-video-id="4607357817001"
          data-account="1752604059001"
          data-player="7bf38d3b-968a-4dec-855c-3f98e08604df"
          data-embed="default"
          class="video-js" controls></video>
        <p id="cta" style='color:red; font-weight: bold; font-size: 20px'></p>
			</div>

			<div id="code" class="section">
				<h2>How it works</h2>
        <p>For every video with which you want use a call to action you will need to enter the <strong>Related Link URL</strong> and <strong>Related Link Text</strong> in <span class="video-cloud-only">Video Cloud</span><span class="perform-only">Perform</span> Studio. You do this in the <strong>MEDIA > VIDEO INFORMATION</strong> section, as shown here:</p>
        <div><img src="/en/video-cloud/brightcove-player/samples/assets/call-to-action/add-link-url-studio.png" alt="link in studio"></div>
        <p>JavaScript is then used to:</p>
        <ul>
          <li>Populate the <code>mediainfo</code> property.</li>
          <li>Dynamically build an HTML anchor tag with a link.</li>
          <li>Use the dynamically built HMTL in the HTML page, in the overlay, and in the custom endscreen.</li>
        </ul>
				<p>The following sections explain the player, JavaScript and CSS code used in the example.</p>
        <h3>Create the player</h3>
        <div class="video-cloud-only">
          <p>To create a player and assign a video to it, follow these steps:</p>
            <ol>
              <li>Using Video Cloud Studio, in the <strong>Players</strong> module, create a new player or use an existing one.</li>
              <li>In the <strong>Media</strong> module, select a video and publish it with this player.</li>
              <li>Copy the In-Page embed code and paste it into a new HTML file.</li>
            </ol>
        </div>

				<h3>The player code</h3>
        <p>Your player code should look similar to the following:</p>
        <p class="video-cloud-only"><code data-gist-id="b6b3de6baf916b7cad99" data-gist-hide-footer="true" data-gist-line="20-25"></code></p>
        <p>Note that an <code>id</code> has been added to the code.</p>
        <h3>The HTML code</h3>
        <p>Add the following HTML to your page code where you wish your call to action link to appear:</p>
        <p class="video-cloud-only"><code data-gist-id="b6b3de6baf916b7cad99" data-gist-hide-footer="true" data-gist-line="27"></code></p>
				<h3>The JavaScript code</h3>
				<p>Add the following JavaScript to your page code:</p>
        <ul>
          <li>Lines 29-31: Link to the JavaScript files for the player, overlay plugin and custom endscreen .</li>
          <li>Lines 34, 57: Wait for the player to be ready for programmatic interaction.</li>
          <li>Line 35: Create a variable to hold a reference to the player.</li>
          <li>Line 36, 56: Add an event listener for the <code>loadstart</code> event. In the anonymous event handler function you can access video information stored in the <code>mediainfo</code> object.</li>
          <li>Lines 37, 38: Extract the link text and link URL from the metadata and store in variables. Of course, this would not have to be done, but it makes the next line of code that dynamically builds the anchor tag much neater.</li>
          <li>Line 39: Build an HTML anchor tag using the variables just created. Note a <code>target</code> is used to open the linked page in a new window or tab.</li>
          <li>Line 40: Inject the dynamically built anchor tag into the HTML page.</li>
          <li>Lines 41-48: Configure the overlay plugin to display the call to action whenever the video is paused.</li>
          <li>Lines 49-51: Configure the custom endscreen plugin to display the call to action when the video ends.</li>
          <li>Lines 52-55: Add a style so the overlay is not showing when the video ends. If is not needed to have both the endscreen and overlay displaying the same link.</li>
        </ul>
        <p><code data-gist-id="b6b3de6baf916b7cad99" data-gist-hide-footer="true" data-gist-line="29-58"></code></p>
        <h3>The stylesheet</h3>
				<p>The styles used:</p>
        <ul>
          <li>Lines 7-12: Set the size of the player.</li>
          <li>Line 13: Link to the CSS for the overlay plugin.</li>
          <li>Line 14: Link to the CSS for the custom endscreen plugin.</li>
        </ul>
        <p><code data-gist-id="b6b3de6baf916b7cad99" data-gist-hide-footer="true" data-gist-line="7-14"></code></p>
        <h3>Full code</h3>
        <p>Here is the full code for the sample:</p>
        <p><code data-gist-id="b6b3de6baf916b7cad99" data-gist-hide-footer="true" data-gist-line="1-62"></code></p>
			</div>

      <div id="useiframe" class="section">
        <h2>Use iframe</h2>
        <p>The iframe implementation cannot be used in this case since the player needs to interact with the parent HTML page.</p>
      </div>

			<div class="section" id="BCLreferences">
				<h2>Related Topics</h2>
				<ul>
					<li> <a href="../../brightcove-player/reference/player-catalog.html">Player Catalog Reference</a></li>
					<li> <a href="../../brightcove-player/guides/mediainfo.html">Video Metadata</a></li>
          <li><a href="../../brightcove-player/guides/custom-endscreen-plugin.html">Custom Endscreen Plugin</a></li>
          <li><a href="../../brightcove-player/guides/overlay-plugin.html">Display Overlay Plugin</a></li>
				</ul>
			</div>
		</div>
	</div>
	<!-- bcl scripts -->
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
	<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/gist-embed/2.2/gist-embed.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/5.5.3/js/foundation.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.3/handlebars.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.9.1/highlight.min.js"></script>
	<script src="/en/scripts/log.js"></script>
	<script src="/en/scripts/docs-nav-data.min.js"></script>
	<script src="/en/scripts/bcls-doc-site-v1.js"></script>
	<script src="/en/scripts/bc-mapi.js"></script>
  <script src="/en/scripts/expander.js"></script>
	<script>
		$(document).foundation();
	</script>
  <script src="//players.brightcove.net/1752604059001/7bf38d3b-968a-4dec-855c-3f98e08604df_default/index.min.js"></script>
  <script src="//players.brightcove.net/videojs-overlay/1/videojs-overlay.min.js"></script>
  <script src="//players.brightcove.net/videojs-custom-endscreen/2/videojs-custom-endscreen.min.js"></script>
	<script type="text/javascript">
		/******** Any scripts specific to page samples should go here *********/
    videojs('myPlayerID').ready(function(){
      var myPlayer = this;
      myPlayer.on('loadstart', function(evt) {
        var linkText = myPlayer.mediainfo.link.text,
          linkURL = myPlayer.mediainfo.link.url,
          hrefString = '<a href = "' + linkURL + '" target="_blank" rel="noopener noreferrer">' +  linkText + '</a>';
        document.getElementById("cta").innerHTML = hrefString;
        myPlayer.overlay({
          overlays: [{
            "align": "bottom",
            "content": "<p style='color:red; background-color: black; font-weight: bold; font-size: 20px'>" + hrefString + "</p>",
            "start": "pause",
            "end": "play"
          }]
        });
        myPlayer.customEndscreen({
          "content": "<p style='font-weight: bold; font-size: 20px'>" + hrefString + "</p>"
        });
        myPlayer.on('ended',function(){
          var overlayElement = document.getElementsByClassName('vjs-overlay')[0];
          overlayElement.setAttribute('style', 'display: none;');
        })
      });
    });
	</script>
	
    
<iframe id="CSAT" src="http://survey.clicktools.com/app/survey/go.jsp?iv=3poon3e7e9spn&q1=[articleURL]" style="margin-left:25%; padding-bottom:20px;width:550px;height:475px;border:none"></iframe>
<script>
    
    var cSat = document.getElementById('CSAT'),
        cSatSrc = cSat.getAttribute('src'),
        pageurl = window.location.href;
    cSat.setAttribute('src', cSatSrc.replace('[articleURL]', pageurl));
    
</script>
<br><br>
<div class="footer text-center"><a id="feedbackMail" href="mailto:docs@brightcove.com">Questions or comments?</a></div>
<script>
var feedbackMail = document.getElementById("feedbackMail");
feedbackMail.setAttribute("href", "mailto:docs@brightcove.com?subject=question regarding " + encodeURI(document.location.href));
</script>
</body>

</html>
